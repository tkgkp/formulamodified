:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: %personel.fml
:: Utworzony: 2016-06-20
:: Autor: AC
::======================================================================================================================
:: Zawartość: Formuły do obsługi czynności manualnych w procesach personelowych
::======================================================================================================================

\pracownik
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AC [20.14]
:: OPIS: wykorzystywany przy procesach (np. PER_WPU_WWW, PER_WPR_WWW) - formuła wyznaczająca e-mail użytkownika
::       składającego plan/wniosek urlopowy
::   WE: _a - tabela, musi posiadać pole P().OSOBA
:: MOD: sitek - dodanie dat i dni roboczych
::----------------------------------------------------------------------------------------------------------------------
_nwu:=params_get().mp.load(exec('kind_in','#b_port')).p01;
P.cntx_psh();
OSOBA.cntx_psh();
_osoba:=exec('FindAndGet','#table',_a,_nwu,,'P().OSOBA',null());
_prac:=exec('FindAndGet','#table',OSOBA,_osoba,,'PIERWSZE','')+' '+exec('FindAndGet','#table',OSOBA,_osoba,,'NAZWISKO','');
::_prac+=' numer teczki '+exec('FindAndGet','#table',_a,_nwu,,'P().T','');
::nuco
_prac+='\n\rNumer teczki: '+exec('FindAndGet','#table',_a,_nwu,,'P().T','');
_odkiedyuw:=exec('FindAndGet','#table',_a,_nwu,,'OD','');
_dokiedyuw:=exec('FindAndGet','#table',_a,_nwu,,'DO','');
_ilednirobo:=exec('FindAndGet','#table',_a,_nwu,,'NR','');
_prac+='\n\rOd kiedy:	' + _odkiedyuw$2;
_prac+='\n\rDo kiedy:	' + _dokiedyuw$2;
_prac+='\n\rDni roboczych:	' + $_ilednirobo;

P.cntx_pop();
OSOBA.cntx_pop();
'Został złożony nowy wniosek urlopowy przez pracownika: %1'@ [_prac]