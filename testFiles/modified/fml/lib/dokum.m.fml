:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: dokum.fml
:: Utworzony: 20.03.2015
:: Autor: AWI
::======================================================================================================================
:: Zawartość: Obsługa załączników
::======================================================================================================================


\dokum_wine
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: ustawia okno redakcji dla DOKUM
::----------------------------------------------------------------------------------------------------------------------
_win:=
   {? DOKUM.TYP='D' & DOKUM.KH=null()
   || 'RED'
:: NUCO - PeKa dla zalcznikow materilowych uproszczone okno RED_INNY (dodatkowe pola ustawiane w qdef)
   |? DOKUM.TYP='D' | (DOKUM.KH<>null() & 8+DOKUM.REFSQL<>'material')
   || exec('dokum_okno_red','dokum')
   |? DOKUM.TYP='L'
   || 'RED_L'
   |? DOKUM.TYP='K' | (DOKUM.KH & 8+DOKUM.REFSQL<>'material')
   || exec('dokum_okno_red','dokum')
   |? DOKUM.TYP='I' & DOKUM.DOKUM=null()
   || DOKUM.efld_opt('REDK','mark=0',,'KH','KOD');
      DOKUM.efld_opt('REDK','mark=0',,'KH_OSOB','NAZWISKO');
      DOKUM.btn_eopt('REDK','UPRAW','state=grayed');
      'REDK'
   || 'RED_INNY'
   ?};
DOKUM.win_edit(_win)


