:!UTF-8
\zmien
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Wybór jednostki miary
::   WE: symbol jednostki miary, od której rozpocząć selekcję
::   WY: STRING - JM.KOD lub ''
::  TAG: <PRYWATNA>
::----------------------------------------------------------------------------------------------------------------------
_start:={? var_pres('_a')=type_of('') || _start:=_a || _start:='' ?};
_result:='';
M.cntx_psh();
_start:=M.J().KOD;
JM.cntx_psh();
_acr_sel:=JM.mk_sel('Jednostki miary'@,'T',0,,,,,,'U');
JM.win_fld(_acr_sel,,'KOD',,,8,,0,'Kod'@);
JM.win_fld(_acr_sel,,'NAZ',,,30,,0,'Nazwa'@);
JM.win_act(_acr_sel,,'Formuła','&Wybierz'@@,,'Wybór bieżącego zapisu'@,"sel_exit()",,1,,,,'W');
JM.win_act(_acr_sel,,'Szukaj');
JM.win_sel(_acr_sel);
JM.index('KOD');
JM.prefix();
JM.find_key(_start);
{? JM.select(,1,5)
|| _result:=JM.ref
?};
M.J:=_result;
M.put();
M.cntx_pop();
JM.cntx_pop()

:!UTF-8
\zmien_dk
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Wybór jednostki miary
::   WE: symbol jednostki miary, od której rozpocząć selekcję
::   WY: STRING - JM.KOD lub ''
::  TAG: <PRYWATNA>
::----------------------------------------------------------------------------------------------------------------------
_start:={? var_pres('_a')=type_of('') || _start:=_a || _start:='' ?};
_result:='';
DK.cntx_psh();
_start:=DK.JM().KOD;
JM.cntx_psh();
_acr_sel:=JM.mk_sel('Jednostki miary'@,'T',0,,,,,,'U');
JM.win_fld(_acr_sel,,'KOD',,,8,,0,'Kod'@);
JM.win_fld(_acr_sel,,'NAZ',,,30,,0,'Nazwa'@);
JM.win_act(_acr_sel,,'Formuła','&Wybierz'@@,,'Wybór bieżącego zapisu'@,"sel_exit()",,1,,,,'W');
JM.win_act(_acr_sel,,'Szukaj');
JM.win_sel(_acr_sel);
JM.index('KOD');
JM.prefix();
JM.find_key(_start);
{? JM.select(,1,5)
|| _result:=JM.ref
?};
DK.JM:=_result;
DK.put();
DK.cntx_pop();
JM.cntx_pop()