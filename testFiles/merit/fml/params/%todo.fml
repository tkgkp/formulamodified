:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: %todo.fml
:: Utworzony: 01.04.2016 Prima Aprilis
:: Autor: [rr]
::======================================================================================================================
:: Zawartość: Formuły dla warunku dla TODO
::======================================================================================================================


\sprUprMag
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [17.00]
:: OPIS: Sprawdzenie czy podany operator ma uprawnienia do danego magazynu
::   WE: pobieramy za pomocą params_get();
::   WY: 1-tak 0-nie
::----------------------------------------------------------------------------------------------------------------------
_param:=params_get();
:: parametry wejściowe czynności
_in:=_param.in;
:: użytkownik
_user:=_param.user;

_wyn:=0;

{? var_pres('ND',_in)<>type_of(null()) | _in.ND=null()
|| _mag:=null()
|| _mag:=exec('FindAndGet','#table',ND,_in.ND,,"MAG",null())
?};

{? _mag=null()
|| _wyn:=1
|| USERS_UP.cntx_psh();
   USERS_UP.index('MAG');
   USERS_UP.prefix(_user,'MG',_mag);
   _wyn:=USERS_UP.first();
   USERS_UP.cntx_pop()
?};
_wyn


\desc_problems_own
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [18.42]
:: OPIS: Opis na TODO dla zadania przejrzenia procesów własnych z problemami
::   WY: STRING
::  TAG: <PUBLICZNA>
::----------------------------------------------------------------------------------------------------------------------
_mp:=params_get().mp;
_in:=_mp.load(exec('kind_in','#b_port'));
_size:=exec('procesy_problem_moje','%gate',_in.p01);
_result:='Przejrzyj procesy własne z problemami. Liczba procesów: %1'@[$_size];
_result


\desc_problems_all
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [18.42]
:: OPIS: Opis na TODO dla zadania przejrzenia procesów wszystkich z problemami
::   WY: STRING
::  TAG: <PUBLICZNA>
::----------------------------------------------------------------------------------------------------------------------
_size:=exec('count_problemed','#bi_proc');
_result:='Przejrzyj procesy z problemami. Liczba procesów: %1'@[$_size];
_result


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [19.22]
:: OPIS: Ustala treść na ToDo dla czynności ręcznej, której parametr jest typu złączeniowego
::       Przykładowe użycie w formule głównej:
::        FUN.ask('Kontynuować proces dotyczący zapisu: %1?'[params_exec('desc','%todo','p01')])
::       Przykładowe użycie na ToDo:
::        'Kontynuacja procesu dotyczącego zapisu: %1'[params_exec('desc','%todo','p01')]
::   WE: _a - symbol parametru, np. 'p01'
::----------------------------------------------------------------------------------------------------------------------
_mp:=params_get().mp;
_par:=_a;

_desc:='';
_in:=_mp.load(exec('kind_in','#b_port'));

:: jest parametr wejściowy to ustawiam odpowiedni rekord
{? var_pres(_par,_in)
|| _desc:=exec('record','#to_string',($('_a.'+_par))(_in))
?};
_desc

:Sign Version 2.0 jowisz:1028 2019/06/07 16:01:03 57e4734726d50d5d5ae2ca9264545a5360819dd45f45ab0fcad379c77a10d38aa891fb5075c82e75a17004be654b43481c2b394069b3e15f40ffed8c004f8e4a691619f979e8594de77e9a3e1ad8760a47211a58f8e6d5b1b643b4f0d6c1a85681dca409c5d373e15af4913bcf6b7abf15a949492338465729ac065aa008dfe9
