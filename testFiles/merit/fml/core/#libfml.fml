:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: #libfml.fml
:: Utworzony: 13.11.2020
:: Autor: TS
::======================================================================================================================
:: Zawartość: zastępniki funkcji bibliotecznych z wersji R.20
::======================================================================================================================


:: Zamienia ciąg znaków ISO (_a) na znacznik czasowy utc, pozostałe pola wypełnia jak funkcja iso_datetime_parse
iso_datetime_parse_utc:="
   _parse:=obj_ntab_add(iso_datetime_parse(_a),'utc');
   _parse.utc:=
      {? _parse.date$0+_parse.time$0>'1970010100010000'
      || #_parse.date*86400+*_parse.time*60-62135686800
      ?}+_parse.fsec;
   _parse.utc+=*(_parse.time-utc_time(_parse.utc))*60;
   _parse.utc+=(_parse.date-utc_date(_parse.utc))*24*60*60;
   _parse
";

:: Zamienia znacznik czasowy utc (_a) na postać tekstową ISO
iso_datetime_value_utc:="
   iso_datetime_value(utc_date(_a),utc_time(_a))+(form(frac(_a),,3,'0.')+4)
";

exec('DECLARE_mwac_log_clear','#mwac_log_clear');
~~

:Sign Version 2.0 jowisz:1045 2022/06/30 14:23:09 92e8c2b20b7c7c44ba5a1db7d452a8a02c6152bad34f9c3e16eec347e9a97e3d4d581b741d32702c89059a9a1d0614b5307f24e2d87f488fea012ac9ea3228a9810e4ba67c230fe8fb35b481db3df6746bd8ab8da3dd8c496559317699a2b823bf0caf209deb5da39e237aa89fa63e09fa644168d27db43cfaccf7eafbba3da8
