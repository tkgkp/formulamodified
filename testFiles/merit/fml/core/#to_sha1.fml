:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: #to_sha1.fml
:: Utworzony: 09.09.2021
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły do obsługi funkcji skrótu sha1
::======================================================================================================================


\sha1
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [21.37]
:: OPIS: Zwraca sha1 dla tabeli
::   WE:  _a  - akronim tabeli
::       [_b] - kod wersji skrótu
::----------------------------------------------------------------------------------------------------------------------

:: Bieżąca (domyślna) wersja, wg której generowany jest plik JPK
_cur_ver:='00';

_tab:=_a;
_ver:={? var_pres('_b')>0 & type_of(_b)=type_of('') & +_b=2 || _b || _cur_ver ?};

{? _ver='00'
|| _ver+
   {? _tab='DOK'
   || exec('sha4tab','#table',_tab,
         'JPK_GTU,JPK_PROC,REJ,DOK_REJ,NR,ZAR,DR,NK,WYS,HAN,ZAA,DAKC,DKS,TR,WAL,'
         'BANK,TKRS,TYPKRS,DTW,NIP,KH,KOR,RVAT,FAK,SUMC,SUMWAL,JORG,DTO,OKRVAT,ODD,DOKZRODL,'
         'NRDZ,DODSLU,DODSLO,D3,D4,KSIEGOWY,A_VAT,SP_PL,RB,KRAJ,TRKS_V,SYSTEM,DKS_K,WSK_XD,'
         'E_DOC,E_DOCP,DZ,EDOKUM,DOP,SYM_ZEW,KOR_ZEW,POLA,KH_FULL,MIASTO,UL,POCZ,MG,KOR_PRZY,'
         'KOR_OKR,ID_S_VAT,EDI,SP_WYM,RB_V,GMINA,KN,JPK_V_T'
      )
   |? _tab='POZ'
   || exec('sha4tab','#table',_tab,
         'DOK,POZ,KON,STR,SUM,KOM,OP,SUMW,WAL,ID,TP,TID,VAT,ODD,PKON,DO,KURS,'
         'DATA_R,SLO_PROJ,SYM_ROK,ODD_KS,DOK_MOD,POZ_MOD,SYM_ZEW,DOK_ODD,DOK_REJ,WN,MA,'
         'SP_KS,SP_V,SP_WYM,WN_WAL,MA_WAL'
      )
   |? _tab='VAT_PS'
   || exec('sha4tab','#table',_tab,
         'VAT_DEK,VAT_POZ,REJ_VAT,NR_VAT,REJ_KS,NR_KS,KH,NIP,DATA,SVAT,NETTO,VAT,BRUTTO,'
         'PVAT_REF,CRC,TYP,SYM,SYM_ROK,KON,ODD,TP,ZWL,DATA2,ADRES,TYP_OPER,SYM_ZEW,JPK_TD,'
         'JPK_GTU,JPK_PROC,OKRO_F,POMIN'
      )
   |? _tab='POZF'
   || exec('sha4tab','#table',_tab,
         'DOK,EDOKUM,LP,NAZ,SV,JM,IL,C,RABAT,WN,WB,WV,JPK_GTU,KODP,ZASOB,GRVAT,ODD,REJ,'
         'DZ,DT,MOD_DATA,MOD_CZAS,MOD_KTO'
      )
   |? _tab='ND'
   || exec('sha4tab','#table',_tab,
         'ODDZ,AR,AM,TYP,NR,SYM,MAG,D,MD,KH,WAR,KK,FAKS,DA,FZAK,WAL,ZAK,TEN,'
         'USER,O,NREF,NNAME,US,TA,SWAL,KRS,NETW,RTK,NTK,DTK,BTK,KRAJ,NIP_UE,INTRA,NWAL,'
         'NSWAL,NKRS,NRTK,NNTK,NDTK,NBTK,KH_ODB,POW,RAB,KOR,KH_MSC,KPW,WD,RTRANSAK,RTRANSPO,'
         'IST_TYP,IST_OKR,ZL,WYD,FAKS_REF,SCWAL,SCSWAL,SCKRS,SCRTK,SCNTK,SCDTK,SCBTK,SCPOW,'
         'SCPOZ,SCSAD,SCNRR,SCWAR,PROJEKT,CB,TRN,RR,RM,RT,NDSQL,SPOBLRAB,DR,CR,DLAKH,'
         'RAB_TYP,SPP,GRATISY,POLA,STAT_REJ,GRP_KEY,DOST_ODB,PROJEKTY,EDI_R,EDI_W,ID,'
         'PRIORITY,KPL,IL_ZT,IL_TR,TRARCH_B,TRARCH_E,INTRAKC,T'
      )
   |? _tab='DK'
   || exec('sha4tab','#table',_tab,
         'N,M,P,IL,C,WAR,CN,CB,WN,SV,WV,WB,AR,DOST,PLUS,RAB,CWAL,KURS,RDK,NDK,'
         'KK,WAL,ZP,DK_C,JM,POW,MX,NX,FAP,REF_KOR,SRDK,PRDK,ZAM_RN,KPW,WD,RTRANSAK,'
         'RTRANSPO,KP,MASAN,ILUJM,WF,WS,ZL,WYD,J2,IL2,T2,WS2,PARTIA,OPAK_GEN,SKLSQL,WARZ,'
         'KCN,CLO,SCC,SCWAR,PROJEKTO,PROJEKT,UWAGI,RABK,PROMO,STATS,ZAM_RP,RDKC,TAR_H,TAR_TMS,'
         'AFIFO,ZLIM,M_ZLIM,TM_STAMP,SCEAN,IL_B,ZLGD,ZGP,ZGH,PROJEKTY,DKDOST,IDKH,'
         'KH,KH_ODB,TYPSKL,GRP,TW,PKWIU_CN,IL_ZT,IL_TR,WYP,MAR,NAR,IL_RK'
      )
   |? _tab='FAP'
   || exec('sha4tab','#table',_tab,
         'FAKS,POZ,M,IL,JM,CPR,RAB,CN,CB,WN,SV,WV,WB,Z,U,KK,WAL,CWAL,WWAL,VWAL,'
         'BWAL,WAL_P,WWAL_P,VWAL_P,BWAL_P,WAL_N,KRS,PRZAL,POZF,MX,NX,MG,POZP,KPW,WD,'
         'RTRANSAK,RTRANSPO,KP,MASAN,ILUJM,WF,WS,J2,IL2,T2,WS2,OPAK_GEN,WAL_H,KCN,RABK,'
         'PROMO,DK_C,RDKC,TAR_H,TAR_TMS,PROJ_W,POWKOR,UWAGI,JPK_GTU,PROJEKTY,OO,'
         'IDKH,KH,KH_ODB,RAB1,MKODK,SP_WYM,PKWIU_CN,IL_ZT,IL_TR,HAN,IL_RK'
      )
   |? _tab='PW'
   || exec('sha4tab','#table',_tab,
         'ODD,RBL,BL,NRW,NRP,DK,STR,KW,TYPTRAN,TYTOP,RBK,BK,KONTR,KH,WSK_R,AN,SYM,REJ,'
         'NRD,WAL,KURS,KW_WAL,TMS,PLIK,RZ,PG,ZAD,SYM_ZEW,PWN,SP,SP_KHNIP,SP_V,'
         'SP_NRFAK,TRANSPOW'
      )
   |? _tab='PVAT'
   || exec('sha4tab','#table',_tab,
         'DVAT,NR,GRVAT,STVAT,SUM1,SUM2,VAT,CLO,AKCYZA,KOS,SUMC,WARW,KURS,VAT_ODL,VATKOSZT,OP,TYP_VAT,KNAG'
      )
   |? _tab='VPOZ'
   || exec('sha4tab','#table',_tab,
         'DOK,NETTO,PR,VAT,BRUTTO,GRVAT,KK,K2,R,Z,WCLO,CLO,AKCYZA,KOS,WARW,KURS,NETTO_D,VAT_D,BRUTTO_D,KURS_D,OKRVAT,'
         'A_VAT,VAT_ODL,VATKOSZT,OP,RVAT,C_PREWSK,C_PROC_S,OKR_Z,OKR_C,SP_WYM,NETTO_W,VAT_W,BRUTTO_W,KNAG'
      )
   || ''
   ?}
|| ''
?}

:Sign Version 2.0 jowisz:1045 2022/06/30 14:23:10 cdd270d29355f44430d56ee22fa9ddf7318bf1aa887b64d40e0f6437ad1986fdef7cbcf05b8843bc9c4c75405a02b491d40cd5a06120a036d4a86e32a97c24d32abe20766faddae3067ecbdfa544e9b6e8216df33b23211193991f5cd410e0024e3f9036439b9a7cba7dd124f9cdede8dcf9cef062a6a7b999e3302d2a642462
