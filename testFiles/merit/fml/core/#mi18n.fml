:!UTF-8
::(c) Macrologic S.A. Wszelkie prawa zastrzezone
::======================================================================================================================
::Nazwa pliku: #mi18n.fml
::Utworzony: 2017/04/25
::Autor: TMR
::Systemy: Merit
::======================================================================================================================
::Zawartosc: Funkcje wykorzystywane do obslugi tłumaczeń
::======================================================================================================================

\declare
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.42]
:: OPIS: Funkcja deklarująca obiekt do obsługi tłumaczeń
::   WE:
::   WY: instancja obiektu
::----------------------------------------------------------------------------------------------------------------------
::UWAGA: _fld, i _mth to formułki pomocnicze, żeby wygodniej tworzyć tablice i komentować poszczególne jej elementy
_fld:="31+form(_a)";
_mth:="31+form(_a)";
::tworze tablice nazwana do przechowywania zmiennych
_mi18n:=obj_new(
                _fld('Tab'          ,'tabela z przetłumaczonymi tekstami')

::             metody <PRYWATNE>
               ,_mth('init'         ,'inicjuje obiekt')
               ,_mth('initTab'      ,'inicjuje tabelę z danymi')

::             metody <PUBLICZNE>
               ,_mth('add'          ,'dodaje text do odpowiedniego klucza')
             );
::usuwamy zbedne zmienne
&_mth; &_fld;

:: metody <PRYWATNE> ---------------------------------------------------------------------------------------------------
_mi18n.init:="
   .initTab()
";

_mi18n.initTab:="
   {? var_pres('Tab',.)>100 || obj_del(.Tab) ?};
   .Tab:=tab_tmp(,
      'KEY','STRING[100]','',
      'VAL','STRING[255]',''
   )
";

:: metody <PUBLICZNE> --------------------------------------------------------------------------------------------------
_mi18n.add:="
   _this:=(.);
   _key:={? var_pres('_a')=2 || _a || return(_this) ?};
   _val:={? var_pres('_b')=2 || _b || return(_this) ?};
   .Tab.KEY:=_key;
   .Tab.VAL:=_val;
   .Tab.add();
   _this
";

_mi18n.init();
_mi18n

:Sign Version 2.0 jowisz:1028 2019/06/07 15:58:47 90eb506b8875ac1badd2d9471778b4f9a0bcd9369f7d1d1c674b25e9aab8cf1da65bfa610ba72528a1aa359cd170dc5f6c2d714ec2862ebef28a94add91ad21010372c9eab66701b19ddb92c8b8a9c27b9ccd3f5243b5d9b93c0a578e326507c7ad4a32c297e2d6ec9bed8be375909f4153c7d6596a3afb00319c47cb9af280e
