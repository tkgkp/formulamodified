:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: #bulk.fml [17.00]
:: Utworzony: 08.12.2015
:: Autor: jaws
::======================================================================================================================
:: Zawartość: Formuły do obsługi operacji "hurtowych".
::======================================================================================================================


\get
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.00]
:: OPIS: Sprawdza, czy istnieje informacja o operacji hurtowej.
::   WE: _a [TABLE] - alias do tabeli
::       _b [STRING] - rodzaj operacji
::       _c [STRING] - wartość kluczowa
::   WY: 0 - nie znaleziono zapisu
::       1 - odszukano informację, pozycja ustalona na znalezionym zapisie
::----------------------------------------------------------------------------------------------------------------------
BULK.clear();
BULK.index('UNIQUE');
BULK.find_key(2-!_a,_b,_c,)


\add
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.00]
:: OPIS: Tworzy informację o operacji "hurtowej".
::   WE: _a [TABLE] - alias tabeli
::       _b [STRING] - rodzaj operacji
::       _c [STRING] - wartość kluczowa
::   WY: 1 - jeśli rekord już istnieje
::       1 - udało się zapisać daną
::       0 - wystąpił błąd zapisu
::----------------------------------------------------------------------------------------------------------------------
{? ~exec('get','#bulk',_a,_b,_c)
|| BULK.blank(1);
   BULK.TABELA:=2-!_a;
   BULK.OPERACJA:=_b;
   BULK.WARTOSC:=_c;
   BULK.add()
|| 1
?}


\del
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.00]
:: OPIS: Usuwa informację o operacji "hurtowej".
::   WE: _a [TABLE] - alias tabeli
::       _b [STRING] - rodzaj operacji
::       _c [STRING] - wartość kluczowa
::   WY: 1 - jeśli rekord nie istnieje
::       1 - udało się usunąć daną
::       0 - usunięcie informacji nie powiodło się
::----------------------------------------------------------------------------------------------------------------------
{? exec('get','#bulk',_a,_b,_c)
|| BULK.del(1,1)
|| 1
?}


\del_ref
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.00]
:: OPIS: Usuwa informację o operacji "hurtowej".
::   WE: _a [_BULK] - wskazanie rekordu
::   WY: 1 - jeśli rekord nie istnieje
::       1 - udało się usunąć daną
::       0 - usunięcie informacji nie powiodło się
::----------------------------------------------------------------------------------------------------------------------
BULK.clear();
{? BULK.seek(_a)
|| BULK.del(,1)
|| 1
?}

:Sign Version 2.0 jowisz:1028 2019/06/07 15:58:45 19f3724e1c1f50848edcdaf32c320f8532f9c514c2aa79bef2c3c1b4ad5fee3c78101961f2494fe0710c3c8c4181dac739fe356b1d3f804c2372889efb05b0f4c75ba758b0b38640b334c9ea9123062c306c512762de623bad70af7cba946299ceec07c93df5213b480c0e93d9aea45af075756a8cb83c2161be0dde935de382
