:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: #graphml.fml [17.00]
:: Utworzony: 09.06.2015
:: Autor: Mario
::======================================================================================================================
:: Zawartość: Uniwersalne formuły do obsługi diagramów, grafów yworks
::======================================================================================================================


\prolog
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: prolog pliku
::----------------------------------------------------------------------------------------------------------------------
_text:='<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="http://www.yworks.com/xml/graphml" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd">
  <!--Created by yFiles for Java 2.11.0.2-->
  <key for="port" id="d0" yfiles.type="portgraphics"/>
  <key for="port" id="d1" yfiles.type="portgeometry"/>
  <key for="port" id="d2" yfiles.type="portuserdata"/>
  <key for="node" id="d3" yfiles.type="nodegraphics"/>
  <key for="graphml" id="d4" yfiles.type="resources"/>
  <key for="edge" id="d5" yfiles.type="edgegraphics"/>
    <graph edgedefault="directed" id="G">';
_text


\epilog
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: epilog pliku
::----------------------------------------------------------------------------------------------------------------------
_text:='    </graph>
  <data key="d4">
    <y:Resources/>
  </data>
</graphml>';
_text


\event
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: tworzenie zapisu dotyczącego zdarzenia
::       _a - id np. n0::n0
::       _b - nazwa
::       _c - _typ:=B_EVENT.TYPE
::       _d - _category:=B_EVENT.CATEGORY
::       _e - _kind:=B_EVENT.KIND
::       [_f] - STRING - uidPrel
::       [_g] - STRING - kolory wypełnienia
::       [_h] - STRING - kolor linii
::----------------------------------------------------------------------------------------------------------------------
_name:=_b;
_name:=exec('string_clean','#xml',_name);

_border_color:='#27AE27';

_line_width:='2.0';
{? _c=exec('type_start','#b_event')
|| _line_width:='3.0'
?};
_event_charact:='EVENT_CHARACTERISTIC_START';
{? _c=exec('type_end','#b_event')
|| _border_color:='#B11F1F';
   _event_charact:='EVENT_CHARACTERISTIC_END'
|? _c=exec('type_intermed','#b_event') & _d=exec('category_throw','#b_event')
|| _border_color:='#DCBA00';
   _event_charact:='EVENT_CHARACTERISTIC_INTERMEDIATE_THROWING'
|? _c=exec('type_intermed','#b_event') & _d=exec('category_catch','#b_event')
|| _border_color:='#DCBA00';
   _event_charact:='EVENT_CHARACTERISTIC_INTERMEDIATE_CATCHING'
?};

_event_type:='EVENT_TYPE_PLAIN';
{? _e=exec('kind_message','#b_event')
|| _event_type:='EVENT_TYPE_MESSAGE'
|? _e=exec('kind_timer','#b_event')
|| _event_type:='EVENT_TYPE_TIMER'
|? _e=exec('kind_signal','#b_event')
|| _event_type:='EVENT_TYPE_SIGNAL'
|? _e=exec('kind_condition','#b_event')
|| _event_type:='EVENT_TYPE_CONDITIONAL'
?};

_uid_prel:='';
{? var_pres('_f')=type_of('')
|| _uid_prel:=_f
?};
_fill:='';
{? var_pres('_g')=type_of('')
|| _fill:=_g
|| _fill:=exec('property_fill','#graphml')
?};
_line:='';
{? var_pres('_h')=type_of('')
|| _line:=_h
|| _line:=exec('property_line','#graphml')
?};


_text:='
        <node id="'+_a+'">
          <data key="d3">
            <macrologic:EventRealizer xmlns:macrologic="org.mcl.czest.xdesk.core.desktopContent.BPMN.modeler.realizers" configuration="com.yworks.bpmn.Event.withShadow">
              <y:Geometry height="65.0" width="65.0" x="0.0" y="-87.70119047619048"/>
              '+_fill+'
              <y:BorderStyle color="'+_border_color+'" type="line" width="'+_line_width+'"/>
              <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" modelName="eight_pos" modelPosition="s" textColor="#000000" visible="true" width="190.0" x="-62.5" y="69.0">'+_name+'</y:NodeLabel>
              <y:StyleProperties>
                <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.line.color" value="#000000"/>
                <y:Property class="com.yworks.yfiles.bpmn.view.EventCharEnum" name="com.yworks.bpmn.characteristic" value="'+_event_charact+'"/>
                <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="'+_event_type+'"/>
              </y:StyleProperties>
              <macrologic:ProcessElement automat="N" loop="" refBele="" symbolBele="" symbolPrel="" taskType="brak" uidPrel="'+_uid_prel+'"/>
            </macrologic:EventRealizer>
          </data>
        </node>';
_text


\action
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: tworzenie zapisu dotyczącego akcji
::       _a - STRING - id np. n0::n0
::       _b - STRING - nazwa
::       _c - STRING - typ
::       _d - STRING - kolory wypełnienia
::       _e - STRING - kolor linii
::       _f - STRING - ikona
::       [_g] - STRING - uidPrel
::       [_h] - STRING - czy automatycznie
::       [_i] - STRING - czy w pętli
::----------------------------------------------------------------------------------------------------------------------
_name:=_b;
_name:=exec('string_clean','#xml',_name);

_task_type:='';
{? _c='M'
|| _task_type:='TASK_TYPE_ABSTRACT';
   {? _f<>''
   || _task_type:=_f
   ?}
|? _c='S'
|| _task_type:='TASK_TYPE_SERVICE'
|? _c='U'
|| _task_type:='TASK_TYPE_USER'
|? _c='E'
|| _task_type:='TASK_TYPE_SEND'
?};
_fill:='';
{? var_pres('_d')=type_of('')
|| _fill:=_d
|| _fill:=exec('property_fill','#graphml')
?};
_line:='';
{? var_pres('_e')=type_of('')
|| _line:=_e
|| _line:=exec('property_line','#graphml')
?};

_uid_prel:='';
{? var_pres('_g')=type_of('')
|| _uid_prel:=_g
?};

_automat:='N';
{? var_pres('_h')=type_of('')
|| _automat:=_h
?};
_loop:='';
{? var_pres('_i')=type_of('')
|| _loop:=_i
?};

_text:='
        <node id="'+_a+'">
          <data key="d3">
            <macrologic:ActivityRealizer xmlns:macrologic="org.mcl.czest.xdesk.core.desktopContent.BPMN.modeler.realizers" configuration="com.yworks.bpmn.Activity.withShadow">
              <y:Geometry height="68.701171875" width="120.0" x="157.5" y="-89.55177641369048"/>
              '+_fill+'
              '+_line+'
              <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" modelName="internal" modelPosition="c" textColor="#000000" visible="true" width="88.0" x="16.0" y="25.0">'+_name+'</y:NodeLabel>
              <y:StyleProperties>
                <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.line.color" value="#000000"/>
                <y:Property class="com.yworks.yfiles.bpmn.view.TaskTypeEnum" name="com.yworks.bpmn.taskType" value="'+_task_type+'"/>
                <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="ACTIVITY_TYPE"/>
              </y:StyleProperties>
              <macrologic:ProcessElement automat="'+_automat+'" loop="'+_loop+'" refBele="" symbolBele="" symbolPrel="" taskType="'+_task_type+'" uidPrel="'+_uid_prel+'"/>
            </macrologic:ActivityRealizer>
          </data>
        </node>';
_text


\gate
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: tworzenie zapisu dotyczącego bramy
::       _a - STRING - id np. n0::n0
::       _b - STRING - nazwa
::       _c - STRING - typ xor, or, and
::       _d - STRING - kolory wypełnienia
::       _e - STRING - kolor linii
::       [_f] - STRING - uidPrel
::----------------------------------------------------------------------------------------------------------------------
_name:=_b;
_name:=exec('string_clean','#xml',_name);

{? _c=exec('type_and','#b_gate')
|| _gate_type:='GATEWAY_TYPE_PARALLEL'
|? _c=exec('type_or','#b_gate')
|| _gate_type:='GATEWAY_TYPE_INCLUSIVE'
|? _c=exec('type_xor','#b_gate')
|| _gate_type:='GATEWAY_TYPE_DATA_BASED_EXCLUSIVE'
|? _c=exec('type_event','#b_gate')
|| _gate_type:='GATEWAY_TYPE_EVENT_BASED_EXCLUSIVE'
|? _c=exec('type_xor_event','#b_gate')
|| _gate_type:='GATEWAY_TYPE_EVENT_BASED_EXCLUSIVE_START_PROCESS'
|? _c=exec('type_and_event','#b_gate')
|| _gate_type:='GATEWAY_TYPE_EVENT_BASED_PARALELL'
|? _c=exec('type_complex','#b_gate')
|| _gate_type:='GATEWAY_TYPE_COMPLEX'
?};

_fill:='';
{? var_pres('_d')=type_of('')
|| _fill:=_d
|| _fill:=exec('property_fill','#graphml')
?};
_line:='';
{? var_pres('_e')=type_of('')
|| _line:=_e
|| _line:=exec('property_line','#graphml')
?};

_uid_prel:='';
{? var_pres('_f')=type_of('')
|| _uid_prel:=_f
?};

_text:='
        <node id="'+_a+'">
          <data key="d3">
           <macrologic:GatewayRealizer xmlns:macrologic="org.mcl.czest.xdesk.core.desktopContent.BPMN.modeler.realizers" configuration="com.yworks.bpmn.Gateway.withShadow">
             <y:Geometry height="100.0" width="100.0" x="404.0" y="271.0"/>
              '+_fill+'
              '+_line+'
             <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" modelName="eight_pos" modelPosition="s" textColor="#000000" visible="true" width="143.0" x="-21.5" y="104.0">'+_name+'</y:NodeLabel>
             <y:StyleProperties>
               <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="'+_gate_type+'"/>
               <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.line.color" value="#000000"/>
             </y:StyleProperties>
             <macrologic:ProcessElement automat="N" loop="" refBele="" symbolBele="" symbolPrel="" taskType="brak" uidPrel="'+_uid_prel+'"/>
           </macrologic:GatewayRealizer>
          </data>
        </node>';
_text


\edge
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: tworzenie zapisu dotyczącego połączenia elementów
::       _a - edge id
::       _b - from (node id)
::       _c - to (node id)
::       _d - name
::       [_e] - STRING - 'T'/['N'] - czy połączenie domyślne
::----------------------------------------------------------------------------------------------------------------------
_name:=_d;
_name:=exec('string_clean','#xml',_name);

_default:='N';
{? var_pres('_e')=type_of('')
|| _default:=_e
?};

_type:='CONNECTION_TYPE_SEQUENCE_FLOW';
{? _default='T'
|| _type:='CONNECTION_TYPE_DEFAULT_FLOW'
?};

_text:='
    <edge id="'+_a+'" source="'+_b+'" target="'+_c+'">
      <data key="d5">
        <macrologic:ConnectionRealizer xmlns:macrologic="org.mcl.czest.xdesk.core.desktopContent.BPMN.modeler.realizers" configuration="com.yworks.bpmn.Connection">
          <y:Path sx="0.0" sy="0.0" tx="-60.0" ty="-0.0"/>
          <y:LineStyle color="#808080" type="line" width="1.0"/>
          <y:Arrows source="none" target="delta"/>
          <y:EdgeLabel alignment="center" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="true" height="4.0" leftInset="10" rightInset="10" modelName="six_pos" modelPosition="shead" preferredPlacement="anywhere" ratio="0.5" textColor="#000000" visible="true" width="4.0" x="10.123779296875" y="-5.999999527704148">'+_name+'
            <y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="10" frozen="true" placement="anywhere" side="anywhere" sideReference="relative_to_edge_flow"/>
          </y:EdgeLabel>
          <y:StyleProperties>
            <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="'+_type+'"/>
          </y:StyleProperties>
        </macrologic:ConnectionRealizer>
      </data>
    </edge>';
_text


\edge_param
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: tworzenie zapisu dotyczącego przepływu parametrów
::       _a - edge id
::       _b - from (node id)
::       _c - to (node id)
::       _d - name
::----------------------------------------------------------------------------------------------------------------------
_name:=_d;
_name:=exec('string_clean','#xml',_name);

_text:='
    <edge id="'+_a+'" source="'+_b+'" target="'+_c+'">
      <data key="d5">
        <macrologic:ConnectionRealizer xmlns:macrologic="org.mcl.czest.xdesk.core.desktopContent.BPMN.modeler.realizers" configuration="com.yworks.bpmn.Connection">
          <y:Path sx="0.0" sy="0.0" tx="-60.0" ty="-0.0"/>
          <y:LineStyle color="#808080" type="dotted" width="2.0"/>
          <y:Arrows source="none" target="concave"/>
          <y:EdgeLabel alignment="center" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" modelName="custom" preferredPlacement="source" ratio="0.5" textColor="#000000" visible="false" width="121.357421875" x="0.0" y="-18.701173146565708">'+_name+'<y:LabelModel>
              <y:SmartEdgeLabelModel autoRotationEnabled="false" defaultAngle="0.0" defaultDistance="10.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartEdgeLabelModelParameter angle="6.283185307179586" distance="9.350585937499975" distanceToCenter="true" position="left" ratio="0.0" segment="-1"/>
            </y:ModelParameter>
            <y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="relative_to_edge_flow" angleRotationOnRightSide="co" distance="-1.0" placement="source" side="anywhere" sideReference="relative_to_edge_flow"/>
          </y:EdgeLabel>
          <y:StyleProperties>
            <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="CONNECTION_TYPE_DIRECTED_ASSOCIATION"/>
          </y:StyleProperties>
        </macrologic:ConnectionRealizer>
      </data>
    </edge>';
_text


\color
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: kolor dla podanej nazwy
::       _a - nazwa koloru
::----------------------------------------------------------------------------------------------------------------------
_color:=_a;
_wyn:='color="#FFFFFFE6" color2="#D4D4D4CC"';

{? _color='red'
|| _wyn:='color="#FF0000" color2="#FF9900"'
|? _color='blue'
|| _wyn:='color="#3366FF" color2="#00CCFF"'
|? _color='orange'
|| _wyn:='color="#FF6600" color2="#FFFF00"'
|? _color='lightcyan'
|| _wyn:='color="#33CCCC" color2="#00FFFF"'
|? _color='olive'
|| _wyn:='color="#99CC00" color2="#00FF00"'
|? _color='ivory'
|| _wyn:='color="#FFCC99" color2="#FFFF99"'
?};
_wyn


\property_fill
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Zwraca właściowość kolory wypełnienia elementów na diagramie
::   WE: [_a] - STRING - kolor pierwszy - domyślnie #FFFFFFE6
::       [_b] - STRING - kolor drugi - domyślnie pusty
::   WY: STRING
::  TAG: <PUBLICZNA>
::----------------------------------------------------------------------------------------------------------------------
_color1:='#FFFFFFE6';
{? var_pres('_a')=type_of('')
|| _color1:=_a
?};
_color2:='';
{? var_pres('_b')=type_of('')
|| _color2:=_b
?};

{? _color2=''
|| _result:='<y:Fill color="'+_color1+'" transparent="false"/>'
|| _result:='<y:Fill color="'+_color1+'" color2="'+_color2+'" transparent="false"/>'
?};
_result


\property_line
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Zwraca właściowość kolory linii elementów na diagramie
::   WE: [_a] - STRING - kolor - domyślnie '#3366ff'
::   WY: STRING
::  TAG: <PUBLICZNA>
::----------------------------------------------------------------------------------------------------------------------
_color:='#3366ff';
{? var_pres('_a')=type_of('')
|| {? _a<>''
   || _color:=_a
   ?}
?};
_result:='<y:BorderStyle color="'+_color+'" type="line" width="4.0"/>';
_result

:Sign Version 2.0 jowisz:1028 2019/06/07 15:58:47 17e282e5e6cda6f3eced76ecf3b6dcbb9e959091a56aaa4282ee0305e89f1e169676e1789a1b7486f47d77deefe4b3c70692808876483491df134a3b039b2ca5da369cfa7fc265dc39d4500436645a14a58ef50ef7f8b6cfdb4cd9720a0f20540884232489e8c25d4c1084a7e354290fc045ff9415ae69cd2e2ef44ec9a29ab6
