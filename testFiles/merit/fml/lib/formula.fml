:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: defin.fml [17.00]
:: Utworzony: 25.02.2015
:: Autor: [rr]
::======================================================================================================================
:: Zawartość: obsługa tabeli FORMULA
::======================================================================================================================


\blrodzfo
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [17.00]
:: OPIS: wartość początkowa pola FORMULA.RODZAJ
::  OLD: \blrodzfo/skid_for.fml
::----------------------------------------------------------------------------------------------------------------------
ZMIENNE.RODZAJ


\fl_rodz
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [17.00]
:: OPIS: ustawienie rodzaju formuły - przed redakcją
::   WE: _a - rodzaj formuły
::  OLD: \fl_rodz/skid_for.fml
::----------------------------------------------------------------------------------------------------------------------
ZMIENNE.RODZAJ:=_a


\chk_formula
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AMK [17.00]
:: OPIS: Formula na Rekord Po okna wertowania FORMULA
::----------------------------------------------------------------------------------------------------------------------
_zwrot:=__CHK.record(FORMULA,,'RODZAJ','SKROT','NAZWA','FORMULA');
{? _zwrot=''
|| {? __CHK.index(FORMULA,-menu_txt='popraw')<>'' || _zwrot:='SKROT' ?}
?};
_zwrot


\dodawaj
::----------------------------------------------------------------------------------------------------------------------
:: OPIS: Dodawanie uniwerslanych formul standardowych
::       Musza byc ustawione:
::        ZMIENNE.RODZAJ - rodzaj formuly
::        fskrot[i],fnazwa[i],ftresc[i] (wartosc i od 1 do _a)
::   WE: _a -  liczba formul do dodania
::  OLD: \dodawaj/skid_fsi.fml
::----------------------------------------------------------------------------------------------------------------------
FORMULA.cntx_psh();
FORMULA.index('FORMULA3');
FORMULA.prefix();
{! _i:=1.._a
|! FORMULA.blank();
   FORMULA.RODZAJ:=ZMIENNE.RODZAJ;
   FORMULA.SKROT:=f_skrot[_i];
   FORMULA.NAZWA:=f_nazwa[_i];
   FORMULA.FORMULA:=f_tresc[_i];
   _czy_add:={? ~FORMULA.find_rec() || FORMULA.add(1) ?};
   {? var_pres('ile_dod')>0 || ile_dod+=_czy_add ?}
!};
FORMULA.cntx_pop()

:Sign Version 2.0 jowisz:1028 2019/06/07 15:59:51 4ce49553fcb129cd914d8419045094605b2584a2c5d2eca051eadcc55245ffec6819af3fb261888925404169cd081119605e480f6acea776e2f9acf5dc13cb58c4d57895d954fd5c070a42720e7ba4818f3a37d4c4f36a4be73ac1aef87fce46f219dd36b4c7a507dce28ff7314cf75d449fc78f7c102e1048123699aa0aba7c
