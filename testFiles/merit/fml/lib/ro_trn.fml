:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: ro_trn.fml
:: Utworzony: 04.04.2018
:: Autor: jaws
:: Systemy: RODO
::======================================================================================================================
:: Zawartość: Formuły odpowiedzialne za uzupełnienie danych związanych z RODO.
::======================================================================================================================


\start
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [18.22]
:: OPIS: Główna formuła transferująca.
::   WE:
::   WY: ~~
::----------------------------------------------------------------------------------------------------------------------
{? ~exec('isvalid','ro_cfg')
|| FUN.info('Brak lub błędy w konfiguracji.'@);
   return()
?};
exec('init','rod');
_RODO:=obj_new(@.CLASS.RODO);
: uzupełnij typy żądań
exec('init_slo','ro_req',1);

exec('rp_osoba_zgody','ro_trn');

~~


\rp_osoba_zgody
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [18.22]
:: OPIS: Uzupełnia informacje o zgodach na przetwarzanie danych.
::   WE:
::   WY: ~~
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('RP_OSOBA')<>type_of(SYSLOG)
|| return()
?};

RP_OSOBA.cntx_psh();
RP_OSOBA.index('ZZ_DOK');
RP_OSOBA.prefix();
_loop:=RP_OSOBA.first();
{!
|? _loop
|! exec('zgoda','rodo',RP_OSOBA);
   _loop:=RP_OSOBA.next()
!};
RP_OSOBA.cntx_pop();
~~

:Sign Version 2.0 jowisz:1028 2019/06/07 16:00:01 ce2092d3a727f9ebbce00bc4cc80af8830cd3699f313c3cf68acd8849b2a61a58fe6900c3866f741c548f493a2b6352cd2f5e95109accd4e844a17e8d63d08873474e6cd88f2e3a43c40f46739004dd976d60c73f1b78dab85ed715712c0221ef3b13fe1bd18ae3913dcecbc5c1e2426c51b96f8ea64f5d44287f99ddb8bd2c2
