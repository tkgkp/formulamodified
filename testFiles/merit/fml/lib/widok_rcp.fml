:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzezone
::======================================================================================================================
:: Nazwa pliku : widok_rcp.fml [2014]
:: Utworzony   : 2014/05/29
:: Autor       : [pk] Piotr Kosowski
::======================================================================================================================
:: Zawartosc   : Definicje funkcji obslugi widoku danych o czasie przepracowanym
::======================================================================================================================


\info
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PK [12.41]
:: OPIS: Ustala wartość dla informacji w polu info.
::       Pierwsza informacja:
::          =   zgodność planu z godzinami przepracowanymi
::          +   przepracowano więcej niż plan
::          -   przepracowano mniej niż plan
::          *   brak rejestracji dla indeksu tablicy 1 nieokreślona
::       Druga informacja:
::          'N'  praca w nocy wg dni przepracowanych
::          '*'  brak informacji o pracy w nocy - nieokreślona
::       Trzecia informacja:
::          'N' Nieobecność
::          '#' Nieobecność z przebiegu zatrudnienia
::          'A' Nieobecność ad hoc
::          '*' brak nieobecności z przebiegu lub ad hoc - nieokreślona
::       Czwarta informacja:
::          'D' Delegacja
::          '*' brak delegacji - nieokreślona
::       Piąta informacja:
::          'S' Szkolenie
::          '*' brak szkolenia - nieokreślona
::       Szósta informacja:
::          'R' Dzień roboczy
::          'S' Dzień swiąteczny
::          'W' Dzień wolny
::          '*' brak - nieokreślona
::   WE: _a - numer dnia
::       _b - numer informacji
::       [_c] - wartość informacji dla numeru informacji
::   WY: napis
::       Jeżeli nie podano 3 argumentu wynikiem jest wartość informacji dla podanego numeru
::       Jeśli podano 3 argument zawartość dla pola R_SZYCH.INF?? gdzie wartość zostanie dopisana na odpowiednim miejscu
::  OLD: \info/rcp_view.fml
::----------------------------------------------------------------------------------------------------------------------
_fld:=(var_pres('_c')=type_of(''));
_fml:='R_SZYCH.INF'+(('0'+$_a)+2);

_nfo:=obj_new(6);
{! _ind:=1..6 |! _nfo[_ind]:=1+((_ind-1)-($_fml)()) !};
{! _ind:=1..6 |! {? _nfo[_ind]='' || _nfo[_ind]:='*' ?} !};

_val:='';
{? _fld
|| _nfo[_b]:=_c;
   {! _ind:=1..6 |! _val+=_nfo[_ind] !};
   ($(_fml+':=_a'))(_val)
|| _val:=_nfo[_b]
?};
_val

:Sign Version 2.0 jowisz:1028 2019/06/07 16:00:04 38539903ed3608f282dd5fa884dfb2dc21c2f850f716523dc8c06d9fcff81608a250d50b0fb2049c34e864c17c53cab6a3a683d06c13eb601178f340379feddef0fb99dcadb44b1dcdd45f5c64ca7466b8eb071b6d833783435f15bd1fd8315703b0e8bfee64c881812325c412706317df2ac91f931b73683cf19f6939a550d0
