:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku:  ml_spra.fml
:: Utworzony: 20.05.2011
:: Autor: WS
::======================================================================================================================
:: Zawartość: Formuly podmocnicze do sprawozdan - Finanse i ksiegowosc wersja budzetowa
::======================================================================================================================


\ref_cz
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WS [$1210]
:: OPIS: Wysukuje w podanym roku kodu czesci
::       wyszukuje wg aktualnych ustawien
::   WY: ref do ML_CZ (null jesli nie ma __Kodcz)
::  OLD: \ref_cz/ml_spra.fml
::----------------------------------------------------------------------------------------------------------------------
_wyn:=null;
{? var_press('__Kodcz')>0 & __Kodcz<>''
|| ML_CZ.index('CZSYMN');
   ML_CZ.prefix(SSTALE.AR,__Kodcz);
   {? ML_CZ.first & ML_CZ.SYM=__Kodcz
   || _wyn:=ML_CZ.ref()
   || FUN.info('Błędny kod części '+__Kodcz)
   ?}
?};
_wyn


\pocz_rok
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Pawelm [10.10]
:: OPIS: Zwraca date poczatku biezacego roku ksiegowego dla sprawozdan RBN,RBZ
::   WE: _a - nazwa roku
::  OLD: \pocz_rok/ml_spra.fml
::----------------------------------------------------------------------------------------------------------------------
_dpocz:=date(0,0,0);
_rok:={?_=0 || SSTALE.AR().NAZ || _a ?};
ROK_F.cntx_psh(); ROK_F.index('NAZWA'); ROK_F.prefix(REF.FIRMA,_rok,);
{? ROK_F.first() || _dpocz:=ROK_F.POCZ_ROK ?};
ROK_F.cntx_pop();
_dpocz

:Sign Version 2.0 jowisz:1028 2019/06/07 15:59:55 6b9ece80f718bda7669637e1b61c2d224be9ee07bc0e2c957021ca8066f402f990ae0933ac49e5052997e84d6e95e1fb6e6ccde273124e29852a67611844b50a37fdb90091f3113deb3120b64e147a5dd0ce8e4148c6013f631af47aaa695ca9a06d027921089f46925f5573249d85307f603bd76a53776ba269e639bfbc1c34
