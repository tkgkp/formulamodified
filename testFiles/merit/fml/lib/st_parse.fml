:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: st_parse.fml
:: Autor: WH
::======================================================================================================================
:: Zawartość: Formuły do parsowania plików .mstat
::======================================================================================================================
:: ???
::                                  <<< OSWN       "System operacyjny widziany przez systeminfo.exe"
::
:: Sesja [ST_SESJ2, ST_SEST2]:
:: - exec('O','st_parse')           <<< O          "Otwarcie pliku"
:: - exec('DISP','st_parse')        <<< DISP       "Informacje dotyczące sposobu wyświetlania"
:: - exec('LANG','st_parse')        <<< LANG
:: - exec('C','st_parse')           <<< C          "Zamknięcie pliku"
:: - exec('BF','st_parse')          <<< BF         "Formuła startowa"
:: - exec('S','st_parse')           <<< S          "Identyfikacja logiki"
:: - exec('SA','st_parse')          <<< SA         "Parametry serwera aplikacji"
:: -                                <<< OSU        "System operacyjny UNIX"
:: -                                <<< OSW        "System operacyjny Windows"
:: - exec('SAP1','st_parse')        <<< SAP1       "Wartość parametru app_par1 z sekcji aplikacji w pliku cluster.cfg"
:: - exec('SAP2','st_parse')        <<< SAP2       "Wartość parametru app_par2 z sekcji aplikacji w pliku cluster.cfg"
:: - exec('SAP3','st_parse')        <<< SAP3       "Wartość parametru app_par3 z sekcji aplikacji w pliku cluster.cfg"
:: - exec('SAP4','st_parse')        <<< SAP4       "Wartość parametru app_par4 z sekcji aplikacji w pliku cluster.cfg"
:: - exec('SAP5','st_parse')        <<< SAP5       "Wartość parametru app_par5 z sekcji aplikacji w pliku cluster.cfg"
::
:: Klient [ST_KHI]:
:: - exec('S','st_parse')           <<< S          "Identyfikacja logiki"
:: - exec('SA','st_parse')          <<< SA         "Parametry serwera aplikacji"
::
:: Aplikacja [ST_APL]:
:: - exec('S','st_parse')           <<< S          "Identyfikacja logiki"
::
:: Wersja [ST_WER]:
:: - exec('S','st_parse')           <<< S          "Identyfikacja logiki"
::
:: Użytkownik:
:: - exec('S','st_parse')           <<< S          "Identyfikacja logiki"
::
:: Objekt, Ścieżka, Log
:: - exec('MENU','st_parse')        <<< MENU       "Menu programu"
:: - exec('MENUE','st_parse')       <<< MENUE      "Wyjście z menu programu"
:: - exec('SW','st_parse')          <<< SW         "Wyświetlone okienko wertowania"
:: - exec('SWE','st_parse')         <<< SWE        "Wyjście z okienka wertowania"
:: - exec('EW','st_parse')          <<< EW         "Okienko redagowania"
:: - exec('EWE','st_parse')         <<< EWE        "Wyjście z okienka redagowania"
:: - exec('CW','st_parse')          <<< CW         "Okienko z kontrolką"
:: - exec('CWE','st_parse')         <<< CWE        "Wyjście z okienka z kontrolka"
:: - exec('DW','st_parse')          <<< DW         "Okienko define"
:: - exec('DWE','st_parse')         <<< DWE        "Wyjście z okienka define"
:: - exec('GW','st_parse')          <<< GW         "Wyświetlone okienko grupowe"
:: - exec('GWE','st_parse')         <<< GWE        "Wyjście z okienka grupowego"
:: - exec('IGW','st_parse')         <<< IGW        "Aktywacje okna w grupie"
:: - exec('MA','st_parse')          <<< MA         "Rozpoczęcie wykonania akcji menu"
:: - exec('MAE','st_parse')         <<< MAE        "Zakończenie wykonania akcji menu"
:: - exec('BA','st_parse')          <<< BA         "Rozpoczęcie wykonania akcji przycisku"
:: - exec('BAE','st_parse')         <<< BAE        "Zakończenie wykonania akcji przycisku"
:: - exec('FBA','st_parse')         <<< FBA        "Rozpoczęcie wykonania akcji przycisku przy polu"
:: - exec('FBAE','st_parse')        <<< FBAE       "Zakończenie wykonania akcji przycisku przy polu"
:: - exec('F3','st_parse')          <<< F3         "Formuła na F3"
:: - exec('F3E','st_parse')         <<< F3E        "Wyjście z formuły na F3"
:: - exec('REPORT','st_parse')      <<< REPORT     "Rozpoczęcie wykonania raportu"
:: - exec('REPORTE','st_parse')     <<< REPORTE    "Zakończenie wykonania raporu"
:: - exec('POPUP','st_parse')       <<< POPUP      "Wyświetlenie okienka popup"
:: - exec('POPUPE','st_parse')      <<< POPUPE     "Wyjście z okienka popup"
:: - exec('POPUPITEM','st_parse')   <<< POPUPITEM  "Rozpoczęcie wykonania akcji z okna popup"
:: - exec('POPUPITEME','st_parse')  <<< POPUPITEME "Zakończenie wykonania akcji z okna popup"


\O
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Otwarcie pliku.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('O','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_env.REG.ST_SEST2:=null();
_stack_empty:=type_of(_env.STACK)=type_of(~~);
_lp:=exec('FindAndGet','#table',ST_SRC,_env.ST_SRC,,"LP",0);
__ST_SESJ2_PUT:=1;
ST_SESJ2.index('PID');
ST_SESJ2.prefix(_uid_grp,_obj.Pid,);
{? ~ST_SESJ2.first()
||
   ST_SESJ2.blank();
   ST_SESJ2.UID_GRP:=_uid_grp;
   ST_SESJ2.PID:=_obj.Pid;
   ST_SESJ2.DATA_OD:=exec('str2date','#convert',_obj.Date);
   ST_SESJ2.CZAS_OD:=exec('str2time','#convert',_obj.Time);
   {? ST_SESJ2.add()
   ||
      __ST_SESJ2_PUT:=0
   ||
      _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
      _can_continue:=0
   ?}
?};
{? _can_continue>0
||
   ST_SEST2.index('ST_SESJ2');
   ST_SEST2.prefix(ST_SESJ2.ref(),_lp,_obj.DATE,_obj.TIME,_st_rodz);
   _put:=ST_SEST2.first();
   ST_SEST2.blank();
   ST_SEST2.LP:=_lp;
   ST_SEST2.ST_SESJ2:=ST_SESJ2.ref();
   ST_SEST2.ST_RODZ:=_st_rodz;
   ST_SEST2.DATA:=_obj.DATE;
   ST_SEST2.CZAS:=_obj.TIME;
   {? _put
   ||
      {? ~ST_SEST2.put()
      ||
         _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}

   |? ~ST_SEST2.add()
   ||
      _env.message('%1: %2 - ST.SESTA.add()'@[ _error, _kind]);
      _can_continue:=0
   ?}
?};
{? _can_continue>0
||
   {? ~_stack_empty || obj_del(_env.STACK); _env.STACK:=~~ ?};
   _env.REG.ST_SEST2:=ST_SEST2.ref()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\OSU
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: System operacyjny UNIX.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('OSU','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\OSW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: System operacyjny Windows.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('OSW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\OSWN
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: System operacyjny widziany przez systeminfo.exe
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('OSWN','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\C
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zamknięcie pliku.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('C','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_st_sesta:=_env.REG.ST_SEST2;
::_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_st_sesta,,"ST_SEST2.ST_SESJ2",null());
::_cli_ver:=exec('FindAndGet','#table',ST_SESJ2,_st_sesja,,"ST_SESJ2.C_RODZ",'');
_lp:=exec('FindAndGet','#table',ST_SRC,_env.ST_SRC,,"LP",0);
{? _st_sesta
||
   ST_SEST2.cntx_psh();
   ST_SEST2.prefix();
   {? ~ST_SEST2.seek(_st_sesta)
   ||
      _env.message('%1: %2 - nie znaleziono _env.REG.ST_SEST2'@[ _error, _kind]);
      _can_continue:=0

   || _cli_ver:=ST_SEST2.ST_SESJ2().C_RODZ;
      {? _cli_ver<>'cgi' & _cli_ver<>'mbasic'
      ||
         _fontname:=ST_SEST2.FONTNAME;
         _fontsize:=ST_SEST2.FONTSIZE;
         _fontdpi:=ST_SEST2.FONTDPI;
         _screnres:=ST_SEST2.SCRENRES;
         ST_SEST2.index('ST_SESJ2');
         ST_SEST2.prefix(ST_SESJ2.ref(),_lp,_obj.DATE,_obj.TIME,_st_rodz);
         _put:=ST_SEST2.first();
         ST_SEST2.LP:=_lp;
         ST_SEST2.ST_RODZ:=_st_rodz;
         ST_SEST2.DATA:=_obj.DATE;
         ST_SEST2.CZAS:=_obj.TIME;
         ST_SEST2.FONTNAME:=_fontname;
         ST_SEST2.FONTSIZE:=_fontsize;
         ST_SEST2.FONTDPI:=_fontdpi;
         ST_SEST2.SCRENRES:=_screnres;
         {? _put
         ||
            {? ~ST_SEST2.put()
            ||
               _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
               _can_continue:=0
            ?}

         |? ~ST_SEST2.add()
         ||
            _env.message('%1: %2 - ST.SESTA.add()'@[ _error, _rodz]);
            _can_continue:=0
         ?};
         {? _can_continue>0
         ||
            ST_SESJ2.cntx_psh();
            ST_SESJ2.prefix();
            ST_SEST2.ST_SESJ2();
            ST_SESJ2.DATA_DO:=exec('str2date','#convert',_obj.Date);
            ST_SESJ2.CZAS_DO:=exec('str2time','#convert',_obj.Time);
            {? ~ST_SESJ2.put()
            ||
               _env.message('%1: %2 - ST.SESJA.put()'@[ _error, _kind]);
               _can_continue:=0
            ||
               _env.REG.ST_SEST2:=null()
            ?};
            ST_SESJ2.cntx_pop()
         ?}
      ?}
   ?};
   ST_SEST2.cntx_pop()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\S
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Identyfikacja logiki.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('S','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_env.REG.ST_SEST2,,"ST_SEST2.ST_SESJ2",null());
:: Sprawdzenie zgody na przetwarzanie
:: _nrs - 6 ostatnich znaków numeru seryjnego, _zgoda - czy zgoda na przetwarzanie
::_nrs:=_obj.SerSerial+6;
_nrs:=exec('chmura_podmiana','st_kh',_obj.SerSerial);
_zgoda:=0;
:: Sprawdzenie czy w bazie istnieje kontrahent o podanym numerze
ST_KH.cntx_psh();
ST_KH.index('NRS');
ST_KH.prefix(_nrs,);
{? ST_KH.first()
||
:: Jest kontrahent o podanym numerze, sprawdzam czy jest zgoda na przetwarzanie
   _zgoda:={? ST_KH.ZGODA<>'N' || 1 || 0 ?}
||
:: Nie ma kontrahenta o podanym numerze więc dodaje nowego, takie przetwarzam zawsze
   ST_KH.clear();
   ST_KH.blank();
   ST_KH.NRS:=_nrs;
   ST_KH.ZGODA:='T';
   ST_KH.DT:=date();
   ST_KH.DANE:='brak';
   ST_KH.add();
   _zgoda:=1
?};
ST_KH.cntx_pop();

::_zgoda:=1;
:: Nie ma zgody na przetarzanie statystyk, przerywam dalsze parsowanie pliku
{? _zgoda=0
|| _env.message('%1: %2 - Brak zgody na przetwarzanie statystyk kontrahenta powiązanym z numerem seryjnym %3'@['Licencja', _kind,_nrs],,,'lic');
   return(0)
?};

:: klient
:: ST_KHI uzupełniane w \SA/st_parse.fml - titaj tylko zapamiętanie _env.OBJ_S
:: aplikacja
:: ST_APL uzupełniane w \SA/st_parse.fml - titaj tylko zapamiętanie _env.OBJ_S
{? var_pres('OBJ_S',_env)=type_of(obj_new('obj')) || obj_del(_env.OBJ_S) ?};
_env.OBJ_S:=_obj;
:: pulpit Xpertis
_env.XPULPIT:=_obj.DefName='xpertis' & -_obj.SubDefName='pulpit';
:: wersja
{? _can_continue>0
||
   _can_continue:=exec('wersja','st_wer',_env,_obj)
?};
:: użytkownik
{? _can_continue>0
||
   _env.REG.USER:=_obj.LoginHash
?};
:: sesja
{? _can_continue>0
||
   ST_SESJ2.cntx_psh();
   ST_SESJ2.prefix();
   {? ST_SESJ2.seek(_st_sesja)
   ||
      ST_SESJ2.USER:=_env.REG.USER;
      {? ~ST_SESJ2.put()
      ||
         _env.message('%1: %2 - ST_SESJ2.put()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
   ST_SESJ2.cntx_pop()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\SA
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Parametry serwera aplikacji.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SA','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_sep:=_env.TXT_SEP;
_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_env.REG.ST_SEST2,,"ST_SEST2.ST_SESJ2",null());
_obj_s:=_env.OBJ_S;
:: klient
{? _can_continue>0
||
   _as_addre:={? _obj.AsAddress='127.0.0.1' || 'localhost' || _obj.AsAddress ?};
   _id:=hash(_obj_s.SerSerial+_sep+_obj_s.SerVersion+_sep+_obj_s.AppSerial+_sep+_as_addre+_sep+_obj.AsPort+_sep);
   ST_KHI.index('ID');
   ST_KHI.prefix(_id,);
   {? ST_KHI.first()
   ||
      _env.REG.ST_KHI:=ST_KHI.ref()
   ||
      ST_KHI.blank();
      ST_KHI.ID:=_id;
      ST_KHI.SER_SN:=_obj_s.SerSerial;
      ST_KHI.RT_VER:=_obj_s.SerVersion;
      ST_KHI.APL_SN:=_obj_s.AppSerial;
      ST_KHI.AS_ADDRE:=_as_addre;
      ST_KHI.AS_PORT:=_obj.AsPort;
      ST_KHI.ANALIZA:='T';
      ST_KHI.STANDARD:='N';
      {? ST_KHI.ST_KH=null()
      ||
::       Przypisanie kontrahenta
         _kh:=null();
         ST_KH.cntx_psh();
         ST_KH.index('NRS');
::         ST_KH.prefix(_obj_s.SerSerial+6);
         ST_KH.prefix(exec('chmura_podmiana','st_kh',_obj_s.SerSerial));
         {? ST_KH.first()
         || _kh:=ST_KH.ref()
         ?};
         ST_KH.cntx_pop();
         ST_KHI.ST_KH:=_kh
      ?};
      {? ~ST_KHI.add()
      ||
         _env.message('%1: %2 - ST_KHI.add()'@[ _error, _kind]);
         _can_continue:=0
      ||
         _env.REG.ST_KHI:=ST_KHI.ref()
      ?}
   ?}
?};
:: aplikacja
{? _can_continue>0
|| _can_continue:=exec('aplikacja','st_apl',_env,_obj_s,_obj_s.DefName,_obj_s.SubDefName)
?};
:: sesja
{? _can_continue>0
||
   ST_SESJ2.cntx_psh();
   ST_SESJ2.prefix();
   {? ST_SESJ2.seek(_st_sesja)
   ||
      ST_SESJ2.ST_KHI:=_env.REG.ST_KHI;
      ST_SESJ2.ST_APL:=_env.REG.ST_APL;
      ST_SESJ2.AS_NAME:=_obj.AsName;
      ST_SESJ2.AS_GROUP:=_obj.AsGroup;
      {? ~ST_SESJ2.put()
      ||
         _env.message('%1: %2 - ST_SESJ2.put()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
   ST_SESJ2.cntx_pop()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\SAP1
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wartość parametru app_par1 z sekcji aplikacji w pliku cluster.cfg.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SAP1','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('sap','st_sesj2',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\SAP2
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wartość parametru app_par2 z sekcji aplikacji w pliku cluster.cfg.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SAP2','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('sap','st_sesj2',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\SAP3
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wartość parametru app_par3 z sekcji aplikacji w pliku cluster.cfg.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SAP3','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('sap','st_sesj2',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\SAP4
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wartość parametru app_par4 z sekcji aplikacji w pliku cluster.cfg.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SAP4','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('sap','st_sesj2',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\SAP5
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wartość parametru app_par5 z sekcji aplikacji w pliku cluster.cfg.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SAP5','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('sap','st_sesj2',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\BF
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Formuła startowa.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('BF','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_env.REG.ST_SEST2,,"ST_SEST2.ST_SESJ2",null());
{? var_pres('OBJ_BF',_env)=type_of(obj_new('obj')) || obj_del(_env.OBJ_BF) ?};
_env.OBJ_BF:=_obj;
:: sesja
{? _can_continue>0
||
   ST_SESJ2.cntx_psh();
   ST_SESJ2.prefix();
   {? ST_SESJ2.seek(_st_sesja)
   ||
      ST_SESJ2.OS:=_obj.SASysOper;
      ST_SESJ2.C_OS:=_obj.CliSysOper;
      ST_SESJ2.C_RODZ:=_obj.CliType;
      ST_SESJ2.FS:=_obj.StartForm;
      ST_SESJ2.FS_PARAM:=_obj.StartParams;
      ST_SESJ2.INIPARAM:=_obj.InitParam;
      ST_SESJ2.INIMENU:=_obj.InitActMenu;
      ST_SESJ2.INIMEPTH:=_obj.InitActMenuPth;
      {? ~ST_SESJ2.put()
      ||
         _env.message('%1: %2 - ST_SESJ2.put()'@[ _error, _kind]);
         _can_continue:=0
      ?};
      {? _obj.CliType='cgi' | _obj.CliType='mbasic'
      ||
         _env.REG.ST_SEST2:=null();
         _del:=0;
         _cgi_st_sesja:=null();
         _cgi_uid_grp:=$ST_SESJ2.ST_KHI;
         _cgi_pid:=_obj.CliType;
         _crc:=ST_SESJ2.crc('ST_KHI');
         ST_SESJ2.cntx_psh();
         ST_SESJ2.index('PID');
         ST_SESJ2.prefix(_cgi_uid_grp,_cgi_pid);
         _loop:=ST_SESJ2.first();
         {!
         |? _loop
         |!
            {? _crc=ST_SESJ2.crc('ST_KHI')
            ||
               _cgi_st_sesja:=ST_SESJ2.ref();
               _del:=1
            ?};
            _loop:=_del=0 & ST_SESJ2.next()
         !};
         ST_SESJ2.cntx_pop();
         {? _del
         ||
            {? __ST_SESJ2_PUT | exec('delete','st_sesj2',_st_sesja)=1
            ||
               ST_SEST2.cntx_psh();
               ST_SEST2.index('ST_SESJ2');
               ST_SEST2.prefix(_cgi_st_sesja);
               {? ST_SEST2.first() || _env.REG.ST_SEST2:=ST_SEST2.ref()  ?};
               ST_SEST2.cntx_pop()
            ?}
         ||
:: zmieniamy na zapis cgi lub mbasic
:: O
            ST_SESJ2.UID_GRP:=_cgi_uid_grp;
            ST_SESJ2.PID:=_cgi_pid;
:: zerujemy nieśledzone pola
:: O
            ST_SESJ2.DATA_OD:=date(0,0,0);
            ST_SESJ2.CZAS_OD:=time(0,0,0);
:: C
            ST_SESJ2.DATA_DO:=date(0,0,0);
            ST_SESJ2.CZAS_DO:=time(0,0,0);
:: S
            ST_SESJ2.USER:='';
:: SA
::            ST_SESJ2.ST_KHI:=null();
            ST_SESJ2.ST_APL:=null();
            ST_SESJ2.AS_NAME:='';
            ST_SESJ2.AS_GROUP:='';
:: BF
            ST_SESJ2.OS:='';
            ST_SESJ2.C_OS:='';
::            ST_SESJ2.C_RODZ:='';
            ST_SESJ2.FS:='';
            ST_SESJ2.FS_PARAM:='';
            ST_SESJ2.INIPARAM:='';
            ST_SESJ2.INIMENU:='';
            ST_SESJ2.INIMEPTH:='';
            {? __ST_SESJ2_PUT
            ||
               {? ST_SESJ2.add()
               ||
                  _st_sesja:=ST_SESJ2.ref()
               ||
                  _env.message('%1: %2 - ST_SESJ2.add()'@[ _error, _kind]);
                  _can_continue:=0
               ?}
            ||
               {? ~ST_SESJ2.put()
               ||
                  _env.message('%1: %2 - ST_SESJ2.put()'@[ _error, _kind]);
                  _can_continue:=0
               ?}
            ?};
            {? _can_continue>0
            ||
               ST_SEST2.cntx_psh();
               ST_SEST2.index('ST_SESJ2');
               ST_SEST2.prefix(_st_sesja);
               {? ~__ST_SESJ2_PUT
               ||
                  _loop:=ST_SEST2.first(); {! |? _loop |! _loop:=ST_SEST2.del() !}
               ?};
               ST_SEST2.blank();
               ST_SEST2.ST_SESJ2:=_st_sesja;
               {? ST_SEST2.add()
               ||
                  _env.REG.ST_SEST2:=ST_SEST2.ref()
               ?};
               ST_SEST2.cntx_pop()
            ?}
         ?};
         {? _env.REG.ST_SEST2=null()
         ||
            _env.message('%1: %2 - Nie powiodło się ustalenie sesji %3'@[ _error, _kind,_obj.CliType]);
            _can_continue:=0
         ?}
      ?}
   ?};
   ST_SESJ2.cntx_pop()
?};

:: pulpit Xpertis
{? _can_continue>0 & (_obj.InitParam='pulpit' | _env.XPULPIT)
||
   _obj_menu:=exec('MENU','st_parse_obj');
   _obj_menu.DATE:=_obj.DATE;
   _obj_menu.TIME:=_obj.TIME;
   _obj_menu.Acr:='pulpit';
   exec('MENU','st_parse',_env,_obj_menu,_uid_grp,_filename)
?};

{? _can_continue>0
|| _result:=1
?};
_result


\LANG
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: .
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('LANG','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_st_sesta:=_env.REG.ST_SEST2;
::_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_env.REG.ST_SEST2,,"ST_SEST2.ST_SESJ2",null());
::_cli_ver:=exec('FindAndGet','#table',ST_SESJ2,_st_sesja,,"ST_SESJ2.C_RODZ",'');
_lp:=exec('FindAndGet','#table',ST_SRC,_env.ST_SRC,,"LP",0);
{? _st_sesta=null()
||
   _env.message('%1: %2 - sesja nie jest otwarta'@[ _error, _kind]);
   _can_continue:=0
||
   ST_SEST2.cntx_psh();
   ST_SEST2.prefix();
   {? ~ST_SEST2.seek(_st_sesta)
   ||
      _env.message('%1: %2 - nie znaleziono _env.REG.ST_SEST2'@[ _error, _kind]);
      _can_continue:=0

   || _cli_ver:=ST_SEST2.ST_SESJ2().C_RODZ;
      {? _cli_ver<>'cgi' & _cli_ver<>'mbasic'
      ||
         _fontname:=ST_SEST2.FONTNAME;
         _fontsize:=ST_SEST2.FONTSIZE;
         _fontdpi:=ST_SEST2.FONTDPI;
         _screenres:=ST_SEST2.SCRENRES;

         ST_SEST2.index('ST_SESJ2');
         ST_SEST2.prefix(ST_SESJ2.ref(),_lp,_obj.DATE,_obj.TIME,_st_rodz);
         _put:=ST_SEST2.first();
         _st_sesja:=ST_SEST2.ST_SESJ2;
         ST_SEST2.blank();
         ST_SEST2.LP:=_lp;
         ST_SEST2.ST_SESJ2:=_st_sesja;
         ST_SEST2.ST_RODZ:=_st_rodz;
         ST_SEST2.DATA:=_obj.DATE;
         ST_SEST2.CZAS:=_obj.TIME;
         ST_SEST2.FONTNAME:=_fontname;
         ST_SEST2.FONTSIZE:=_fontsize;
         ST_SEST2.FONTDPI:=_fontdpi;
         ST_SEST2.SCRENRES:=_screenres;
         ST_SEST2.LANG_SYS:=_obj.SysLangId;
         ST_SEST2.LANG_APL:=_obj.AppLangId;
         {? _put
         ||
            {? ~ST_SEST2.put()
            ||
               _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
               _can_continue:=0
            ?}

         |? ~ST_SEST2.add()
         ||
            _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
            _can_continue:=0
         ?};
         {? _can_continue>0
         ||
            _env.REG.ST_SEST2:=ST_SEST2.ref()
         ?}
      ?}
   ?};
   ST_SEST2.cntx_pop()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\MENU
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Menu programu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MENU','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_type_obj:=type_of(obj_new('obj'));
{? var_pres('OBJ_S',_env)=_type_obj & var_pres('OBJ_BF',_env)=_type_obj
      &
   -_env.OBJ_S.SubDefName='alert' & _env.OBJ_BF.CliType='cgi'
||
   return(1)
?};

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   _obj1.acr:=_obj.Acr;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.blank();
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(M) %1'[_obj1.acr];
      ST_OBJ.ACR:=_obj1.acr;
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\MENUE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z menu programu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MENUE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_type_obj:=type_of(obj_new('obj'));
{? var_pres('OBJ_S',_env)=_type_obj & var_pres('OBJ_BF',_env)=_type_obj
      &
   -_env.OBJ_S.SubDefName='alert' & _env.OBJ_BF.CliType='cgi'
||
   return(1)
?};

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\SW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyświetlone okienko wertowania.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('st_obj_window','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\SWE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka wertowania.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('SWE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('SW');

{? _can_continue>0
|| _result:=1
?};
_result


\EW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Okienko redagowania.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('EW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;
_can_continue:=exec('st_obj_window','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\EWE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka redagowania.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('EWE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('EW');

{? _can_continue>0
|| _result:=1
?};
_result


\CW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Okienko z kontrolką.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('CW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('st_obj_window','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\CWE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka z kontrolka.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('CWE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('CW');

{? _can_continue>0
|| _result:=1
?};
_result


\DW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Okienko define.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('DW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\DWE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka define.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('DWE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('DW');

{? _can_continue>0
|| _result:=1
?};
_result


\GW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyświetlone okienko grupowe.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('GW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\GWE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka grupowego.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('GWE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_stack_empty:=type_of(_env.STACK)=type_of(~~);

:: zdejmujemy ze stosu IGW przed właściwym pop
{? ~_stack_empty & _env.STACK.OBJ.KIND='IGW'
||
   _env.pop('IGW')
?};

{? _can_continue>0
|| _result:=1
?};
_result


\IGW
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Aktywacje okna w grupie.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('IGW','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('st_obj_window','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\MA
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Rozpoczęcie wykonania akcji menu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MA','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   ST_OBJ.prefix();
   ST_OBJ.blank();
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   {? var_pres('STACK',_env)<>type_of(~~)
   ||
      ST_OBJ.seek(_env.STACK.ST_OBJ);
      _obj1.table:=ST_OBJ.TABLE;
      _obj1.acr:=ST_OBJ.ACR;
      _obj1.ident:=ST_OBJ.IDENT;
      _obj1.title:=ST_OBJ.TITLE
   ?};
   _obj1.a_title:=_obj.Title;
   _a_wyroznik:=_obj.Pth+1;
   _obj1.a_wyr:=_a_wyroznik;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(A) %1'[_obj1.a_title];
      ST_OBJ.A_TITLE:=_obj1.a_title;
      ST_OBJ.A_WYR:=_obj1.a_wyr;
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\MAE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji menu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MAE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('MA');

{? _can_continue>0
|| _result:=1
?};
_result


\BA
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Rozpoczęcie wykonania akcji przycisku.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('BA','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   ST_OBJ.prefix();
   ST_OBJ.blank();
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   {? var_pres('STACK',_env)<>type_of(~~)
   ||
      ST_OBJ.seek(_env.STACK.ST_OBJ);
      _obj1.table:=ST_OBJ.TABLE;
      _obj1.acr:=ST_OBJ.ACR;
      _obj1.ident:=ST_OBJ.IDENT;
:: _obj.Title='' - nie uwzglęniane w id
::   _obj1.title:='';
      _obj1.title:=ST_OBJ.TITLE
   ?};
   _obj1.b_title:=_obj.Title;
   _obj1.b_ident:=_obj.Ident;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(B) %1'[_obj1.b_title];
      ST_OBJ.B_TITLE:=_obj1.b_title;
      ST_OBJ.B_IDENT:=_obj1.b_ident;
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\BAE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji przycisku.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('BAE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('BA');

{? _can_continue>0
|| _result:=1
?};
_result


\FBA
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Rozpoczęcie wykonania akcji przycisku przy polu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('FBA','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   ST_OBJ.prefix();
   ST_OBJ.blank();
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   {? var_pres('STACK',_env)<>type_of(~~)
   ||
      ST_OBJ.seek(_env.STACK.ST_OBJ);
      _obj1.table:=ST_OBJ.TABLE;
      _obj1.acr:=ST_OBJ.ACR;
      _obj1.ident:=ST_OBJ.IDENT;
:: _obj.Title='' - nie uwzglęniane w id
::   _obj1.title:='';
      _obj1.title:=ST_OBJ.TITLE
   ?};
   _obj1.b_title:=_obj.Title;
   _obj1.b_ident:=_obj.Ident;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(FB) %1'[_obj1.b_title];
      ST_OBJ.B_TITLE:=_obj1.b_title;
      ST_OBJ.B_IDENT:=_obj1.b_ident;
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\FBAE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji przycisku przy polu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('FBAE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('FBA');

{? _can_continue>0
|| _result:=1
?};
_result


\F3
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Formuła na F3.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('F3','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.blank();
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(F3)';
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\F3E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z formuły na F3.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('F3E','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('F3');

{? _can_continue>0
|| _result:=1
?};
_result


\REPORT
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Rozpoczęcie wykonania raportu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('REPORT','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   _obj1.file:=_obj.File;
   _obj1.copy:=_obj.Copy;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.blank();
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(R) %1'[{? _obj.Title='' || _obj1.file || _obj.Title ?}];
      ST_OBJ.TITLE:=_obj.Title;
      ST_OBJ.R_FILE:=_obj1.file;
::      ST_OBJ.STANDARD:={? _obj1.file+6='.m.rpt' | 1+_obj1.file='q' || 'N' || 'T' ?};
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\REPORTE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania raporu.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('REPORTE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('REPORT');

{? _can_continue>0
|| _result:=1
?};
_result


\DISP
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Informacje dotyczące sposobu wyświetlania.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('DISP','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
_st_sesta:=_env.REG.ST_SEST2;
_st_sesja:=exec('FindAndGet','#table',ST_SEST2,_env.REG.ST_SEST2,,"ST_SEST2.ST_SESJ2",null());
_cli_ver:=exec('FindAndGet','#table',ST_SESJ2,_st_sesja,,"ST_SESJ2.C_RODZ",'');
_lp:=exec('FindAndGet','#table',ST_SRC,_env.ST_SRC,,"LP",0);
{? _st_sesta=null()
||
   _env.message('%1: %2 - sesja nie jest otwarta'@[ _error, _kind]);
   _can_continue:=0
||
   ST_SEST2.cntx_psh();
   ST_SEST2.prefix();
   {? ~ST_SEST2.seek(_st_sesta)
   ||
      _env.message('%1: %2 - nie znaleziono _env.REG.ST_SEST2'@[ _error, _kind]);
      _can_continue:=0

   |? _cli_ver<>'cgi' & _cli_ver<>'mbasic'
   ||
      ST_SEST2.index('ST_SESJ2');
      ST_SEST2.prefix(ST_SESJ2.ref(),_lp,_obj.DATE,_obj.TIME,_st_rodz);
      _put:=ST_SEST2.first();
      _st_sesja:=ST_SEST2.ST_SESJ2;
      ST_SEST2.blank();
      ST_SEST2.LP:=_lp;
      ST_SEST2.ST_SESJ2:=_st_sesja;
      ST_SEST2.ST_RODZ:=_st_rodz;
      ST_SEST2.DATA:=_obj.DATE;
      ST_SEST2.CZAS:=_obj.TIME;
      ST_SEST2.FONTNAME:=_obj.Name;
      ST_SEST2.FONTSIZE:=#_obj.Size;
      ST_SEST2.FONTDPI:=#_obj.Dpi;
      ST_SEST2.SCRENRES:=_obj.ScreenRes;
      {? _put
      ||
         {? ~ST_SEST2.put()
         ||
            _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
            _can_continue:=0
         ?}

      |? ~ST_SEST2.add()
      ||
         _env.message('%1: %2 - ST.SESJA.add()'@[ _error, _kind]);
         _can_continue:=0
      ?};
      {? _can_continue>0
      ||
         _env.REG.ST_SEST2:=ST_SEST2.ref()
      ?}
   ?};
   ST_SEST2.cntx_pop()
?};

{? _can_continue>0
|| _result:=1
?};
_result


\POPUP
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyświetlenie okienka popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUP','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename);

{? _can_continue>0
|| _result:=1
?};
_result


\POPUPE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Wyjście z okienka popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('POPUP');

{? _can_continue>0
|| _result:=1
?};
_result


\POPUPITEM
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Rozpoczęcie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEM','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;
{? _can_continue>0
||
:: objekt
   ST_OBJ.prefix();
   ST_OBJ.blank();
   _obj1:=exec('obj1','st_common');
   _obj1.kind:=_obj.KIND;
   {? var_pres('STACK',_env)<>type_of(~~)
   ||
      ST_OBJ.seek(_env.STACK.ST_OBJ);
      _obj1.table:=ST_OBJ.TABLE;
      _obj1.acr:=ST_OBJ.ACR;
      _obj1.ident:=ST_OBJ.IDENT;
      _obj1.title:=ST_OBJ.TITLE;
      _obj1.a_title:=ST_OBJ.A_TITLE;
      _obj1.a_wyr:=ST_OBJ.A_WYR;
      _obj1.b_title:=ST_OBJ.B_TITLE;
      _obj1.b_ident:=ST_OBJ.B_IDENT
   ?};
   _obj1.popupite:=_obj.Title;
   _id:=exec('st_obj_id','st_common',_env,_obj1);
   ST_OBJ.index('ID');
   ST_OBJ.prefix(_id,);
   {? ~ST_OBJ.first()
   ||
      ST_OBJ.ID:=_id;
      ST_OBJ.ST_RODZ:=_st_rodz;
      ST_OBJ.OPIS:='(I) %1'[_obj1.popupite];
      ST_OBJ.POPUPITE:=_obj1.popupite;
      ST_OBJ.STANDARD:='N';
      ST_OBJ.AUTO:='N';
      {? ~ST_OBJ.add()
      ||
         _env.message('%1: %2 - ST_OBJ.add()'@[ _error, _kind]);
         _can_continue:=0
      ?}
   ?};
:: log
   {? _can_continue>0
   ||
      _can_continue:=_env.log(_obj,ST_OBJ.ref(),_uid_grp)
   ?}
?};

{? _can_continue>0
|| _result:=1
?};
_result


\POPUPITEME
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEME','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('POPUPITEM');

{? _can_continue>0
|| _result:=1
?};
_result


\LIMITSIZE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Plik przekroczył dopuszczalny rozmiar.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('LIMITSIZE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

{? _can_continue>0
|| _result:=1
?};
_result


\A_DOMAIN
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEME','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_obj_s:=_env.OBJ_S;

:: aplikacja
{? _can_continue>0
||
   _can_continue:=exec('aplikacja','st_apl',_env,_obj,_obj_s.DefName,_obj.Symbol)
?};

{? _can_continue>0
|| _result:=1
?};
_result


\A_APPVERSION
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEME','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;

:: wersja
_can_continue:=exec('wersja','st_wer',_env,_obj);

{? _can_continue>0
|| _result:=1
?};
_result


\A_ACTION
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_ACTIONE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_title:=_obj.UID+' - '+_obj.Name;
_kind_o:='ACT';
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_ACTIONE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_ACTIONE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('A_ACTION');

{? _can_continue>0
|| _result:=1
?};
_result


\A_AUTO
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie wykonania akcji z okna popup.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('AUTO','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind:=_obj.KIND;
_st_rodz:=exec('FindInSet','#table','ST_RODZ','SYMBOL',_kind,,,1,,null());
_error:=_env.TXT_ERROR;
_warning:=_env.TXT_WARNING;

_env.REG.AUTO:=_obj.Auto;

{? _can_continue>0
|| _result:=1
?};
_result


\A_ALERT
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Uruchomienie zadania/zdarzenia biznesowego (alert)
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_ACTIONE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;
_title:=_obj.KOD+' '+_obj.OPIS;
_kind_o:=_obj.KIND_AL;
{? _kind_o='ALERT_ZADANIE'
|| _obj.AUTO:=_env.REG.AUTO;
   _env.REG.AUTO:='T'
?};
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_ALERT_E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie zadania/zdarzenia biznesowego (alert)
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_ACTIONE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_kind_o:=_obj.KIND_AL;
{? _kind_o='ALERT_ZADANIE'
|| _env.REG.AUTO:=_env.STACK.OBJ.AUTO
?};
_env.pop('A_ALERT');

{? _can_continue>0
|| _result:=1
?};
_result


\MWAPI
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Uruchomienie zdarzenia biznesowego (alert)
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MWAPI','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_title:='[%1] %2 [%3]'@[_obj.Version,_obj.Service,_obj.Method];
_kind_o:='MWA';
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\MWAPIE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie zdarzenia biznesowego (alert)
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('MWAPIE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('MWAPI');

{? _can_continue>0
|| _result:=1
?};
_result


\A_EDI
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Uruchomienie EDI
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_EDI','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_obj.AUTO:=_env.REG.AUTO;
_env.REG.AUTO:='T';
_title:='%1 [%2]'[_obj.CODE,_obj.NAME];
_kind_o:=_obj.KIND_EDI;
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_EDIE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [20.42]
:: OPIS: Zakończenie EDI
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_EDIE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.REG.AUTO:=_env.STACK.OBJ.AUTO;

_env.pop('A_EDI');

{? _can_continue>0
|| _result:=1
?};
_result


\A_AUTOKSIE
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Uruchamianie automatów księgowych
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_AUTOKSIE','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_title:='%1, %2, %3'[_obj.NAME,_obj.DESC,_obj.FROM];
_kind_o:='AUTOKSIE';
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_AV
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Uruchamianie schematów VAT
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_AV','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_title:='%1, %2'[_obj.CODE,_obj.DESC];
_kind_o:='AV';
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_FOR_AKC
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Uruchamianie formuł kontrolnych dla rejestrów.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_FOR_AKC','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_title:='%1'[_obj.NAME];
_kind_o:='FOR_AKC';
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_AUTOKSIE_E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Zakończenie automatów księgowych
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_AUTOKSIE_E','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('A_AUTOKSIE');

{? _can_continue>0
|| _result:=1
?};
_result


\A_AV_E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Zakończenie schematów VAT
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_AV_E','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('A_AV');

{? _can_continue>0
|| _result:=1
?};
_result


\A_FOR_AKC_E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: JK [20.42]
:: OPIS: Zakończenie formuł kontrolnych dla rejestrów.
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_FOR_AKC_E','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.pop('A_FOR_AKC');

{? _can_continue>0
|| _result:=1
?};
_result


\A_OP_MOBIL
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: Uruchomienie OP_MOBIL
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_OP_MOBIL','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_obj.AUTO:=_env.REG.AUTO;
_env.REG.AUTO:='T';
_title:='%1 [%2]'[_obj.CODE,_obj.NAME];
_kind_o:=_obj.KIND_OP_MOBIL;
_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,_kind_o);

{? _can_continue>0
|| _result:=1
?};
_result


\A_OP_MOBIL_E
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: Zakończenie OP_MOBIL
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('A_OP_MOBIL_E','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_env.REG.AUTO:=_env.STACK.OBJ.AUTO;

_env.pop('A_OP_MOBIL');

{? _can_continue>0
|| _result:=1
?};
_result


\A_GENIUS
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [22.26]
:: OPIS: Użycie asystenta
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEME','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_obj_s:=_env.OBJ_S;
_title:=_obj.Intention;

_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,'A_GENIUS');

_env.pop('A_GENIUS');

{? _can_continue>0
|| _result:=1
?};
_result


\A_BI
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [23.25]
:: OPIS: Użycie asystenta
::   WE: _a - obj_new() - środowisko parsera, wynik działania exec('env_parse','st_common')
::       _b - obj_new() - obiekt zawierający treść wiersza, wynik działania exec('POPUPITEME','st_parse_obj')
::       _c - STRING - identyfikator grupujący (ST_SRC.UID_GRP)
::       _d - STRING - nazwa pliku
::   WY: 0 - porażka, przerywa transakcję i oznacza że plik został błędnie sparsowany
::       1 - sukces
::----------------------------------------------------------------------------------------------------------------------
_env:=_a;
_obj:=_b;
_uid_grp:=_c;
_filename:=_d;

_result:=0;
_can_continue:=1;

_obj_s:=_env.OBJ_S;
_title:=_obj.Name;

_can_continue:=exec('st_obj_title','st_common',_env,_obj,_uid_grp,_filename,_title,'A_BI');

_env.pop('A_BI');

{? _can_continue>0
|| _result:=1
?};
_result

:Sign Version 2.0 jowisz:1048 2023/06/23 14:14:39 1efbe8246b8deb63b06e6038afb7a145aed904e151d20efba8888bb70f20acb3784d5454340b14442fa09d53abb7213d7f2711363ac4bccf026f81d01468333d740556edd67ae2379a01d5ed29415ae5440e1d2935fc7ce48b6a372966f10d3f2102c78af0db2ff6cd3ed2acf531c4465731e20e55a190fe885fbdf739be7e49
