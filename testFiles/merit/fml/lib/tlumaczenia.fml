:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: tlumaczenia.fml
:: Utworzony: 18.02.2015
:: Autor: AWI
::======================================================================================================================
:: Zawartość: Obsługa tłumaczeń
::======================================================================================================================


\tran_slo
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: formula wyswietlajaca slownik grup translacji przypisanych do systemu
::  OLD: \tran_slo/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------

{? XINFO.SLJEZYK<>null
||
   VAR_DEL.delete('__typokn');
   __typokn:=1;
   {!
   |?
      exec('tran_okno','tlumaczenia',__typokn);
      TRANS_GR.index('KOD');
      TRANS_GR.clear();
      TRANS_GR.select(,1,-1)
   !};
   VAR_DEL.delete('__typokn','__win_a1')
||
   FUN.info('Nie zdefiniowano "słownika języków" w parametrach pracy systemu.\nFunkcja nieaktywna.'@)
?};
''


\tran_okno
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: formula przygotowujaca okna dla grup translacji przypisanych do systemu
::   WE: _a - rodzaj okna (1 - wg tlumaczen, 2 - wg jezykow)
::  OLD: \tran_okno/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------

:: okno grup tlumaczen
__win_sel:=TRANS_GR.mk_sel('Tłumaczenia tekstów'@,,0,'wiasdflcsofrjfi',,,,,'U','T');
TRANS_GR.win_fld(__win_sel,,'KOD',,,20);
TRANS_GR.win_fld(__win_sel,,'NAZ',,,102);
TRANS_GR.win_act(__win_sel,,'Rekord',,,,"TRANS_GR.KOD;''");
{? _a=2
|| TRANS_GR.win_act(__win_sel,,'Formuła','Widok według tłumaczeń'@@,,,"sel_exit;__typokn:=1");
   TRANS_GR.win_act(__win_sel,1,'Formuła','Widok według tłumaczeń'@@,,,"sel_exit;__typokn:=1")
|? _a=1
|| TRANS_GR.win_act(__win_sel,,'Formuła','Widok według języków'@@,,,"sel_exit;__typokn:=2");
   TRANS_GR.win_act(__win_sel,1,'Formuła','Widok według języków'@@,,,"sel_exit;__typokn:=2")
?};
:: okno slownikow tlumaczen
__win_a1:=TRANS_PL.mk_sel('Słownik tekstów tłumaczeń'@,'P',,'#wksifnalofspwa',,,,,'U','T');
TRANS_PL.win_sel(__win_a1);
TRANS_PL.win_fld(__win_a1,,'KOD',,,16,,,'Kod'@);
TRANS_PL.win_fld(__win_a1,,'ORG',,,40,,,'Tekst'@);
TRANS_PL.win_act(__win_a1,,'Szukaj',,,'Szukanie zapisu zgodnego ze zredagowanym wzorcem'@);

:: okienko grupowe
{? _a=1
|| TRANSLAT.win_sel('WER');
   _sel:=TRANS_GR.grp_make('Definicje tłumaczeń'@,"
      TRANS_PL.index('GR');
      TRANSLAT.index('GR');
      {? TRANS_GR.size
      || TRANS_PL.prefix(TRANS_GR.ref());
         {? TRANS_PL.first || TRANSLAT.prefix(TRANS_PL.ref) || TRANSLAT.prefix(null) ?}
      || TRANS_PL.prefix(null);TRANSLAT.prefix(null)
      ?};
      grp_disp(TRANS_PL,__win_a1);grp_disp(TRANSLAT,'WER')",'osyazlfowadnxtp');
   TRANS_GR.grp_sel(_sel,, __win_sel,,"
      TRANS_PL.index('GR');TRANS_PL.prefix(TRANS_GR.ref());
      TRANSLAT.index('GR');
      {? {? ~TRANS_PL.get() || TRANS_PL.first() || 1 ?} || TRANSLAT.prefix(TRANS_PL.ref) || TRANSLAT.prefix(null) ?};
      grp_disp(TRANS_PL,__win_a1);
      grp_disp(TRANSLAT,'WER')",0,0,6,,,,,'maximized');

   TRANS_GR.grp_splt(_sel,,'horizontal','transl1','0,35%');

   _fb:="
      _result:='';
      {? grp_empty(TRANS_GR,__win_sel)
      || _result:='#disable'
      ?};
      _result
   ";
   TRANS_GR.grp_sel(_sel, TRANS_PL, __win_a1,,"
      _jest:={? TRANS_PL.f_active() || TRANS_PL.f_get() || TRANS_PL.get() ?};
      TRANSLAT.index('GR');
      {? _jest
      || TRANSLAT.prefix(TRANS_PL.ref);
         TRANSLAT.actions('WER','',,1)
      || TRANSLAT.prefix(null());
         TRANSLAT.actions('WER',':Dd',,1)
      ?};
      grp_disp(TRANSLAT,'WER')
   ",,,,_fb,,,,'maximized_with_title');

   TRANS_GR.grp_splt(_sel,'transl1','vertical','transl2');
   _fb:="
      _result:='';
      {? grp_empty(TRANS_PL,__win_a1)
      || _result:='#disable'
      ?};
      _result
   ";
   TRANS_GR.grp_sel(_sel, TRANSLAT,'WER',,,,,,_fb,,,,'maximized_with_title')


|? _a=2
||
   TRANSLAT.win_sel('WER2');
   _sel:=TRANS_GR.grp_make('Definicje tłumaczeń'@,"
      TRANS_PL.index('GR');
      {? TRANS_GR.size & XINFO.SLJEZYK<>null
      || SLO.index('SL');
         SLO.prefix(XINFO.SLJEZYK);
         {? SLO.first || SLO.prefix(XINFO.SLJEZYK) || TRANSLAT.prefix(null) ?}
      || SLO.index('SL');SLO.prefix(null)
      ?};
      grp_disp(SLO,__win_sl);
      TRANSLAT.index('GRJ');TRANSLAT.prefix(SLO.ref,TRANS_GR.ref());
      grp_disp(TRANSLAT,'WER2')",'saftnslaxtisgla');

   __win_sl:=SLO.mk_sel('Języki'@,,0,'loftyraxpftswer',,,,,'U');
   SLO.win_sel(__win_sl);
   SLO.win_fld(__win_sl,,'KOD',,,6,,,'Kod'@);
   SLO.win_fld(__win_sl,,'TR',,,12,,,'Nazwa'@);

   TRANS_GR.grp_sel(_sel,, __win_sel,,"
      TRANSLAT.index('GRJ');
      {? SLO.get() || TRANSLAT.prefix(SLO.ref,TRANS_GR.ref()) || TRANSLAT.prefix(null)?};
      grp_disp(TRANSLAT,'WER2');grp_disp(SLO,__win_sl)",0,0,6,,,,,'maximized');

   TRANS_GR.grp_splt(_sel,,'horizontal','transl1');

   _fb:="
      _result:='';
      {? grp_empty(TRANS_GR,__win_sel)
      || _result:='#disable'
      ?};
      _result
   ";
   TRANS_GR.grp_sel(_sel, SLO, __win_sl,,"
      TRANSLAT.index('GRJ');TRANSLAT.prefix(SLO.ref,TRANS_GR.ref());grp_disp(TRANSLAT,'WER2')"
      ,,,,_fb,,,,'maximized_with_title');

   TRANS_GR.grp_splt(_sel,'transl1','vertical','transl2');
   _fb:="
      _result:='';
      {? grp_empty(SLO,__win_sl)
      || _result:='#disable'
      ?};
      _result
   ";
   TRANS_GR.grp_sel(_sel, TRANSLAT,'WER2',,,,,,_fb,,,,'maximized_with_title')
?};
TRANS_GR.win_sel(_sel);
''


\be_tl_jezyk
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: formula przed redakcja jezyka w tabeli tlumaczen
::  OLD: \be_tl_jezyk/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
XINFO.SLJEZYK<>null


\wz_tl_jezyk
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: ustalenie slownika jezykow
::  OLD: \wz_tl_jezyk/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? XINFO.SLJEZYK<>null
|| SLO.win_edit('RED');
   XINFO.SLJEZYK()
|| FUN.info('Nie ustalono słownika języków w parametrach pracy programu.'@)
?};
''


\kh_jezyk
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [12.41]
:: OPIS: Zwraca język dla kontrahenta _a z domyślnych parametrów wydruku lub domyslny jezyk kontrahenta.
::       Jeśli język brany jest z domyślnych parametrów wydruku należy je ustawić przed wywołaniem funkcji.
::   WE: _a - KH.ref()
::       _b - 0/1 Edokument
::   WY: SLO.ref()
::  OLD: \kh_jezyk/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_b:={? var_pres('_b')=type_of(0) || _b || 0 ?};
_jezyk:=null();
:: parametry wydruku kontrahenta
{? _b & WYDRUKIL.DP_KH=_a || _jezyk:=WYDRUKIL.JEZYK ?};
:: domyślny kontrahenta
{? _jezyk=null() || _jezyk:=exec('FindAndGet','#table',KH,$_a,,"KH.JEZYK",null()) ?};
_jezyk


\tr
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula pobiera kod tlumaczenia lub oryginal w przypadku braku zwraca ciag pusty
::       Przed wywolaniem ustawiona zmienna PARAM_W.JEZYK
::   WE:  _a  - Kod do wyszukania
::       [_b] - czy zwracac opis ze slownika tlumaczen (T/N domyslnie T)
::   WY: Tlumaczenie
::  OLD: \tr/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? _>=2 || {? type_of(_b)<>2 || _b:='T' ?} || _b:='T' ?};
_wynik:='';

{? _a<>''
||
   {? PARAM_W.JEZYK<>null
   ||
      TRANSLAT.index('KOD');
      TRANSLAT.prefix(0,0,0,0,'',PARAM_W.JEZYK,_a,);
      {? TRANSLAT.first() || _wynik:=TRANSLAT.T ?}
   ||
      TRANSLAT.index('KOD');
      TRANSLAT.prefix(0,0,0,0,'',0,_a);
      {? TRANSLAT.first
      ||
         _wynik:=TRANSLAT.T
      ||
         {? _b='T'
         ||
            TRANS_PL.index('KOD');
            TRANS_PL.prefix(_a,);
            {? TRANS_PL.first() || _wynik:=TRANS_PL.ORG ?}
         ?}
      ?}
   ?}
?};
_wynik


\trans_m
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula wyznacza tlumaczenie pozycji M
::   WE: _a - M.ref  _b - KRAJE.ref
::   WY: wynik tlumaczenia
::  OLD: \trans_m/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('_a')<>type_of(null) || _a:=null ?};

{? _a=null || return('') ?};

_tlumacz:='';
TRANSLAT.index('M');
TRANSLAT.prefix(_a,_b);
{? TRANSLAT.first()
|| _tlumacz:=TRANSLAT.T
?};
_tlumacz


\trans_jm
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyznacza tlumaczenie pozycji JM
::   WE: _a - JM.ref  _b - KRAJE.ref
::   WY: wynik tlumaczenia
::  OLD: \trans_jm/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('_a')<>type_of(null) || _a:=null ?};

{? _a=null || return('') ?};

_tlumacz:='';
TRANSLAT.index('JM');
TRANSLAT.prefix(_a,_b);
{? TRANSLAT.first()
|| _tlumacz:=TRANSLAT.T
?};
_tlumacz


\trans_typysp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyznacza tlumaczenie pozycji TYPYSP
::   WE: _a - TYPYSP.ref  _b - KRAJE.ref
::   WY: wynik tlumaczenia
::  OLD: \trans_typysp/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('_a')<>type_of(null) || _a:=null ?};

{? _a=null || return('') ?};

_tlumacz:='';
TRANSLAT.index('TYPYSP');
TRANSLAT.prefix(_a,_b);
{? TRANSLAT.first()
|| _tlumacz:=TRANSLAT.T
|| TRANSLAT.prefix(_a,0);
   {? TRANSLAT.first()
   || _tlumacz:=TRANSLAT.T
   || {? FAKS.T().KOR='N'
      ||
         {? FAKS.SZ='S'
         ||
            _mk:=exec('tr','tlumaczenia','1000160');
            _tyt:=exec('kod_aktualny','tlumaczenia','1000101');
            _tlumacz:=exec('tr','tlumaczenia',_tyt)+exec('get','#params',100225,3)()+_mk
         ||
            _tlumacz:=
               {? FAKS.T().UE='T'
               || _tyt:=exec('kod_aktualny','tlumaczenia','1000194');
                  exec('tr','tlumaczenia',_tyt)
               || {? WYDRUKIL.WYDRUK='zak_rr'
                  || exec('tr','tlumaczenia','1000196')
                  || {? __wydrfa.samof
                     || _tyt:=exec('kod_aktualny','tlumaczenia','1000101');
                        exec('tr','tlumaczenia',_tyt)+' '+exec('tr','tlumaczenia','1000161')
                     || exec('tr','tlumaczenia','1000195')
                     ?}
                  ?}
               ?}
         ?}
      ||
         _tlumacz:=exec('tr','tlumaczenia','2000101')+exec('get','#params',100225,3)()
      ?}
   ?}
?};
_tlumacz


\kod_aktualny
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [12.30]
:: OPIS: ustala aktualny kod tlumaczenia o kodzie _a
::   WE: _a - kod
::   WY: aktualny kod
::  OLD: \kod_aktualny/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? _a='1000101' || '1000162'
|? _a='1000112' || '1000163'
|? _a='1000194' || '1000164'
|? _a='1000145' || '1000165'
|? _a='1000146' || '1000166'
|? _a='1000142' || '1000167'
|? _a='1000144' || '1000168'
|? _a='2000102' || '2000120'
|| _a
?}


\trans_slo
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyznacza tlumaczenie pozycji JM
::   WE: _a - SLO.ref  _b - KRAJE.ref
::   WY: wynik tlumaczenia
::  OLD: \trans_slo/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('_a')<>type_of(null) || _a:=null ?};

{? _a=null || return('') ?};

_tlumacz:='';
TRANSLAT.index('SLO');
TRANSLAT.prefix(_a,_b);
{? TRANSLAT.first()
|| _tlumacz:=TRANSLAT.T
?};
_tlumacz


\slownie
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula przedstawia wartosc w postaci slownej
::   WE: _ a - wartosc _b - kod waluty
::  OLD: \slownie/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? PARAM_W.JEZYK().KOD='ANG'
|| exec('slownie_ang','tlumaczenia',_a, _b)
|| ''
?}


\rek_translat
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: akcja rekord dla tabeli translat
::  OLD: \rek_translat/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------

_wyn:=chk_rec('T');
{? _wyn=''
||
   TRANSLAT.cntx_psh();

   _tr_pl:=TRANSLAT.TRANS_PL().KOD;
   _jezyk:=TRANSLAT.JEZYK;
   _ref:=TRANSLAT.ref();
   TRANSLAT.index('KOD');
   TRANSLAT.prefix(0,0,0,0,'',_jezyk,_tr_pl);
   {? TRANSLAT.first()
   ||
      {!
      |?
         {? TRANSLAT.ref()<>_ref | -(1+menu_txt)='d'
         ||
            _txt:={? TRANSLAT.JEZYK || TRANSLAT.JEZYK().KOD || 'domyślnego'@ ?};
            FUN.info('Zdefiniowano już tłumaczenie dla języka '
               '%1.\nAkceptacja edycji pozycji niemożliwa.'@[_txt]);
            _wyn:='JEZYK'
         ?};
         _wyn='' & TRANSLAT.next()
      !}
   ?};

   TRANSLAT.cntx_pop()
?};
_wyn


\rek_tra2
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: akcja rekord dla tabeli translat okienko WER2
::  OLD: \rek_tra2/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_wyn:=chk_rec('TRANS_PL','T');
{? _wyn=''
||
   TRANSLAT.cntx_psh();

   _tr_pl:=TRANSLAT.TRANS_PL;
   _jezyk:=TRANSLAT.JEZYK().KOD;
   _ref:=TRANSLAT.ref();
   TRANSLAT.index('GR');
   TRANSLAT.prefix(_tr_pl,_jezyk);
   {? TRANSLAT.first()
   ||
      {!
      |?
         {? TRANSLAT.ref()<>_ref | -(1+menu_txt)='d'
         || FUN.info('Dla języka %1 zdefiniowano już tłumaczenie %2'
               '.\nDodanie kolejnej pozycji niemożliwe.'@[TRANSLAT.JEZYK().KOD,TRANSLAT.TRANS_PL().KOD]);
                _wyn:='TRANS_PL'
         ?};
         _wyn='' & TRANSLAT.next()
      !}
   ?};

   TRANSLAT.cntx_pop()
?};
_wyn


\tran_add_brak
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [2009]
:: OPIS: Dodaje brakujace tlumaczenia dla jezyka (akcja dostepna dla niepustej dziedziny)
::  OLD: \tran_add_brak/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_jezyk:=SLO.ref;
TRANS_PL.index('GR');
TRANS_PL.prefix(TRANS_GR.ref());
{? TRANS_PL.first
||
   {? FUN.ask('Czy dodać brakujące tłumaczenia dla języka '+SLO.KOD+' - '+SLO.TR+'?')
   ||
      {!
      |?
         _tr:=TRANS_PL.ref;
         TRANSLAT.cntx_psh();
         TRANSLAT.index('GRJ');
         TRANSLAT.prefix(_jezyk,_tr);
         {? ~TRANSLAT.first
         ||
            TRANSLAT.clear();
            TRANSLAT.blank();
            TRANSLAT.M:=null;
            TRANSLAT.TRANS_PL:=_tr;
            TRANSLAT.T:=TRANSLAT.TRANS_PL().ORG;
            TRANSLAT.JEZYK:=_jezyk;
            TRANSLAT.add(1)
         ?};
         TRANSLAT.cntx_pop();
         TRANS_PL.next
      !}
   ?};
   TRANSLAT.first()
?};
''


\translat_blank
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Formuła na blank wszystkich pól tabeli TRANSLAT
::   WY: ANY - wartość początkowa pola lub ~~
::  TAG: <MBUILDER><TAB:TRANSLAT><BL>
::  OLD: \bl_tl_jezyk/skid_tra.fml
::  OLD: \bl_trans_pl/skid_tra.fml
::  OLD: \trans_jmb/skid_tra.fml
::  OLD: \trans_mb/skid_tra.fml
::  OLD: \trans_slob/skid_tra.fml
::  OLD: \trans_typyspb/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_result:=~~;
_fld:=cur_afld();

{? _fld='M'
|| {? TRANSLAT.win_sel('?')='WERM'
   || _result:=M.ref()
   || _result:=null()
   ?}
|? _fld='TRANS_PL'
|| {? var_pres('__typokn')>0 & __typokn=1
   || _result:=TRANS_PL.ref
   || _result:=null()
   ?}
|? _fld='JEZYK'
|| {? var_pres('__typokn')>0 & __typokn=2
   || _result:=SLO.ref
   || _result:=null()
   ?}
|? _fld='JM'
|| {? TRANSLAT.win_sel('?')='WERJM'
   || _result:=JM.ref()
   || _result:=null()
   ?}
|? _fld='SLO'
|| {? TRANSLAT.win_sel('?')='WERSLO'
   || {? var_pres('__refslo')>0
      || _result:=__refslo
      || _result:=SLO.ref()
      ?}
   || _result:=null()
   ?}
|? _fld='TYPYSP'
|| {? TRANSLAT.win_sel('?')='WERTYPYS'
   || _result:=TYPYSP.ref()
   || _result:=null()
   ?}
?};
_result


\trans_pl_blank
::----------------------------------------------------------------------------------------------------------------------
::  UTW: WH [17.00]
:: OPIS: Formuła na blank wszystkich pól tabeli TRANS_PL
::   WY: ANY - wartość początkowa pola lub ~~
::  TAG: <MBUILDER><TAB:TRANS_PL><BL>
::  OLD: \bl_tl_gr/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_result:=~~;
_fld:=cur_afld();
{? _fld='TRANS_GR'
|| _result:=TRANS_GR.ref()
?};
_result


\m_transl
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula wyswietla kartoteke tlumaczen
::   WE: [_a] - 0 bez okienka 1 (domyslnie) z okienkiem
::   WY: 1
::  OLD: \m_transl/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? _>=1 || {? type_of(_a)<>1 || _a:=1 ?} || _a:=1 ?};

{? HELP.REFMAT<>null || M.seek(HELP.REFMAT) ?};

{? XINFO.SLJEZYK<>null
||
   TRANSLAT.index('M');
   TRANSLAT.prefix(M.ref);
   TRANSLAT.win_edit('RED');
   TRANSLAT.win_sel('WERM');
   TRANSLAT.hdr_sel();
   TRANSLAT.hdr_sel(' - indeks: %1'@[M.KTM]);
   TRANSLAT.actions('WERM','',,1);
   {? _a || TRANSLAT.select() ?};
   TRANSLAT.hdr_sel()
||
   TRANSLAT.index('M');
   TRANSLAT.prefix(M.ref(),null());
   TRANSLAT.actions('WERM','dpu:d',,1);
   FUN.info('Nie zdefiniowano "słownika języków" w parametrach pracy systemu.\nFunkcja nieaktywna.'@)
?};
1


\trans_re
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: kontrola wypelnienia pol dla tabeli TRANSLAT (podczas redakcji tabeli dla materialu)
::   WY: string - wynik walidacji
::  OLD: \trans_re/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_wyn:='';
_win_sel:=TRANSLAT.win_sel('?');
{? _win_sel<>'WERTYPYS' & _win_sel<>'WERTYPYD'
||
   _wyn:=__CHK.record(TRANSLAT,,'JEZYK','T')
?};
{? _wyn=''
|| _ref:={? -(1+menu_txt())<>'p' || null() || TRANSLAT.ref() ?};
   _refvalue:=TRANSLAT.JEZYK;
   TRANSLAT.cntx_psh();
   TRANSLAT.clear();
   {? TRANSLAT.win_sel('?')='WERM'
   ||
      TRANSLAT.index('M');
      TRANSLAT.prefix(M.ref,_refvalue,'')
   |? TRANSLAT.win_sel('?')='WERJM'
   ||
      TRANSLAT.index('JM');
      TRANSLAT.prefix(JM.ref,_refvalue,'')
   |? TRANSLAT.win_sel('?')='WERSLO'
   ||
      TRANSLAT.index('SLO');
      TRANSLAT.prefix(SLO.ref,_refvalue,'')
   |? TRANSLAT.win_sel('?')='WERTYPYS'
   ||
      TRANSLAT.index('TYPYSP');
      TRANSLAT.prefix(TYPYSP.ref,_refvalue,'')
   |? TRANSLAT.win_sel('?')='WERUID'
   ||
      TRANSLAT.index('UID');
      TRANSLAT.prefix(TRANSLAT.UID,_refvalue,'')
   ?};
   {? TRANSLAT.first() & TRANSLAT.ref()<>_ref
   || {? TRANSLAT.JEZYK
      ||
         FUN.info('W systemie istnieje już tłumaczenie dla języka: %1 - %2'
             '.\n Zmień wersję językową.'@[TRANSLAT.JEZYK().KOD,TRANSLAT.T])
      ||
         FUN.info('W systemie istnieje już domyślne tłumaczenie: %1'
             '.\n Zmień wersję językową.'@[TRANSLAT.T])
      ?};
      _wyn:='JEZYK'
   ?};
   TRANSLAT.cntx_pop()
?};
_wyn


\slownie_ang
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula przedstawia wartosc w postaci slownej w jezyku angielskim
::   WE: _ a - wartosc _b - kod waluty
::  OLD: \slownie_ang/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
_slownie:='';
_slowRob:='';
_y:=int(_a);
_n:=$_y;
_count:=-1;
{? +_n
|| {!
   |? +_n
   |! _count+=1;
      _liczba:=($_n)+3;
      _trans:=_liczba+2;
      _slowRob:=
      {? #_trans>=20
      || ' '+exec('tens_ang','tlumaczenia',1+_trans)+' '
         +{? #(_trans+1) || exec('ones_ang','tlumaczenia',_trans+1) || '' ?}
      || ' '+exec('ones_ang','tlumaczenia',_trans)
      ?};
      {? +(_liczba-2) & #(_liczba-2)
      || _slowRob:=' '+exec('ones_ang','tlumaczenia',(_liczba-2))+' '
                   + exec('triplets_ang','tlumaczenia','1')+' '+_slowRob+' '
                   + {? _count || exec('triplets_ang','tlumaczenia',$(_count+1)) || '' ?}
      || _slowRob:=_slowRob+' '+{? _count || exec('triplets_ang','tlumaczenia',$(_count+1)) || '' ?}
      ?};
      _slownie:=_slowRob+_slownie+' ';
      _n:=_n-3
   !}
?};
_slownie+=' '+_b;
{? 2-$frac(_a)<>''
|| _slownie+=' '+(2-form(frac(_a),,2))+'/100'
?};
_slownie


\tens_ang
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula przedstawia wartosc w postaci slownej w jezyku angielskim
::   WE: _ a - wartosc
::   WY: slowna prezentacja wartosci
::  OLD: \tens_ang/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? _a='2' || 'twenty'
|? _a='3' || 'thirty'
|? _a='4' || 'forty'
|? _a='5' || 'fifty'
|? _a='6' || 'sixty'
|? _a='7' || 'seventy'
|? _a='8' || 'eighty'
|? _a='9' || 'ninety'
?}


\ones_ang
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula przedstawia wartosc w zakresie 1-20 w postaci slownej w jezyku angielskim
::   WE: _ a - wartosc
::   WY: slowna prezentacja wartosci
::  OLD: \ones_ang/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? _a='01' | _a='1' || 'one'
|? _a='02' | _a='2' || 'two'
|? _a='03' | _a='3' || 'three'
|? _a='04' | _a='4' || 'four'
|? _a='05' | _a='5' || 'five'
|? _a='06' | _a='6' || 'six'
|? _a='07' | _a='7' || 'seven'
|? _a='08' | _a='8' || 'eight'
|? _a='09' | _a='9' || 'nine'
|? _a='10'|| 'ten'
|? _a='11'|| 'eleven'
|? _a='12'|| 'twelve'
|? _a='13'|| 'thirteen'
|? _a='14'|| 'fourteen'
|? _a='15'|| 'fifteen'
|? _a='16'|| 'sixteen'
|? _a='17'|| 'seventeen'
|? _a='18'|| 'eighteen'
|? _a='19'|| 'nineteen'
|? _a='20'|| 'one'
|? _a='0' || 'zero'
|? _a='00'|| ''
?}


\triplets_ang
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RA [2008]
:: OPIS: formula przedstawia wartosc tysiecy i wiekszych w postaci slownej w jezyku angielskim
::   WE: _ a - wartosc
::   WY: slowna prezentacja wartosci
::  OLD: \triplets_ang/skid_tra.fml
::----------------------------------------------------------------------------------------------------------------------
{? _a='1'  || 'hundred'
|? _a='2'  || 'thousand'
|? _a='3'  || 'million'
|? _a='4'  || 'billion'
|? _a='5'  || 'trillion'
|? _a='6'  || 'quadrillion'
|? _a='7'  || 'quintillion'
|? _a='8'  || 'sextillion'
|? _a='9'  || 'septillion'
|? _a='10' || 'octillion'
|? _a='11' || 'nonillion'
?}


\typysp_transl
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyswietla kartoteke tlumaczen TYPYSP
::   WE: [_a] - 0 bez okienka 1 (domyslnie) z okienkiem
::   WY: 1
::  OLD: \typysp_transl/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? _>=1 || {? type_of(_a)<>1 || _a:=1 ?} || _a:=1 ?};

{? XINFO.SLJEZYK<>null
||
   TRANSLAT.index('TYPYSP');
   TRANSLAT.prefix(TYPYSP.ref);
   TRANSLAT.win_sel('WERTYPYS');
   TRANSLAT.hdr_sel();
   TRANSLAT.hdr_sel(': '+TYPYSP.T);
   {? _a || TRANSLAT.select() ?};
   TRANSLAT.hdr_sel()
||
   FUN.info('Nie zdefiniowano "słownika języków" w parametrach pracy systemu.\nFunkcja nieaktywna.'@)
?};
1


\slo_transl
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyswietla kartoteke tlumaczen JM
::   WE: [_a] - 0 bez okienka 1 (domyslnie) z okienkiem
::   WY: 1
::  OLD: \slo_transl/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? _>=1 || {? type_of(_a)<>1 || _a:=1 ?} || _a:=1 ?};

{? XINFO.SLJEZYK<>null
|| VAR_DEL.delete('__refslo');
   __refslo:=SLO.ref();
   SLO.cntx_psh;
   TRANSLAT.index('SLO');
   TRANSLAT.prefix(SLO.ref);
   TRANSLAT.win_sel('WERSLO');
   TRANSLAT.hdr_sel();
   TRANSLAT.hdr_sel(': '+SLO.KOD);
   {? _a || TRANSLAT.select() ?};
   TRANSLAT.hdr_sel();
   SLO.cntx_pop;
   VAR_DEL.delete('__refslo')
||
   FUN.info('Nie zdefiniowano "słownika języków" w parametrach pracy systemu.\nFunkcja nieaktywna.'@)
?};
1


\jm_transl
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [2011]
:: OPIS: formula wyswietla kartoteke tlumaczen JM
::   WE: [_a] - 0 bez okienka 1 (domyslnie) z okienkiem
::   WY: 1
::  OLD: \jm_transl/firma.fml
::----------------------------------------------------------------------------------------------------------------------
{? _>=1 || {? type_of(_a)<>1 || _a:=1 ?} || _a:=1 ?};

{? XINFO.SLJEZYK<>null
||
   TRANSLAT.index('JM');
   TRANSLAT.prefix(JM.ref);
   TRANSLAT.win_sel('WERJM');
   TRANSLAT.hdr_sel();
   TRANSLAT.hdr_sel(': '+JM.KOD);
   {? _a || TRANSLAT.select() ?};
   TRANSLAT.hdr_sel()
||
   FUN.info('Nie zdefiniowano "słownika języków" w parametrach pracy systemu.\nFunkcja nieaktywna.'@)
?};
1


\add
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [19.02]
:: OPIS: Dodanie jednego pola do tabeli z wartościami typu STRING
::       Pierwsze pole jest sprawdzane czy nie występuję w tabeli wówczas jest update
::       - zakładamy że działamy w kontekście aktywnego indeksu
::   WE: _a - wskazanie na tabele
::       _b - wartość pierwszego pola
::       [..] - wartości kolejnych pól
::----------------------------------------------------------------------------------------------------------------------
_wyn:='';
_par:=_-1;
_tab:=_a;
_len:=_tab.fld_num();
{? _len<_par || _par:=_len ?};
{? _par>1
|| _tab.prefix(_[2]);
   {? ~_tab.first()
   || _tab.blank();
      {! _ii.._par |! _tab[_ii]:=_[_ii+1] !};
      {? _tab.add(1) || _wyn:=$_tab.ref() ?}
   || _wyn:=$_tab.ref()
   ?}
?};
_wyn


\addGR
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [19.02]
:: OPIS: Dodanie jednego kodu do grupy
::   WE: _a - TRANS_GR - ref
::       _b - wartość pola KOD
::       _c - wartości pola ORG
::----------------------------------------------------------------------------------------------------------------------
TRANS_PL.index('GR');
TRANS_PL.prefix(_a,_b,);
{? TRANS_PL.first()
|| TRANS_PL.ORG:=_c;
   TRANS_PL.put(1)
|| TRANS_PL.TRANS_GR:=_a;
   TRANS_PL.KOD:=_b;
   TRANS_PL.ORG:=_c;
   TRANS_PL.add(1)
?};
~~


\init
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [19.02]
:: OPIS: formula wczytuje lub aktualizuje kody tłumaczeń
::   WE: [_a] - kod grupy 01,02,03 jeśli nie podano to wszystkie (domyślnie)
::  OLD: \add_tran_grup/tlumaczenia
::----------------------------------------------------------------------------------------------------------------------
_kodgr:={? var_pres('_a')=type_of('') || _a || '' ?};

TRANS_GR.index('KOD');

_group:=tab_tmp(1,'KOD','STRING[2]','Kod grupy'
         ,'REF','STRING[16]','Ref SQL');

_ref:=exec('add','tlumaczenia'
 ,TRANS_GR
 ,'Wydruki dokumentów sprzedaży i korekt'
 ,'Tłumaczenia wydruków sprzedaży i korygujących');
exec('add','tlumaczenia',_group,'01',_ref);

_ref:=exec('add','tlumaczenia'
 ,TRANS_GR
 ,'Wydruki sprawozdań'
 ,'Tłumaczenia wydruków sprawozdań definiowalnych');
exec('add','tlumaczenia',_group,'02',_ref);

_ref:=exec('add','tlumaczenia'
 ,TRANS_GR
 ,'Wydruki dokumentów magazynowych'
 ,'Tłumaczenia wydruków dokumentów magazynowych');
exec('add','tlumaczenia',_group,'03',_ref);

_ref:=exec('add','tlumaczenia'
 ,TRANS_GR
 ,'Wdrożeniowe'
 ,'Tłumaczenia wdrożeniowe');
exec('add','tlumaczenia',_group,'04',_ref);

_kod:='01';
_group.clear();
_group.prefix(_kod,);
_refgr:={? _group.first() || exec('FindAndGet','#table',TRANS_GR,_group.REF,,,null()) || null() ?};

{? (_kodgr='' | _kodgr=_kod) & _refgr<>null()
|| exec('addGR','tlumaczenia',_refgr,'1000101','FAKTURA VAT');
   exec('addGR','tlumaczenia',_refgr,'1000102','nr');
   exec('addGR','tlumaczenia',_refgr,'1000103','ORYGINAŁ');
   exec('addGR','tlumaczenia',_refgr,'1000104','KOPIA');
   exec('addGR','tlumaczenia',_refgr,'1000105','Duplikat z dnia');
   exec('addGR','tlumaczenia',_refgr,'1000106','tel:');
   exec('addGR','tlumaczenia',_refgr,'1000107','SPRZEDAWCA');
   exec('addGR','tlumaczenia',_refgr,'1000108','NIP:');
   exec('addGR','tlumaczenia',_refgr,'1000109','Numer rachunku:');
   exec('addGR','tlumaczenia',_refgr,'1000110','Data wystawienia');
   exec('addGR','tlumaczenia',_refgr,'1000111','Data otrzymania zaliczki');
   exec('addGR','tlumaczenia',_refgr,'1000112','Data sprzedaży');
   exec('addGR','tlumaczenia',_refgr,'1000113','NIP UE:');
   exec('addGR','tlumaczenia',_refgr,'1000114','SWIFT (BIC)');
   exec('addGR','tlumaczenia',_refgr,'1000115','Razem');
   exec('addGR','tlumaczenia',_refgr,'1000118','NABYWCA');
   exec('addGR','tlumaczenia',_refgr,'1000119','ODBIORCA');
   exec('addGR','tlumaczenia',_refgr,'1000120','Nabywca:');
   exec('addGR','tlumaczenia',_refgr,'1000121','Forma płatności');
   exec('addGR','tlumaczenia',_refgr,'1000122','GOTÓWKA');
   exec('addGR','tlumaczenia',_refgr,'1000123','PRZELEW');
   exec('addGR','tlumaczenia',_refgr,'1000124','Termin zapłaty');
   exec('addGR','tlumaczenia',_refgr,'1000125','wartość płatności:');
   exec('addGR','tlumaczenia',_refgr,'1000126','Kurs');
   exec('addGR','tlumaczenia',_refgr,'1000127','z dnia');
   exec('addGR','tlumaczenia',_refgr,'1000128','Bank kursu');
   exec('addGR','tlumaczenia',_refgr,'1000129','Z PRZENIESIENIA');
   exec('addGR','tlumaczenia',_refgr,'1000130','DO PRZENIESIENIA');
   exec('addGR','tlumaczenia',_refgr,'1000131','w');
   exec('addGR','tlumaczenia',_refgr,'1000132','W tym');
   exec('addGR','tlumaczenia',_refgr,'1000133','w');
   exec('addGR','tlumaczenia',_refgr,'1000134','do rozliczenia wg kwoty zaliczki');
   exec('addGR','tlumaczenia',_refgr,'1000135','z uwzględnieniem rozl. zaliczek');
   exec('addGR','tlumaczenia',_refgr,'1000136','Powiązane faktury zaliczkowe:');
   exec('addGR','tlumaczenia',_refgr,'1000137','Kwota zaliczki:');
   exec('addGR','tlumaczenia',_refgr,'1000138','Rozliczone zaliczki:');
   exec('addGR','tlumaczenia',_refgr,'1000139','Do zapłaty');
   exec('addGR','tlumaczenia',_refgr,'1000140','w');
   exec('addGR','tlumaczenia',_refgr,'1000141','Słownie:');
   exec('addGR','tlumaczenia',_refgr,'1000142','VAT: Faktura WE uproszczona na mocy Artykułu 28c(E) Szóstej dyrektywy.');
   exec('addGR','tlumaczenia',_refgr,'1000143','Podatek z tytułu dokonanej dostawy zostanie rozliczony przez ostatniego w kolejności podatnika od wartości dodanej.');
   exec('addGR','tlumaczenia',_refgr,'1000144','Podatek rozlicza nabywca.');
   exec('addGR','tlumaczenia',_refgr,'1000145','Imię, nazwisko i podpis osoby upoważnionej do otrzymania dokumentu VAT');
   exec('addGR','tlumaczenia',_refgr,'1000146','Imię, nazwisko i podpis osoby upoważnionej do wystawienia dokumentu VAT');
   exec('addGR','tlumaczenia',_refgr,'1000147','Upoważnienie do wystawiania faktur VAT bez podpisu odbiorcy');
   exec('addGR','tlumaczenia',_refgr,'1000148','Zamówienia');
   exec('addGR','tlumaczenia',_refgr,'1000149','Dokumenty magazynowe');
   exec('addGR','tlumaczenia',_refgr,'1000150','Niniejsza faktura jest równoznaczna z wezwaniem do zapłaty. Za uregulowanie należności po terminie zostaną naliczone odsetki karne.');
   exec('addGR','tlumaczenia',_refgr,'1000151','wartość do zwrotu:');
   exec('addGR','tlumaczenia',_refgr,'1000152','Waluta');
   exec('addGR','tlumaczenia',_refgr,'1000153','Data zwrotu');
   exec('addGR','tlumaczenia',_refgr,'1000154','Nazwa dowodu tożsamości:');
   exec('addGR','tlumaczenia',_refgr,'1000155','Seria i numer DT:');
   exec('addGR','tlumaczenia',_refgr,'1000156','Wydany przez:');
   exec('addGR','tlumaczenia',_refgr,'1000157','Data wydania:');
   exec('addGR','tlumaczenia',_refgr,'1000158','wg kursu faktury zaliczkowej:');
   exec('addGR','tlumaczenia',_refgr,'1000159','Adres korespondencyjny');
   exec('addGR','tlumaczenia',_refgr,'1000160','');
   exec('addGR','tlumaczenia',_refgr,'1000161','samofakturowanie');
   exec('addGR','tlumaczenia',_refgr,'1000162','FAKTURA');
   exec('addGR','tlumaczenia',_refgr,'1000163','Data dostawy towarów/wykonania usługi');
   exec('addGR','tlumaczenia',_refgr,'1000164','FAKTURA WEWNĘTRZNA');
   exec('addGR','tlumaczenia',_refgr,'1000165','Imię, nazwisko i podpis osoby upoważnionej do otrzymania dokumentu');
   exec('addGR','tlumaczenia',_refgr,'1000166','Imię, nazwisko i podpis osoby upoważnionej do wystawienia dokumentu');
   exec('addGR','tlumaczenia',_refgr,'1000167','VAT: Faktura WE uproszczona na mocy art. 135-138 ustawy o ptu.');
   exec('addGR','tlumaczenia',_refgr,'1000168','Odwrotne obciążenie.');
   exec('addGR','tlumaczenia',_refgr,'1000169','Paragony:');
   exec('addGR','tlumaczenia',_refgr,'1000170','Mechanizm podzielonej płatności.');
   exec('addGR','tlumaczenia',_refgr,'1000180','Poz');
   exec('addGR','tlumaczenia',_refgr,'1000181','Nazwa materiału lub usługi');
   exec('addGR','tlumaczenia',_refgr,'1000182','PKWiU');
   exec('addGR','tlumaczenia',_refgr,'1000183','Ilość');
   exec('addGR','tlumaczenia',_refgr,'1000184','jm');
   exec('addGR','tlumaczenia',_refgr,'1000185','Cena brutto przed rab.');
   exec('addGR','tlumaczenia',_refgr,'1000186','Cena netto przed rab.');
   exec('addGR','tlumaczenia',_refgr,'1000187','% rab.');
   exec('addGR','tlumaczenia',_refgr,'1000188','Cena netto');
   exec('addGR','tlumaczenia',_refgr,'1000189','Wartość netto');
   exec('addGR','tlumaczenia',_refgr,'1000190','Stawka VAT');
   exec('addGR','tlumaczenia',_refgr,'1000191','Kwota VAT');
   exec('addGR','tlumaczenia',_refgr,'1000192','Wartość brutto');
   exec('addGR','tlumaczenia',_refgr,'1000193','Cena brutto');
   exec('addGR','tlumaczenia',_refgr,'1000194','Faktura VAT - wewnętrzna');
   exec('addGR','tlumaczenia',_refgr,'1000195','Dokument zakupu');
   exec('addGR','tlumaczenia',_refgr,'1000196','Faktura VAT RR');
   exec('addGR','tlumaczenia',_refgr,'1000197','Wartość netto przed rabatem');
   exec('addGR','tlumaczenia',_refgr,'1000198','Wartość brutto przed rabatem');
   exec('addGR','tlumaczenia',_refgr,'1000199','Kwota rabatu');
   exec('addGR','tlumaczenia',_refgr,'1000201','Faktura - opis pod dokumentem linia 1');
   exec('addGR','tlumaczenia',_refgr,'1000202','Faktura - opis pod dokumentem linia 2');
   exec('addGR','tlumaczenia',_refgr,'1000203','Faktura - opis pod dokumentem linia 3');
   exec('addGR','tlumaczenia',_refgr,'1000204','Faktura - opis pod dokumentem linia 4');
   exec('addGR','tlumaczenia',_refgr,'1000205','Faktura - opis pod dokumentem linia 5');
   exec('addGR','tlumaczenia',_refgr,'1000206','Faktura - opis pod dokumentem linia 6');
   exec('addGR','tlumaczenia',_refgr,'1000207','Faktura - opis pod dokumentem linia 7');
   exec('addGR','tlumaczenia',_refgr,'1000208','Faktura - opis pod dokumentem linia 8');
   exec('addGR','tlumaczenia',_refgr,'1000209','Faktura - opis pod dokumentem linia 9');
   exec('addGR','tlumaczenia',_refgr,'1000210','Wydruk w trybie próbnym');
   exec('addGR','tlumaczenia',_refgr,'1000211','Strona');
   exec('addGR','tlumaczenia',_refgr,'1000212','Nazwa materiału lub usługi objętych rabatem');
   exec('addGR','tlumaczenia',_refgr,'1000214','Zapłacono');
   exec('addGR','tlumaczenia',_refgr,'1000215','Dokument został anulowany');
   exec('addGR','tlumaczenia',_refgr,'1000216','Nr rej. BDO:');
   exec('addGR','tlumaczenia',_refgr,'1000218','CN');
   exec('addGR','tlumaczenia',_refgr,'1000217','i');
   exec('addGR','tlumaczenia',_refgr,'1000219','z dnia');
   exec('addGR','tlumaczenia',_refgr,'1000220','Bank');
   exec('addGR','tlumaczenia',_refgr,'1000221','Rachunek');
   exec('addGR','tlumaczenia',_refgr,'1000225','Dokument wystawił(a)');
   exec('addGR','tlumaczenia',_refgr,'1000227','DUPLIKAT');
   exec('addGR','tlumaczenia',_refgr,'1000230','Kraj Pochodzenia');
   exec('addGR','tlumaczenia',_refgr,'1000231','Metoda kasowa');
   exec('addGR','tlumaczenia',_refgr,'1000232','Procedura marży dla biur podróży');
   exec('addGR','tlumaczenia',_refgr,'1000233','Sprawdź czy twoja faktura znajduje się w KSeF!');
   exec('addGR','tlumaczenia',_refgr,'1000234','Masz problem z otwarciem kodu QR? Skopiuj link i wklej do okna przeglądarki:');
   exec('addGR','tlumaczenia',_refgr,'1000235','Numer KSeF:');
   exec('addGR','tlumaczenia',_refgr,'1000236','ZZP*');
   exec('addGR','tlumaczenia',_refgr,'1000237','bez');
   exec('addGR','tlumaczenia',_refgr,'1000238','*ZZP - zryczałtowany zwrot podatku');
   exec('addGR','tlumaczenia',_refgr,'1000239','Cena');
   exec('addGR','tlumaczenia',_refgr,'1000240','przed rab.');
   exec('addGR','tlumaczenia',_refgr,'1000241','Wartość');
   exec('addGR','tlumaczenia',_refgr,'1000242','Stawka');
   exec('addGR','tlumaczenia',_refgr,'1000243','Kwota');

   exec('addGR','tlumaczenia',_refgr,'2000101','FAKTURA KORYGUJĄCA');
   exec('addGR','tlumaczenia',_refgr,'2000102','do faktury VAT');
   exec('addGR','tlumaczenia',_refgr,'2000103','z dnia');
   exec('addGR','tlumaczenia',_refgr,'2000104','PRZED KOREKTĄ');
   exec('addGR','tlumaczenia',_refgr,'2000105','RAZEM z pozycji przed korektą');
   exec('addGR','tlumaczenia',_refgr,'2000106','PO KOREKCIE');
   exec('addGR','tlumaczenia',_refgr,'2000107','Razem');
   exec('addGR','tlumaczenia',_refgr,'2000108','Kwota wpłaconej zaliczki');
   exec('addGR','tlumaczenia',_refgr,'2000109','Kwota korekty');
   exec('addGR','tlumaczenia',_refgr,'2000110','Do zwrotu');
   exec('addGR','tlumaczenia',_refgr,'2000111','wg kwoty korekty zaliczki');
   exec('addGR','tlumaczenia',_refgr,'2000112','Niniejsza korekta w przypadku zwiększenia wartości jest równoznaczna z wezwaniem do zapłaty. Za uregulowanie należności po terminie zostaną naliczone odsetki karne.');
   exec('addGR','tlumaczenia',_refgr,'2000114','Przed korektą');
   exec('addGR','tlumaczenia',_refgr,'2000116','Po korekcie');
   exec('addGR','tlumaczenia',_refgr,'2000120','do faktury');
   exec('addGR','tlumaczenia',_refgr,'2000121','do faktury VAT RR');
   exec('addGR','tlumaczenia',_refgr,'2000201','Faktura Korygująca - opis pod dokumentem linia 1');
   exec('addGR','tlumaczenia',_refgr,'2000202','Faktura Korygująca - opis pod dokumentem linia 2');
   exec('addGR','tlumaczenia',_refgr,'2000203','Faktura Korygująca - opis pod dokumentem linia 3');
   exec('addGR','tlumaczenia',_refgr,'2000204','Faktura Korygująca - opis pod dokumentem linia 4');
   exec('addGR','tlumaczenia',_refgr,'2000205','Faktura Korygująca - opis pod dokumentem linia 5');
   exec('addGR','tlumaczenia',_refgr,'2000206','Faktura Korygująca - opis pod dokumentem linia 6');
   exec('addGR','tlumaczenia',_refgr,'2000207','Faktura Korygująca - opis pod dokumentem linia 7');
   exec('addGR','tlumaczenia',_refgr,'2000208','Faktura Korygująca - opis pod dokumentem linia 8');
   exec('addGR','tlumaczenia',_refgr,'2000209','Faktura Korygująca - opis pod dokumentem linia 9');
   exec('addGR','tlumaczenia',_refgr,'2000210','Dostawy objęte rabatem w okresie');
   exec('addGR','tlumaczenia',_refgr,'2000211','od');
   exec('addGR','tlumaczenia',_refgr,'2000212','do');
   exec('addGR','tlumaczenia',_refgr,'2000213','Kwota zmniejszenia podatku należnego');
   exec('addGR','tlumaczenia',_refgr,'2000214','Kwota podwyższenia podatku należnego');
   exec('addGR','tlumaczenia',_refgr,'2000215','WARTOŚĆ KOREKTY');
   exec('addGR','tlumaczenia',_refgr,'2000216','Korektę faktury wystawił(a)');

   exec('addGR','tlumaczenia',_refgr,'3000101','FAKTURA PROFORMA');
   exec('addGR','tlumaczenia',_refgr,'3000102','Data');
   exec('addGR','tlumaczenia',_refgr,'3000103','Kod');
   exec('addGR','tlumaczenia',_refgr,'3000104','UL.');
   exec('addGR','tlumaczenia',_refgr,'3000105','kg');
   exec('addGR','tlumaczenia',_refgr,'3000106','w tym zaliczka');
   exec('addGR','tlumaczenia',_refgr,'3000107','Dotychczas wpłacono:');
   exec('addGR','tlumaczenia',_refgr,'3000108','Jw.');
   exec('addGR','tlumaczenia',_refgr,'3000109','Waga jedn. netto');
   exec('addGR','tlumaczenia',_refgr,'3000110','Waga netto');
   exec('addGR','tlumaczenia',_refgr,'3000111','Powód korekty');
   exec('addGR','tlumaczenia',_refgr,'3000201','Faktura Proforma - opis pod dokumentem linia 1');
   exec('addGR','tlumaczenia',_refgr,'3000202','Faktura Proforma - opis pod dokumentem linia 2');
   exec('addGR','tlumaczenia',_refgr,'3000203','Faktura Proforma - opis pod dokumentem linia 3');
   exec('addGR','tlumaczenia',_refgr,'3000204','Faktura Proforma - opis pod dokumentem linia 4');
   exec('addGR','tlumaczenia',_refgr,'3000205','Faktura Proforma - opis pod dokumentem linia 5');
   exec('addGR','tlumaczenia',_refgr,'3000206','Faktura Proforma - opis pod dokumentem linia 6');
   exec('addGR','tlumaczenia',_refgr,'3000207','Faktura Proforma - opis pod dokumentem linia 7');
   exec('addGR','tlumaczenia',_refgr,'3000208','Faktura Proforma - opis pod dokumentem linia 8');
   exec('addGR','tlumaczenia',_refgr,'3000209','Faktura Proforma - opis pod dokumentem linia 9');
   exec('addGR','tlumaczenia',_refgr,'4000101','OFERTA');
   exec('addGR','tlumaczenia',_refgr,'4000102','BEZ ROZDZIAŁU');
   exec('addGR','tlumaczenia',_refgr,'4000103','Termin ważności oferty');
   exec('addGR','tlumaczenia',_refgr,'4000104','Ofertę sporządził');
   exec('addGR','tlumaczenia',_refgr,'4000105','L.p.');
   exec('addGR','tlumaczenia',_refgr,'4000106','Data oferty');
   exec('addGR','tlumaczenia',_refgr,'4000107','OPIS');
   exec('addGR','tlumaczenia',_refgr,'6000101','Zamówienie');
   exec('addGR','tlumaczenia',_refgr,'6000102','Termin realizacji');
   exec('addGR','tlumaczenia',_refgr,'6000103','Miejsce dostawy');
   exec('addGR','tlumaczenia',_refgr,'6000104','Zamowienie klienta');
   exec('addGR','tlumaczenia',_refgr,'6000105','Data dostawy');
   exec('addGR','tlumaczenia',_refgr,'6000106','Dostawca:');
   exec('addGR','tlumaczenia',_refgr,'6000107','Zamawiający:');
   exec('addGR','tlumaczenia',_refgr,'6000108','Zamówienie sporządził');
   exec('addGR','tlumaczenia',_refgr,'6000109','Zamówienie dostawcy');
   exec('addGR','tlumaczenia',_refgr,'6000110','Planowana data realizacji');
   exec('addGR','tlumaczenia',_refgr,'6000111','UWAGI');
   exec('addGR','tlumaczenia',_refgr,'6000112','Warunki dostawy');
   exec('addGR','tlumaczenia',_refgr,'6000113','Symbole projektów');
   exec('addGR','tlumaczenia',_refgr,'6000114','Faktor:');
   exec('addGR','tlumaczenia',_refgr,'6000115','Odbiorca:');
   exec('addGR','tlumaczenia',_refgr,'6000116','Podmiot pierwotny:');
   exec('addGR','tlumaczenia',_refgr,'6000117','Dodatkowy nabywca:');
   exec('addGR','tlumaczenia',_refgr,'6000118','Wystawca faktury:');
   exec('addGR','tlumaczenia',_refgr,'6000119','Dokonujący płatności:');
   exec('addGR','tlumaczenia',_refgr,'6000120','Inny podmiot:');
   exec('addGR','tlumaczenia',_refgr,'6000201','Lp.');
   exec('addGR','tlumaczenia',_refgr,'6000301','Zamówienie przyjął');
   exec('addGR','tlumaczenia',_refgr,'6000302','Razem w');
   exec('addGR','tlumaczenia',_refgr,'6000303','Data przyjęcia');
   exec('addGR','tlumaczenia',_refgr,'6000304','Data dokumentu')
?};

_kod:='02';
_group.clear();
_group.prefix(_kod,);
_refgr:={? _group.first() || exec('FindAndGet','#table',TRANS_GR,_group.REF,,,null()) || null() ?};

{? (_kodgr='' | _kodgr=_kod) & _refgr<>null()
|| exec('addGR','tlumaczenia',_refgr,'0000001','PARAMETRY WYDRUKU');
   exec('addGR','tlumaczenia',_refgr,'0000002','Jednostka księgowa');
   exec('addGR','tlumaczenia',_refgr,'0000003','Wszystkie jednostki księgowe');
   exec('addGR','tlumaczenia',_refgr,'0000004','Okres');
   exec('addGR','tlumaczenia',_refgr,'0000005','Rodzaj okresu');
   exec('addGR','tlumaczenia',_refgr,'0000006','Zamknięty');
   exec('addGR','tlumaczenia',_refgr,'0000007','Otwarty');
   exec('addGR','tlumaczenia',_refgr,'0000008','Uwzględniono wartości');
   exec('addGR','tlumaczenia',_refgr,'0000009','Rzeczywiste');
   exec('addGR','tlumaczenia',_refgr,'0000010','Zaokrąglone');
   exec('addGR','tlumaczenia',_refgr,'0000011','Aktualizacja');
   exec('addGR','tlumaczenia',_refgr,'0000012','Waluta wartości');
   exec('addGR','tlumaczenia',_refgr,'0000013','Kurs');
   exec('addGR','tlumaczenia',_refgr,'0000014','Lp.');
   exec('addGR','tlumaczenia',_refgr,'0000015','Kod');
   exec('addGR','tlumaczenia',_refgr,'0000016','Nazwa');
   exec('addGR','tlumaczenia',_refgr,'0000017','Strona');
   exec('addGR','tlumaczenia',_refgr,'0000018','z');
   exec('addGR','tlumaczenia',_refgr,'0000019','Zakres danych');
   exec('addGR','tlumaczenia',_refgr,'0000020','w tym');
   exec('addGR','tlumaczenia',_refgr,'0000021','Rok');
   exec('addGR','tlumaczenia',_refgr,'0000022','Od okresu');
   exec('addGR','tlumaczenia',_refgr,'0000023','Do okresu');
   exec('addGR','tlumaczenia',_refgr,'0000024','Formuła');
   exec('addGR','tlumaczenia',_refgr,'0000025','Wartości sprawozdania');
   exec('addGR','tlumaczenia',_refgr,'0000026','Wartości sprawozdań');
   exec('addGR','tlumaczenia',_refgr,'0000027','wg wariantów');
   exec('addGR','tlumaczenia',_refgr,'0000028','Wariant');
   exec('addGR','tlumaczenia',_refgr,'0000029','Wartości w okresach');
   exec('addGR','tlumaczenia',_refgr,'0000030','Krocząca dynamika zmian wartości okresu');
   exec('addGR','tlumaczenia',_refgr,'0000031','w latach');
   exec('addGR','tlumaczenia',_refgr,'0000032','Dynamika zmian wg podanych okresów');
   exec('addGR','tlumaczenia',_refgr,'0000033','Wartości wg kolumn w okresie');
   exec('addGR','tlumaczenia',_refgr,'0000034','Wartości');
   exec('addGR','tlumaczenia',_refgr,'0000035','narastające');
   exec('addGR','tlumaczenia',_refgr,'0000036','zaokrąglone do');
   exec('addGR','tlumaczenia',_refgr,'0000037','precyzja');
   exec('addGR','tlumaczenia',_refgr,'0000038','tak');
   exec('addGR','tlumaczenia',_refgr,'0000039','nie');
   exec('addGR','tlumaczenia',_refgr,'0000040','%zmiany');
   exec('addGR','tlumaczenia',_refgr,'0000041','zmiana');
   exec('addGR','tlumaczenia',_refgr,'0000042','%dynamiki');
   exec('addGR','tlumaczenia',_refgr,'0000043','KONIEC WYDRUKU');
   exec('addGR','tlumaczenia',_refgr,'0000044','Okresy raportowania');
   exec('addGR','tlumaczenia',_refgr,'0000045','Podgląd wykresu');
   exec('addGR','tlumaczenia',_refgr,'0000046','Okres bieżący');
   exec('addGR','tlumaczenia',_refgr,'0000047','Sprawozdanie');
   exec('addGR','tlumaczenia',_refgr,'0000048','Mnożnik');
   exec('addGR','tlumaczenia',_refgr,'0000049','Kolumna');
   exec('addGR','tlumaczenia',_refgr,'0000050','Odśwież');
   exec('addGR','tlumaczenia',_refgr,'0000051','Wyświetl');
   exec('addGR','tlumaczenia',_refgr,'0000052','Wartości wg widoku');
   exec('addGR','tlumaczenia',_refgr,'0000053','Plan');
   exec('addGR','tlumaczenia',_refgr,'0000054','Realizacja');
   exec('addGR','tlumaczenia',_refgr,'0000055','Odchylenie');
   exec('addGR','tlumaczenia',_refgr,'0000056','Proszę podać poprawny kurs waluty');
   exec('addGR','tlumaczenia',_refgr,'0000057','Pobierz w formacie Excel');
   exec('addGR','tlumaczenia',_refgr,'0000058','R - Rok');
   exec('addGR','tlumaczenia',_refgr,'0000059','P - Półrocze');
   exec('addGR','tlumaczenia',_refgr,'0000060','K - Kwartał');
   exec('addGR','tlumaczenia',_refgr,'0000061','M - Miesiąc')
?};

_kod:='03';
_group.clear();
_group.prefix(_kod,);
_refgr:={? _group.first() || exec('FindAndGet','#table',TRANS_GR,_group.REF,,,null()) || null() ?};

{? (_kodgr='' | _kodgr=_kod) & _refgr<>null()
|| exec('addGR','tlumaczenia',_refgr,'5000001','Lp.');
   exec('addGR','tlumaczenia',_refgr,'5000002','Lokalizacja');
   exec('addGR','tlumaczenia',_refgr,'5000003','Termin ważności');
   exec('addGR','tlumaczenia',_refgr,'5000004','Materiał lub usługa');
   exec('addGR','tlumaczenia',_refgr,'5000005','Cecha');
   exec('addGR','tlumaczenia',_refgr,'5000006','Zlecenie');
   exec('addGR','tlumaczenia',_refgr,'5000007','jm');
   exec('addGR','tlumaczenia',_refgr,'5000008','Ilość');
   exec('addGR','tlumaczenia',_refgr,'5000009','Numer:');
   exec('addGR','tlumaczenia',_refgr,'5000010','Symbol:');
   exec('addGR','tlumaczenia',_refgr,'5000011','Magazyn:');
   exec('addGR','tlumaczenia',_refgr,'5000012','Wartość');
   exec('addGR','tlumaczenia',_refgr,'5000013','Konto księgowe');
   exec('addGR','tlumaczenia',_refgr,'5000014','Wystawił');
   exec('addGR','tlumaczenia',_refgr,'5000015','Zatwierdził');
   exec('addGR','tlumaczenia',_refgr,'5000016','Przyjął');
   exec('addGR','tlumaczenia',_refgr,'5000017','Wydał');
   exec('addGR','tlumaczenia',_refgr,'5000018','Odebrał');
   exec('addGR','tlumaczenia',_refgr,'5000019','OPIS:');
   exec('addGR','tlumaczenia',_refgr,'5000020','Wydruk dokumentu w trybie próbnym');
   exec('addGR','tlumaczenia',_refgr,'5000021','Przesunięcie do magazynu:');
   exec('addGR','tlumaczenia',_refgr,'5000022','wygenerowano dokument:');
   exec('addGR','tlumaczenia',_refgr,'5000023','Przesunięcie z magazynu:');
   exec('addGR','tlumaczenia',_refgr,'5000024','dokumentem');
   exec('addGR','tlumaczenia',_refgr,'5000025','WALUTA:');
   exec('addGR','tlumaczenia',_refgr,'5000026','RAZEM w');
   exec('addGR','tlumaczenia',_refgr,'5000027','Sprzedawca:');
   exec('addGR','tlumaczenia',_refgr,'5000028','Nabywca:');
   exec('addGR','tlumaczenia',_refgr,'5000029','Cena netto');
   exec('addGR','tlumaczenia',_refgr,'5000030','Cena brutto');
   exec('addGR','tlumaczenia',_refgr,'5000031','Wartość netto');
   exec('addGR','tlumaczenia',_refgr,'5000032','Wartość brutto');
   exec('addGR','tlumaczenia',_refgr,'5000033','Do przeniesienia w');
   exec('addGR','tlumaczenia',_refgr,'5000034','Dokument');
   exec('addGR','tlumaczenia',_refgr,'5000035','do');
   exec('addGR','tlumaczenia',_refgr,'5000036','Zwrot');
   exec('addGR','tlumaczenia',_refgr,'5000037','Opakowanie');
   exec('addGR','tlumaczenia',_refgr,'5000038','Wartość kaucji');
   exec('addGR','tlumaczenia',_refgr,'5000039','Planowana data zwrotu');
   exec('addGR','tlumaczenia',_refgr,'5000040','Kaucja do zapłaty dla dostawcy:');
   exec('addGR','tlumaczenia',_refgr,'5000041','Kaucja do zapłaty przez kontrahenta:');
   exec('addGR','tlumaczenia',_refgr,'5000042','Kaucja do zwrotu dla dostawcy:');
   exec('addGR','tlumaczenia',_refgr,'5000043','Kaucja do zwrotu przez kontrahenta:')
?};

_kod:='04';
_group.clear();
_group.prefix(_kod,);
_refgr:={? _group.first() || exec('FindAndGet','#table',TRANS_GR,_group.REF,,,null()) || null() ?};

{? (_kodgr='' | _kodgr=_kod) & _refgr<>null()
||
   _tr_wdr:=obj_new('TAB','add');
   _tr_wdr.TAB:=tab_tmp(1
      ,'KOD','STRING[20]','Kod'
      ,'ORG','STRING[255]','Oryginał');
   _tr_wdr.add:="
      {? var_pres('_a')<>type_of('') | +_a<>14 || return() ?};
      {? var_pres('_b')<>type_of('') || return() ?};
      {? .TAB.find_key(_a,)
      ||
         .TAB.KOD:=_a;
         .TAB.put()
      ||
         .TAB.KOD:=_a;
         .TAB.ORG:=_b;
         .TAB.add()
      ?}
   ";
   _res:=Plugin.run('TRANSLAT_WDR',_tr_wdr);
   {? var_pres('_res')=type_of(0) & _res
   ||
      _Tab:=_tr_wdr.TAB;
:: usuwamy wdrożeniowe, których brak w definicji
      TRANSLAT.cntx_psh();
      TRANSLAT.index('GR');
      TRANS_PL.cntx_psh();
      TRANS_PL.index('GR');
      TRANS_PL.prefix(_refgr,);
      _loop:=TRANS_PL.first();
      {!
      |? _loop
      |!
         _loop:=
            {? _Tab.find_key(TRANS_PL.KOD,)
            ||
               TRANS_PL.next()
            ||
               TRANSLAT.prefix(TRANS_PL.ref());
               _loop:=TRANSLAT.first(); {! |? _loop |! _loop:=TRANSLAT.del() !};
               TRANS_PL.del(,1)=2
            ?}
      !};
      TRANS_PL.cntx_pop();
      TRANSLAT.cntx_pop();
:: dodajemy wdrożeniowe wg defincji
      _loop:=_Tab.first();
      {!
      |? _loop
      |!
         exec('addGR','tlumaczenia',_refgr,_Tab.KOD,_Tab.ORG);
         _loop:=_Tab.next()
      !}
   ?}
?};

obj_del(_group);
~~


\transtmp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AWI [20.42]
:: OPIS: Tłumaczenia - tymczasowa tabela na serwerze
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
_ident_prefix:='global_transtmp';
{? SYSLOG.lock(1,,1)
|| _st_list:=st_list(_ident_prefix,0);
   {? _st_list.first()
   ||
      TRANSTMP:=st_open(_st_list.IDENT);
      TRANSTMP_NDX:=TRANSTMP.ndx_tmp(,,'LANG',,,'SET',,,'ITEM',,)
   ||
      TRANSTMP:=st_create(3
         ,'LANG','STRING[2]','Język'
         ,'SET','STRING[20]','Zbiór'
         ,'ITEM','STRING[100]','Element zbioru'
         ,'TRAN','STRING[255]','Tłumaczenie');
      TRANSTMP.st_id_make(,_ident_prefix,-1);
      TRANSTMP_NDX:=TRANSTMP.index('?')
   ?};
   SYSLOG.unlock()
||
   TRANSTMP:=st_create(3
      ,'LANG','STRING[2]','Język'
      ,'SET','STRING[20]','Zbiór'
      ,'ITEM','STRING[100]','Element zbioru'
      ,'TRAN','STRING[255]','Tłumaczenie');
   TRANSTMP.st_id_make(,_ident_prefix,-1);
   TRANSTMP_NDX:=TRANSTMP.index('?')
?}


\bl_uid_tl
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: Wartość początkowa pola TRANSLAT.UID
::----------------------------------------------------------------------------------------------------------------------
BEER.UID_TL


\uid2translat
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: Wyświetla definicję tłumaczeń
::   WE: _a - uidref rekordu dla tłumaczeń
::----------------------------------------------------------------------------------------------------------------------
_uid:={? var_pres('_a')=type_of('') & (+_a)=48 || _a || '' ?};

{? _uid<>''
|| BEER.UID_TL:=_uid;
   _txt:=exec('record','#to_string',_uid);
   TRANSLAT.index('UID');
   TRANSLAT.prefix(BEER.UID_TL);
   TRANSLAT.win_sel('WERUID');
   TRANSLAT.hdr_sel('Tłumaczenie dla: %1'@[_txt]);
   TRANSLAT.select()
?};
BEER.UID_TL:='';
~~


\del_uid
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: Usuwa powiązane tłumaczenia wg UID
::   WE: _a - uidref rekordu dla tłumaczeń
::----------------------------------------------------------------------------------------------------------------------
_res:=1;
_uid:={? var_pres('_a')=type_of('') & (+_a)=48 || _a || '' ?};

{? _uid<>''
|| TRANSLAT.cntx_psh();
   TRANSLAT.index('UID');
   TRANSLAT.prefix(_uid);
   {? TRANSLAT.first()
   || {!
      |? _del:=TRANSLAT.del(,1);
         _res:=_del>0;
         _res & _del>1
      !}
   ?};
   TRANSLAT.cntx_pop()
?};
_res


\maskTab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: zwraca dwuznakowy kod maski
::   WE: _a - uidref rekordu
::----------------------------------------------------------------------------------------------------------------------
_res:='';
_uid:={? var_pres('_a')=type_of('') & (+_a)=48 || _a || '' ?};

{? _uid<>''
|| _tab:=ref_tab(_uid);
   {? _tab=FAKSO || _res:=form(8+(_uid+16))+2
   ?}
?};
_res


\pw_tresc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: ustawia wartość pola FAKSZ.TRESC
::----------------------------------------------------------------------------------------------------------------------
FAKSZ.TRESC:=TRANSLAT.T;
FAKSZ.TRESC2:=TRANSLAT.T2;
_lang:=TRANSLAT.JEZYK;
_msk:=exec('maskTab','tlumaczenia',BEER.UID_TM);
{? _msk<>''
|| TRANSLAT.cntx_psh();
   TRANSLAT.use('transl%1'[_msk]);
   TRANSLAT.index('UID');
   TRANSLAT.prefix(BEER.UID_TM,_lang);
   {? TRANSLAT.first()
   || FAKSZ.TRESC:=TRANSLAT.T;
      {? TRANSLAT.T2<>'' || FAKSZ.TRESC2:=TRANSLAT.T2 ?}
   ?};
   TRANSLAT.cntx_pop()
?};
''


\mod_translat
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: modyfikacja treści tłumaczenia
::----------------------------------------------------------------------------------------------------------------------
_akttr:=FAKSZ.TRESC;
_aktt2:=FAKSZ.TRESC2;
TRANSLAT.get();
_orgtr:=TRANSLAT.T;
_orgt2:=TRANSLAT.T2;
_lang:=TRANSLAT.JEZYK;
_msk:=exec('maskTab','tlumaczenia',BEER.UID_TM);

TRANSLAT.efld_opt('RED','editable=0',,'JEZYK');
TRANSLAT.win_edit('RED');
TRANSLAT.T:=FAKSZ.TRESC;
TRANSLAT.T2:=FAKSZ.TRESC2;
{? TRANSLAT.edit("exec('chk_translat','tlumaczenia')") & _msk<>''
|| _newtr:=TRANSLAT.T;
   _newt2:=TRANSLAT.T2;
   {? _newtr<>_akttr | (_newt2<>'' & _newt2<>_aktt2)
   || {? _newtr<>_orgtr | (_newt2<>'' & _newt2<>_orgt2)
      || TRANSLAT.get();
         TRANSLAT.cntx_psh();
         TRANSLAT.use('transl%1'[_msk]);
         TRANSLAT.prefix(BEER.UID_TM,_lang);
         _put:=TRANSLAT.first();
         TRANSLAT.T:=_newtr;
         TRANSLAT.T2:=_newt2;
         TRANSLAT.UID:=BEER.UID_TM;
         {? _put || TRANSLAT.put(1) || TRANSLAT.add(1) ?};
         TRANSLAT.cntx_pop()
      || TRANSLAT.cntx_psh();
         TRANSLAT.use('transl%1'[_msk]);
         TRANSLAT.index('UID');
         TRANSLAT.prefix(BEER.UID_TM,_lang);
         {? TRANSLAT.first() || TRANSLAT.del() ?};
         TRANSLAT.cntx_pop()
      ?}
   ?}
?};
TRANSLAT.efld_opt('RED','editable=1',,'JEZYK');
~~


\chk_translat
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [rr] [22.26]
:: OPIS: modyfikacja treści tłumaczenia
::----------------------------------------------------------------------------------------------------------------------
_res:='';
{? TRANSLAT.T=''
|| FUN.info('Należy podać treść tłumaczenia.');
   _res:='T'
?};
_res

:Sign Version 2.0 jowisz:1045 2024/01/23 10:33:51 82b8017b2152a53697b3db9a5bb89838f927ca5a63e671df7745dd3137eab303c3f245d6e3c4f6b47bb1b6e4f7ecf4c543bf56fb200d9cc90e04ae45750738038aba3ab1a04f5e5fcb8e03c544cf7f2ccc3e77b72e15664dbd4e2255c2da3e1f4d3aa70b82eb833f52b70b102ca588866697f84316a5a751c6872e4c4565a7ef
