:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !tte_tec_pkte.fml
:: Utworzony: 20.02.2015
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności TTE_TEC_PKTE - Przeglądanie kart technologicznych
::            Czynność jest potrzebna wyłącznie ze względu na uprawnienia
::            Zawiera także kod używany tylko do podglądu technologii od strony zlecenia
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [17.00]
:: OPIS: Formuła główna czynności TTE_TEC_PKTE
::----------------------------------------------------------------------------------------------------------------------
::# permissions=ODDZ
~~


\zl_view
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [17.00]
:: OPIS: Podgląd źródłowej karty technologicznej od strony zlecenia
::       Kontekst wywołania - rekord ZL
::----------------------------------------------------------------------------------------------------------------------
set_help(exec('set_help','#help','TTE_TEC'));
exec('tktl_cntx_psh','tech_common');
_msk:=(8+ZL.RKTL)+3;
exec('tktl_use','tech_common',_msk);
{? TKTL.seek(ZL.RKTL)
|| _red:=exec('win_edit','!tte_tec_pkte');
   TKTL.win_edit(_red);
   TKTL.edit()
?};
exec('tktl_cntx_pop','tech_common');
~~


\win_edit
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [17.00]
:: OPIS: Tworzy okno edycji wykorzystane w podglądzie od strony zlecenia
::       Kontekst wywołania - rekord tabeli TKTL
::   WY: akronim okna
::----------------------------------------------------------------------------------------------------------------------
_red:=TKTL.mk_edit('Źródłowa karta technologiczna'@,,'tktl_zred',,,'html_maximized');
TKTL.win_ewin(_red,,'DISP');
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['Operacje'@],"exec('action_oper_button','tech_oper')");
TKTL.btn_eopt(_red,_btn,{? TKTL.TYP().OPER='N' || 'state=grayed' || 'state=normal' ?});
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['Surowce'@],"exec('action_mater_button','tech_mater')");
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['N-P-U'@],"exec('action_tools_button','tech_tool')");
TKTL.btn_eopt(_red,_btn,{? TKTL.TYP().UTIL='N' || 'state=grayed' || 'state=normal' ?});
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['Parametry'@],"exec('action_params_button','tech_param')");
TKTL.btn_eopt(_red,_btn,{? TKTL.TYP().PAR='N' || 'state=grayed' || 'state=normal' ?});
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['P&rodukty karty'@],"exec('action_products_button','tech_prod',0)");
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['Atrybu&ty'@],"exec('action_attrib_button','tech_atr')");
_btn:=TKTL.win_ebtn(_red,'text=%1,align=begin'['Doku&mentacja'@],"exec('action_docum_button','tech_doc')");
_btn:=TKTL.win_ebtn(_red,'text=%1,align=end'['&Anuluj'@],"'key:Esc'");
_red

:Sign Version 2.0 jowisz:1048 2023/06/23 14:09:39 b88cd8516e8d552145a58e105ba48cd1e5e921752d57ad05bb1b5896db282d88dfc08f76cce770d2ca6eaca4e89648d95277bcde8809ea4f93a903198dd849d51f54a6c3764c303a7083ed5a0e53e4d45b5f0a7e8689a19ff5b6226a276c15ca9fa4736afce6e8d82e9c9df05b1683ecc2821eebe362d30f9cb5fc15a3c79807
