:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_es__load.fml
:: Utworzony: MicKoc 16.03.2023
:: Autor: MicKoc [23.25]
:: Systemy: Wspólne
::======================================================================================================================
:: Zawartość: Obsługa czynności ZWS_ES__LOAD - Zasilenie początkowe z kasowaniem danych w ES
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MicKoc [23.25]
:: OPIS: Zasilenie początkowe ES - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# properties=SERVICE
::# kind=WE, symbol=ROK_OD, type=NUMBER, name="Rok początkowy zasilania", required=N
::# kind=WE, symbol=ROK_DO, type=NUMBER, name="Rok końcowy zasilania", required=N
::# kind=WE, symbol=KASUJ, type=NUMBER, name="Czy kasować dane ES?", required=N
::# kind=WY, symbol=RESULT, type=STRING, name="Wynik czynności (OK,BŁĄD)", required=N
params_set(_par:=params_get());
_mp:=_par.mp;
_in:=_par.in;

_default:="{? ($('_a.'+_b))(_a)=~~ || ($('_a.'+_b+':=_b'))(_a,_c) ?}";
:: Określenie wartości domyślnych
_default(_in,'ROK_OD',0);
_default(_in,'ROK_DO',0);
_default(_in,'KASUJ',0);

_es:=exec('elastic','elastic');
{? var_pres('ROK_OD',_in)=type_of(0) & _in.ROK_OD>0 || _es.setRokOd(_in.ROK_OD) ?};
{? var_pres('ROK_DO',_in)=type_of(0) & _in.ROK_DO>0 || _es.setRokDo(_in.ROK_DO) ?};
{? var_pres('KASUJ',_in)=type_of(0) || _es.KASUJ:=_in.KASUJ ?};
_out:=obj_new('RESULT');
_out.RESULT:=exec('load','elastic');


{? _out.RESULT='OK'
|| _mp.save(,_out);
   _mp.done()
?};

{? _out.RESULT<>'OK'
:  obsługa błędów
|| _mp.error(_out.RESULT)
?};

~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MicKoc [23.25]
:: OPIS: Zasilenie początkowe ES - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
'Zasilenie początkowe z kasowaniem danych w ES'@@

:Sign Version 2.0 jowisz:1048 2023/06/23 14:09:40 5b2b3f759f78e4be01d3c41c1b299108a7a80766c1a33b0373b745b8f871ad99a2a77b4b80840e594f3e83a0d87db114551726cbe29ac0e07ce47c2fb8d0f480c8a0e318515f069bf2c523563490bfabb1281d41c342299adebb1e0506f3cc2abf3078a2f43aff92185cd9388a5137136f8b96ea667df969bb04d7abf66db64c
