:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !psz_prs_wpsz.fml
:: Utworzony: 27.11.2017
:: Autor: jaws
::======================================================================================================================
:: Zawartość: Obsługa czynności PSZ_PRS_WPSZ - Weryfikacja planu szkoleń.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [18.02]
:: OPIS: Weryfikacja planu szkoleń - główna formuła czynności.
::   WE:
::   WY:
::UWAGA: Do obsługi parametrów należy wykorzystać params_get()
::       - wymagane jest aby parametry zawierały wskazanie na tablicę nazwaną 'in'
::       - w tablicy 'in' wymagane jest pole 'SZK_PLAN' typu _SZK_PLAN
::----------------------------------------------------------------------------------------------------------------------
::# permissions=F_ZATR,UD_SKL

_par:=params_get();
{? var_pres('_par')<100 | var_pres('in',_par)<100 | var_pres('SZK_PLAN',_par.in)<>type_of(null)
|| FUN.emsg('Brak parametru wywołania czynności \'%1\'.'@['PSZ_PRS_WPSZ']);
   return()
|? _par.in.SZK_PLAN=null | ref_tab(_par.in.SZK_PLAN)<>SZK_PLAN
|| FUN.emsg('Błędny parametr wywołania czynności \'%1\'.'@['PSZ_PRS_WPSZ']);
   return()
?};

SZK_PLAN.cntx_psh();
SZK_PLAN.prefix();
{? SZK_PLAN.seek(_par.in.SZK_PLAN)
|| SZK_PLAN.D_AKC:=date();
   SZK_PLAN.OSOBA:=OPERATOR.USER().OSOBA;
   SZK_PLAN.win_edit('WPSZ');
   {? SZK_PLAN.edit()
   || SZK_PLAN.put()
   ?}
?};
SZK_PLAN.cntx_pop();

~~

:Sign Version 2.0 jowisz:1045 2023/11/15 14:14:34 b3a697da843f40587e1ef1d625a3e15b975e2fffb87ba9100cd4a91517097c25d2e731cd23f31d07d8607aa605482cd31974c3584ec2106b43c8df5be9e3d978ae39a5e9bc60dac90a03fe551a125965f1649bfcde63443fa710795e7f74df90d032f756ea4c2f24842e654855ce9b7b412c966b55bdf2d935f32e3422433987
