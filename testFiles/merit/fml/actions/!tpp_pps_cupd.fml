:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !tpp_pps_cupd.fml
:: Utworzony: 01.08.2018
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności TPP_PPS_CUPD - Generowanie pojemników planistycznych
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Główna formuła czynności generowania pojemników planu strategicznego (TPP_PPS_CUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
_out:=params_get().out;
_mp:=params_get().mp;

::# permissions=ODDZ
::# properties=SERVICE

::# kind=WY, symbol=RESULT, type=STRING, ^
::#          name="Wynik czynności (OK, gdy pojemniki planu zostały wygenerowane)", required=N
{? var_pres('RESULT',_out)<>type_of(~~) & var_pres('RESULT',_out)<>type_of('') || return() ?};

_result:=0;
_can_continue:=1;

{? _mp.isService()
|| _result:=exec('px_cup_update','px_gen',0)
|? _mp.akcja()='URUCHOM'
|| _result:=exec('px_cup_update','px_gen',1)
|| _can_continue:=0
?};
{? _can_continue>0
|| {? _result=0
   || _out.RESULT:='BŁĄD'
   || _out.RESULT:='OK'
   ?};
   _mp.save(,_out);
   _mp.done()
?};
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Opis dla czynności generowania pojemników planu strategicznego (TPP_PPS_CUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       mp  - obiekt odpowiedzialny za obsługę procesu
::   WY: zwraca opis Zadania
::----------------------------------------------------------------------------------------------------------------------
_desc:='Wygeneruj pojemniki planu strategicznego'@@;
_desc

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:21 a8ea2a2810c91e816456c2e0622636554658c50d03d881d88ff4499c962e89fe073dc685414e693f1529a3e3736c9f356b74d8931540eb663ab15d564a5bd65ba58f98eb9c6f804fb96f13146246155b4e2d711801c4891e4856088f9787c22b1d33151bc8570dc245a72fd9be4301359d9e4c949a818daa8a7f12c194e996c7
