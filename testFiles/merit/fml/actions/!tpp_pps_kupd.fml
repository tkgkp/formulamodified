:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !tpp_pps_kupd.fml
:: Utworzony: 01.08.2018
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności TPP_PPS_KUPD - Aktualizacja pojemności zasobów (kontenerów) planu strategicznego
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Główna formuła czynności aktualizacji pojemności zasobów planu strategicznego (TPP_PPS_KUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
_out:=params_get().out;
_mp:=params_get().mp;

::# permissions=ODDZ
::# properties=SERVICE

::# kind=WY, symbol=RESULT, type=STRING, ^
::#          name="Wynik czynności (OK, gdy pojemności zasobów planu zostały zaktualizowane)", required=N
{? var_pres('RESULT',_out)<>type_of(~~) & var_pres('RESULT',_out)<>type_of('') || return() ?};

_result:=0;
_can_continue:=1;

{? _mp.isService()
|| _result:=exec('cap_init_all','px_kont',0)
|? _mp.akcja()='URUCHOM'
|| _result:=exec('cap_init_all','px_kont',1)
|| _can_continue:=0
?};
{? _can_continue>0
|| {? _result=0
   || _out.RESULT:='BŁĄD'
   || _out.RESULT:='OK'
   ?};
   _mp.save(,_out);
   _mp.done()
?};
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Opis dla czynności aktualizacji pojemności zasobów planu strategicznego (TPP_PPS_KUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       mp  - obiekt odpowiedzialny za obsługę procesu
::   WY: zwraca opis Zadania
::----------------------------------------------------------------------------------------------------------------------
_desc:='Zaktualizuj pojemności zasobów planu strategicznego'@@;
_desc

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:21 99f9ad92b9f83b3eba8a77a695da5562cda5ac002e290f76f549c73fa7a7dc545bcdcae114aca39292168d747716678d68b266f5901ce266fed652c8dc06c5147555d8e37075d302f1f2a3299d74a3080c2df207491b0816d3c0ec34b6976d4cd6375cc2e810d9ba94bae4c2c2861dfae4e225594356dd5bbcfc1af6e56c543c
