:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !pkd_zat_zrdk.fml
:: Utworzony: 14.11.2016
:: Autor: RWR
::======================================================================================================================
:: Zawartość: Obsługa czynności PKD_ZAT_ZRDK - Rej. kontraktu menedżerskiego.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. kontraktu menedżerskiego - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# permissions=F_ZATR,UD_SKL
::# kind=WE, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::
::# kind=WEW, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
::# kind=WY, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::# kind=WY, symbol=P, type=_P, name=Wskazanie pracownika, required=N, keyref=N
::# kind=WY, symbol=H_UM, type=_H_UM, name=Wskazanie umowy, required=N, keyref=N
::# kind=WY, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
:: UWAGA: do poprawnego działania poza procesami wykorzystywany jest kontekst, w którym musi być określone
:: H wskazujące na rekord w przebiegu zatrudnienia
::
params_set(params_get());
exec('main','wspolpraca','K')


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. kontraktu menedżerskiego - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
params_set(params_get());
_tab:=exec('desc','wspolpraca');

{? _tab.ZAW_DANE='T'
|| {? +_tab.STN & +_tab.UD_SKL
   || {? _tab.OBCY='T'
      || 'Zarejestruj kontrakt menedżerski: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      |? +_tab.PESEL
      || 'Zarejestruj kontrakt menedżerski: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      || 'Zarejestruj kontrakt menedżerski: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      ?}
   || {? _tab.OBCY='T'
      || 'Zarejestruj kontrakt menedżerski: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP]
      |? +_tab.PESEL
      || 'Zarejestruj kontrakt menedżerski: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP]
      || 'Zarejestruj kontrakt menedżerski: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP]
      ?}
   ?}
|| 'Zarejestruj kontrakt menedżerski'@@
?}

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:17 a78a4ecf6c6ab62f8369f120ef3028e1bc3ff7c012caae154e1c06b538a17de5dc1cf4e8490f910de0b698564a9035fc8846a4005597f2105098a1a0fe23e03d9365a49f7672a12e00bd78fc5268d44fb0140be05a03639037929a358f0ca5d1c22b74bcec350952423d93608b0f61076d88bb9fba6d29f4a471980ecad68417
