:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !fks_ved_zvcp.fml
:: Utworzony: 04.12.2015
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności FKS_VED_ZVCP - Przeglądanie deklaracji CIT-8
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Przeglądanie deklaracji CIT-8 - główna formuła czynności FKS_VED_ZVCP.
::----------------------------------------------------------------------------------------------------------------------
::# permissions=FJKS


\add_tab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AMK [17.00]
:: OPIS: Dodanie zakładki do okna grupowego obszaru deklaracji podatkowych (FKS_VED)
::   WE: _a - nazwa zakładki
::       _b - okno grupowe
::----------------------------------------------------------------------------------------------------------------------
VAT_DEK.grp_sel(_b,,'WER_CIT',_a,"",0,0,,"exec('bw','!fks_ved_zvcp')","",,,'maximized_with_title');
exec('task_attach','fks_ved','C')


\bw
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Przed obsługą okien okna grupowego obszaru FKS_VED
::----------------------------------------------------------------------------------------------------------------------
VAT_DEK.index('VAT_DEK'); VAT_DEK.prefix(SIK.ROK1().POCZ_ROK,'CIT8');
VAT_DEK.win_sel('WER_CIT'); VAT_DEK.win_edit('CIT');
vat_typ:=''; rodzdekl:='C'; SKID.TYP_ZAP:=SKID.DEKL_NAZ:='CIT8';
VAT_DEK.hdr_sel();
VAT_DEK.hdr_sel('-8 z roku %1'@[ROK_F.NAZ]);
~~


\cit_zak
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [MB] [2008]
:: OPIS: Zmiana zakresu prezentowanych deklaracji CIT
::  OLD: \cit_zak/cit.fml
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('OknROKE2')<=0
|| exec('okno_rok2','fks_ved')
|| SIK.win_edit(OknROKE2)
?};
{? SIK.edit("chk_rec()")
|| VAT_DEK.hdr_sel();
   VAT_DEK.hdr_sel('-%1 z roku %2'@[SKID.TYP_ZAP+1,ROK_F.NAZ]);
   VAT_DEK.index('VAT_DEK');
   VAT_DEK.prefix(ROK_F.POCZ_ROK,'CIT'+(SKID.TYP_ZAP+1));
   AreaTitle.setTitle()
?};
SIK.win_edit();
VAR_DEL.delete('OknROKE2')


\cit_prn
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [MB] [2008]
:: OPIS: Wydruk deklaracji CIT
::  OLD: \cit_prn/cit.fml
::----------------------------------------------------------------------------------------------------------------------
exec('drukuj','fks_ved','fks_cit8_'+$VAT_DEK.NR().NR)


\br_cit
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Rekord przed okna WER_CIT tabeli VAT_DEK
::----------------------------------------------------------------------------------------------------------------------
VAT_DEKT.index('VAT_DEK');
VAT_DEKT.prefix(VAT_DEK.ref());
_grayed:='';
{? ~VAT_DEKT.first()
|| _grayed:='A'
?};
{? ~exec('can_edit','fks_ved')
|| _grayed+='PU'
?};
_grayed+=exec('grayAkc','fks_ved');
VAT_DEK.actions_grayed('WER_CIT',_grayed);
''

:Sign Version 2.0 jowisz:1028 2019/06/07 15:55:43 4fdf2186fd12dc0528e13e589a755d391d7dacc2affa34311bb086800c9750393e25c1eb7a6b7615e3426becb5263ae73530bd115adc483fefcc2082fdee657b65add76f1e0c1e36860820316802a545cea792ad88b02c5e482640215483c80bae1083ccadf5ddd05afdf262f1b9102e900fe184a8a761a59f15d14816350dea
