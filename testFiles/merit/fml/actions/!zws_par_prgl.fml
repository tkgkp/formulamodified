:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_par_prgl.fml
:: Utworzony: 31.05.2017
:: Autor: jaws
::======================================================================================================================
:: Zawartość: Obsługa czynności ZWS_PAR_PRGL - Wartości globalne.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.28]
:: OPIS: Wartości globalne - główna formuła czynności.
::----------------------------------------------------------------------------------------------------------------------
_buf_proft:=exec('save_fml_type','#field',ZZ_PROFT,'BLANK');
_buf_kompk:=exec('save_fml_type','#field',ZZ_KOMPK,'BLANK');
_buf_komps:=exec('save_fml_type','#field',ZZ_KOMPS,'BLANK');
_buf_kompz:=exec('save_fml_type','#field',ZZ_KOMPZ,'BLANK');

exec('init_bufs','phr_tab');
ZZ_POM.MODUL:='O';

_acr:=exec('setup_wnd','!zws_par_prgl');

_hist:=ZZ_POM.ZZ_HIST;
ZZ_HIST.cntx_psh();

ZZ_HIST.clear();
ZZ_HIST.win_sel(_acr);
ZZ_HIST.select();

ZZ_HIST.cntx_pop();
ZZ_POM.ZZ_HIST:=_hist;

exec('restore_fml_type','#field',ZZ_PROFT,'BLANK',_buf_proft);
exec('restore_fml_type','#field',ZZ_KOMPK,'BLANK',_buf_kompk);
exec('restore_fml_type','#field',ZZ_KOMPS,'BLANK',_buf_komps);
exec('restore_fml_type','#field',ZZ_KOMPZ,'BLANK',_buf_kompz);
~~


\setup_wnd
::----------------------------------------------------------------------------------------------------------------------
::  UTW: jaws [17.28]
:: OPIS: Tworzy okno panelu do obsługi wartości globalnych.
::   WE:
::   WY: akronim okienka tabeli ZZ_HIST
::----------------------------------------------------------------------------------------------------------------------
exec('__WND','#object');

_acr:='WARTOSCI';
{? (_wnd:=__WND.SEL.get(ZZ_HIST,_acr))=''
|| _wnd:=ZZ_HIST.grp_make('Wartości globalne'@,
:     po wyświetleniu
      "  _fml:=$'ZZ_HIST.ZZ_DOK';
         ZZ_PROFT.fld_fml('ZZ_LINK','BLANK',_fml);
         ZZ_KOMPK.fld_fml('ZZ_LINK','BLANK',_fml);
         ZZ_KOMPK.fld_fml('ZZ_KOMP','BLANK',$'null');
         ZZ_KOMPS.fld_fml('ZZ_LINK','BLANK',_fml);
         ZZ_KOMPS.fld_fml('ZZ_KOMP','BLANK',$'null');
         ZZ_KOMPZ.fld_fml('ZZ_LINK','BLANK',_fml);
         ZZ_KOMPZ.fld_fml('ZZ_KOMP','BLANK',$'null');

         ZZ_PROFT.index('KOD');
         ZZ_KOMPK.index('WARTOSC');
         ZZ_KOMPS.index('WARTOSC');

         ZZ_TYP.cntx_psh();
         ZZ_TYP.win_dict('SLO');

         ZZ_PROFT.actions_grayed('CFG');
         ZZ_KOMPS.actions_grayed('CFG');
         ZZ_KOMPK.actions_grayed('CFG');
         ZZ_KOMZB.actions_grayed(__WND.SEL.get(ZZ_KOMZB,'CFG'));

         exec('zz_pom_psh','phr_widok','ZWS_PAR_PRGL');
         exec('zz_typ_fset','phr_widok')
      ",
:     identyfikator
      '',
:     położenie
      0,0,
:     zamknięcie
      "  exec('zz_pom_pop','phr_widok');
         ZZ_TYP.cntx_pop();
         ZZ_TYP.f_clear();
         1
      "
   );
   __WND.SEL.put(ZZ_HIST,_acr,_wnd);

   ZZ_HIST.grp_sel(_wnd,,'SEL',,
:     po odświeżeniu
      "  ZZ_POM.ZZ_HIST:=ZZ_HIST.ref();
         grp_disp(ZZ_PROFT,'CFG',1);
         grp_disp(ZZ_KOMPS,'CFG',1);
         grp_disp(ZZ_KOMPK,'CFG',1);
         grp_disp(ZZ_KOMZB,__WND.SEL.get(ZZ_KOMZB,'CFG'),1)
      ",
:     położenie i wysokość
      ,,7,
:     przed obsługą
      "",
:     po obsłudze
      "",
:     utrwalenie, aktywacja, wypełnienie
      0,0,'maximized'
   );
   ZZ_HIST.grp_splt(_wnd,,'horizontal','bottom');


:  typy ocen
   ZZ_HIST.grp_sel(_wnd,ZZ_PROFT,'CFG','Typy oceny'@,
:     po odświeżeniu
      "",
:     położenie i wysokość
      ,,7,
:     przed obsługą
      "ZZ_PROFT.prefix(ref_name(ZZ_HIST.ZZ_DOK),ZZ_HIST.ZZ_DOK)",
:     po obsłudze
      "",
:     utrwalenie, aktywacja, wypełnienie
      0,0,'maximized'
   );

:  skala punktowa
   ZZ_HIST.grp_sel(_wnd,ZZ_KOMPS,'CFG','Skala punktowa'@,
:     po odświeżeniu
      "",
:     położenie i wysokość
      ,,7,
:     przed obsługą
      "ZZ_KOMPS.prefix(ref_name(ZZ_HIST.ZZ_DOK),ZZ_HIST.ZZ_DOK,null)",
:     po obsłudze
      "",
:     utrwalenie, aktywacja, wypełnienie
      0,0,'maximized'
   );

:  wartości kodowane
   ZZ_HIST.grp_sel(_wnd,ZZ_KOMPK,'CFG','Wartości kodowane'@,
:     po odświeżeniu
      "",
:     położenie i wysokość
      ,,7,
:     przed obsługą
      "ZZ_KOMPK.prefix(ref_name(ZZ_HIST.ZZ_DOK),ZZ_HIST.ZZ_DOK,null)",
:     po obsłudze
      "",
:     utrwalenie, aktywacja, wypełnienie
      0,0,'maximized'
   );

:  wartości bezpośrednie
   ZZ_HIST.grp_sel(_wnd,ZZ_KOMZB,__WND.SEL.get(ZZ_KOMZB,'CFG'),'Wartości bezpośrednie'@,
:     po odświeżeniu
      "",
:     położenie i wysokość
      ,,7,
:     przed obsługą
      "exec('zz_komzb_fill','phr_widok',ZZ_HIST.ZZ_DOK,null)",
:     po obsłudze
      "",
:     utrwalenie, aktywacja, wypełnienie
      0,0,'maximized'
   )
?};

_wnd

:Sign Version 2.0 jowisz:1028 2019/06/07 15:56:06 cc464e6cd149b15ec179d139355e1994b498219f650fabdfac25f37239f6c0cd7a61c701457ecd9e5ac705079c1876b4de5f52902c495ae5cb126148d683627d1b5c07af5922f22ff8e5b133bc22bd85e5ee53739c819b59fe5043b66d6bd45688f2ba2edc013c20a73a67143a63953865f2022d1de3a21ff6dbbc3e880a23d8
