:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_bil_doks.fml
:: Utworzony: 05.02.2018
:: Autor: TS
::======================================================================================================================
:: Zawartość: Obsługa czynności wstawienia dokumentów do usługi Businesslink
:: UWAGA: Czynność ma puste działanie - od wersji 20.42 zmiana kodu czynności na: ZBL_BIL_DOKS
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.22]
:: OPIS: Formuła główna czynności wstawienia załacznika do usługi Businesslink (ZWS_BIL_DOKS)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::       context - [obj_new] obiekt służący do przekazywania kontekstu wywołania czynności
::----------------------------------------------------------------------------------------------------------------------
_in:=params_get().in;
_out:=params_get().out;
_mp:=params_get().mp;
_action:=_mp.akcja();

::# properties=SERVICE

:: PARAMETRY WE:
::# kind=WE, symbol=DOKUM, type=_DOKUM, name=Wskazanie na załącznik, required=T, keyref=T
{? var_pres('DOKUM',_in)<>type_of(~~) & var_pres('DOKUM',_in)<>type_of(null()) || return() ?};
{? var_pres('DOKUM',_in)=type_of(~~) || return() ?};

::# kind=WY, symbol=RESULT, type=STRING, name="Wynik czynności (OK, BŁĄD)", required=N
{? var_pres('RESULT',_out)<>type_of(~~) & var_pres('RESULT',_out)<>type_of('') || return() ?};

_out.RESULT:='OK';
_mp.save(,_out);
_mp.done();
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.22]
:: OPIS: Opis dla czynności wstawienia załącznika do Businesslink (ZWS_BIL_DOKS)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       mp  - obiekt odpowiedzialny za obsługę procesu
::   WY: zwraca opis Zadania
::----------------------------------------------------------------------------------------------------------------------
_mp:=params_get().mp;

_desc:='';
_keyRefs:=_mp.getRefs();
_in:=_mp.load(exec('kind_in','#b_port'));

:: jest rekord kluczowy to ustawiam odpowiedniego DOKUM
{? var_pres('[1]',_keyRefs)
|| _desc:='Wyślij załącznik do Businesslink: %1'@@[exec('record','#to_string',_keyRefs[1])]
?};
_desc

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:22 19d984053b24df0d9f399d17692d7b42c56bd1de60a3a13f9afe4846dbe3f371f2cecbd681ce9b5c45a40a32b74bb1d5249c5435b0bab1611756d674fa53f0e92d1e5b1f82d07a4f647c7b0da827e42e58f29f355c084e32267b47a6c468325ea019909e885ae01323dad78c42c27cf49cebb7eafe457f460eb7dac511238e43
