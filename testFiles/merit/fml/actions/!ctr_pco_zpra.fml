:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !ctr_pco_zpra.fml
:: Utworzony: 12.11.2015
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności CTR_PCO_ZPRA - Przeglądanie godzin pracy pracowników
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Przeglądanie godzin pracy pracowników - główna formuła czynności CTR_PCO_ZPRA
::----------------------------------------------------------------------------------------------------------------------
::# permissions=UD_SKL,F_ZATR


\add_tab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Dodaje okno do okna grupowego
::   WE: _a - nazwa zakładki
::       _b - tabela
::       _c - okno grupowe
::----------------------------------------------------------------------------------------------------------------------
_b.grp_sel(_c,P,'CTR',_a,"
   VAR.CON:='';
   exec('ar_p','control')
",,,10,"
   exec('domyslny','schemat','PODZORG');
   UD_DEF.index('SYMBOL'); UD_DEF.prefix(UD_SCH.ref()); UD_DEF.first();
   exec('filtruj_p','schemat','CTR',UD_DEF.ref(),'','T','W')
",,,,'maximized_with_title');
task_attach('CTR_PCO_ZPRA');
_b.tab_splt(_c,,'horizontal','bottom');
_b.grp_sel(_c,G,'DODCON',,"
",,,,"",,,,'maximized_with_title');
UD_POM.ROK_KAL:=SSTALE.AR;
UD_POM.OKR_KAL:=SSTALE.AO;
exec('set_okr','!ctr_pco_zpra');
G.win_fml('DODCON',,'K','RN','ICON_BEFORE',"exec('g_icon','godziny')");
~~


\zm_okr_g
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AMK [2011]
:: OPIS: Zmiana okresu - godziny dla pracownikow
::  OLD: \zm_okr_g/skid_ktr.fml
::----------------------------------------------------------------------------------------------------------------------
UD_POM.win_edit('ROKOKR');
{? UD_POM.edit("exec('spr_okr_con_kk','control')")
|| exec('set_okr','!ctr_pco_zpra');
   grp_disp(P,'CTR',1)
?}


\set_okr
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Ustawia okres prezentowanych godzin
::----------------------------------------------------------------------------------------------------------------------
exec('ustaw_maski','godziny',UD_POM.OKR_KAL().POCZ~1,UD_POM.OKR_KAL().POCZ~2);
G.win_sel('DODCON');
G.hdr_sel();
G.hdr_sel(' - '+UD_POM.OKR_KAL().NAZ+'/'+UD_POM.OKR_KAL().ROK().NAZ);
mies_kal:=OKRO_F.NR


\aerokkal
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AMK [2011]
:: OPIS: Po redakcji pola UD_POM.ROK_KAL
::  OLD: \aerokkal/skid_ktr.fml
::----------------------------------------------------------------------------------------------------------------------
{? UD_POM.OKR_KAL<>null
|| OKRO_F.cntx_psh(); OKRO_F.index('ROK'); OKRO_F.prefix(UD_POM.ROK_KAL);
   {? ~OKRO_F.seek(UD_POM.OKR_KAL) || UD_POM.OKR_KAL:=null ?};
   OKRO_F.cntx_pop()
?};
UD_POM.efld_opt('ROKOKR','enable='+$(UD_POM.ROK_KAL<>null),UD_POM,'OKR_KAL');
1


\beokrkal
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AMK [2011]
:: OPIS: Przed redakcja pola UD_POM.OKR_KAL
::  OLD: \beokrkal/skid_ktr.fml
::----------------------------------------------------------------------------------------------------------------------
{? UD_POM.ROK_KAL<>null
|| UD_POM.ROK_KAL(); 1
|| 0
?}

:Sign Version 2.0 jowisz:1045 2021/09/17 15:16:55 d8971acf4dde4d0e05199f46955371af2e5a0af0969d85a899962bcd70dc8ef4c151d204b7de828959bb658b78770f135fce820185d1f1bdac5900a73726aca9163295f2a0aa89c5f8559bff9d2f48501a3973a6eb7316b857ffc4d84844f8e29016af4ddfd60aa35e6ec5fa2c1ef7b2c30d11af687b8bd109ce9f0d3be9864b
