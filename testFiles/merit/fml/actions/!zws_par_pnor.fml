:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_par_pnor.fml
:: Utworzony: 25.04.2017
:: Autor: areKc
::======================================================================================================================
:: Zawartość: Formuły czynności ZWS_PAR_PNOR - Rodzaje okresów rozliczeniowych.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: areKc [17.28]
:: OPIS: Definicja rodzajów okresów rozliczeniowych.
::   WE:
::   WY:
::  OLD: \def_okr/okres.fml
::----------------------------------------------------------------------------------------------------------------------
A_OKRN.cntx_psh();
A_OKRN.index('A_OKRN');
A_OKRN.prefix();
A_OKRN.win_edit('RED');
A_OKRN.win_sel('WER');
A_OKRN.select();
A_OKRN.cntx_pop();
~~


\a_okrn_del
::----------------------------------------------------------------------------------------------------------------------
::  UTW: DRO [17.28]
:: OPIS: Usuniecie rekordu tabeli z defnicją okresu rozliczeniowego.
::   WE:
::   WY:
::  OLD: \aokrndel/okres.fml
::----------------------------------------------------------------------------------------------------------------------
{? A_OKRN.count()=0
|| A_OKRN.del(1,1)
|| FUN.emsg('Usunięcie wiersza nie jest możliwe.'@)
?};
~~


\a_okrn_ae_kal
::----------------------------------------------------------------------------------------------------------------------
::  UTW: DRO [17.28]
:: OPIS: Edycja lub podgląd listy kalendarzy przypisanych do okresu.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
exec('kalendarz','okres')


\a_okrka_del
::----------------------------------------------------------------------------------------------------------------------
::  UTW: DRO [17.28]
:: OPIS: Usuniecie rekordu tabeli ze zdefiniowanymi kalendarzami dla okresu rozliczeniowego.
::   WE:
::   WY:
::  OLD: \aokrka/okres.fml
::----------------------------------------------------------------------------------------------------------------------
{? A_OKRKA.count()=0 & FUN.ask('Czy na pewno usunąć przypisanie kalendarza?'@)
|| A_OKRKA.del(1,1)
|| FUN.emsg('Usunięcie wiersza nie jest możliwe.'@)
?};
~~


\a_okrka_ae_rec
::----------------------------------------------------------------------------------------------------------------------
::  UTW: DRO [17.28]
:: OPIS: Funkcja rekord po w tabeli A_OKRKA.
::   WE:
::   WY:
::  OLD: \okr_kal_rpo/okres.fml
::----------------------------------------------------------------------------------------------------------------------
_spr:=__CHK.record2(A_OKRKA,'KALEND','Nazwa');
{? _spr=''
|| {? -(1+menu_txt())='p' || _ref:=A_OKRKA.ref() || _ref:=null() ?};
   A_OKRKA.cntx_psh();
   A_OKRKA.index('A_OKRKU');
   A_OKRKA.prefix(A_OKRKA.KALEND);
   {? A_OKRKA.first() & A_OKRKA.ref()<>_ref
   ||  FUN.emsg('Kalendarz "%1" jest już przypisany do okresu.'@[A_OKRKA.KALEND().NAZWA]);
      _spr:='KALEND'
   ?};
   A_OKRKA.cntx_pop()
?};
_spr

:Sign Version 2.0 jowisz:1028 2019/06/07 15:56:05 32b38c29691e12e13a5e836f32812ed93d0494f76cf947fedbfb6dd80a6ee85bc52c9a5c23a8f8746a73e9d5b545901a83a18dad9b897bf9a3db8b26721b3ff28d0e4416114185835460ecc549e7d573d90f139a89c2a92913dab387103ae85453ca07a330803494419a83a95ed98e8e9983abc1831e15a133cf8515488a1c24
