:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !poc_ofo_azoc.fml
:: Utworzony: 21.09.2017
:: Autor: RWR
::======================================================================================================================
:: Zawartość: Obsługa czynności POC_OFO_AZOC - Informacja o zakończeniu oceny.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.42]
:: OPIS: Informacja o zakończeniu oceny  - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# properties=SERVICE
::
::# kind=WE, symbol=ZO_OSOBA, type=_ZO_OSOBA, name=Wskazanie uczestnika sesji ocen, required=T, keyref=T
::
:: Wynik działania czynności. Parametr szczególnie istotny w przypadku uruchomienia czynności usługowej.
::# kind=WY, symbol=RESULT, type=STRING, name="Wynik czynności ((OK,BŁĄD,POMIŃ|xxx))", required=N
::
::# kind=WY, symbol=SUB, type=STRING, name=Temat, required=N
::# kind=WY, symbol=TO, type=MEMO, name=Odbiorca, required=N
::# kind=WY, symbol=BODYH, type=MEMO, name=Treść w formacie HTML, required=N
::
_args:=exec('zo_osoba_main_a','phr_poczta');
_args.warunek:="exec('warunek','!poc_ofo_azoc')";
_args.tytul:="exec('tytul','!poc_ofo_azoc')";
_args.tresc:="exec('tresc','!poc_ofo_azoc')";
params_exec('zo_osoba_main','phr_poczta',_args)


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.42]
:: OPIS: Informacja o zakończeniu oceny  - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
_tab:=params_exec('zo_osoba_desc','phr_poczta',,1);
{? _tab.ZAW_DANE='T'
|| 'Wyślij powiadomienie o zakończeniu oceny [Program: %1 (%2) | Oceniany okres: %3 - %4 | Termin: %5 | %6 %7 (%8)]'@@
      [_tab.NAZWA,_tab.RODZAJ,_tab.OKRES_OD,_tab.OKRES_DO,_tab.PLAN_DO,_tab.ZZ_NAZWISKO,_tab.ZZ_PIERWSZE,_tab.ZZ_PESEL]
|| 'Wyślij powiadomienie o zakończeniu oceny'@@
?}


\warunek
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.42]
:: OPIS: Formuła weryfikuje, czy bieżący rekord tabeli ZO_OSOBA może być podstawą wysłania powiadomienia.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
ZO_OSOBA.RODZAJ='O' & ZO_OSOBA.KOMPLET='T'


\tytul
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.42]
:: OPIS: Formuła, dla bieżącego rekordu tabeli ZO_OSOBA, zwraca napis będący tytułem powiadomienia.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
'Ocena pracownika - zakończenie'


\tresc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.42]
:: OPIS: Formuła, dla bieżącego rekordu tabeli ZO_OSOBA, zwraca napis będący treścią powiadomienia.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
_kobieta:=(ZZ_OSOBA.PLEC='K');

'<center><h4>Ocena pracownicza</h4></center>'+
'Dzień dobry.<br>'+
'Pragniemy poinformować, że zgodnie z obowiązującymi w <b>'+KST.NAZWA+'</b> procedurami w zakresie ocen pracowniczych '+
'zakończono Pan'+{? _kobieta || 'i' || 'a' ?}+' ocenę za okres od <b>'+ZO_PROC.OKRES_OD$6+' roku</b> do <b>'+
ZO_PROC.OKRES_DO$6+' roku</b>. '+
'Z jej wynikami może się Pan'+{? _kobieta || 'i' || '' ?}+' zapoznać na stronach naszego portalu pracowniczego.'+
'<br><br>'+
'Ta wiadomość została wygenerowana automatycznie - prosimy na nią nie odpowiadać.'

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:18 0a3161b0ea73d4b4a129fe1ac7e93d809e794f88535cf8044801826f0e74dbbb3825025723f1b06153727ac0bd9e49b3d810916c57849f3bb8a8f1e271d1930bdb7dd2eff7145ede68ba3e880d8ff20388fb366035e00b07a6d15a31917d0c74875ad31174b8f7ba9546b423ac5edde2777d31d61b9ca24d49c3d9323e8b87fc
