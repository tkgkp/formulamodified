:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_adm_bkup.fml
:: Utworzony: 29.08.2016
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności ZWS_ADM_BKUP - wykonanie kopii zapasowej bazy danych
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [17.00]
:: OPIS: Formuła główna czynności ZWS_ADM_BKUP
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::       context - [obj_new] obiekt służący do przekazywania kontekstu wywołania czynności
::----------------------------------------------------------------------------------------------------------------------
_in:=params_get().in;
_out:=params_get().out;
_mp:=params_get().mp;

::# properties=SERVICE,~USER,GRP_FIRM

::# kind=WE, symbol=ITG_FILE, type=STRING, name=Ścieżka do pliku z listą systemów (itg), required=T, keyref=N
::# kind=WE, symbol=ZIP_FILE, type=STRING, name=Ścieżka do pliku z kopią danych (zip), required=T, keyref=N
::# kind=WE, symbol=CFG_DIR, type=STRING, name=Ścieżka do katalogu konfiguracyjnego serwera, required=N, keyref=N
::# kind=WE, symbol=FULL, type=STRING, required=N, keyref=N, ^
::#          name=Czy w kopii umieszczać również pliki z katalogów wskazanych w deklaracji ścieżek?, ^
::#          fml_val="exec('edit_boolean','#edit',,'Czy w kopii umieszczać również pliki z katalogów wskazanych w deklaracji ścieżek?')"

::# kind=WY, symbol=STATUS, type=STRING, name=Status czynności, required=N
::# kind=WY, symbol=COMMAND, type=STRING, name=Komenda zakończona niepowodzeniem, required=N

_ret:=exec('backup','zws',_in.ITG_FILE,_in.ZIP_FILE,_in.CFG_DIR,{? _in.FULL='T' || 1 || 0 ?});
_out.STATUS:={? _ret.STATUS=1 || 'OK' || 'BŁĄD' ?};
_out.COMMAND:={? _ret.STATUS=1 || '' || _ret.TEXT ?};
_mp.save(,_out);
_mp.done();
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [17.00]
:: OPIS: Czynność ZWS_ADM_BKUP - formuła na opis na liście ToDo
::----------------------------------------------------------------------------------------------------------------------
'Wykonaj kopię zapasową bazy danych.'@@

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:22 affe7f763ef81dff9f55fceb8899a368234d06de1907040736a37f4abb746e583250478d17e331a2fec2115de36a5d73cb9b20d15f63050c548c1e3799791e730f7c7aefdaf6bb2f5d9f30e2e71240e377d37a55cab3b7453f6c7c7420c8e71d79f76df7f724fc2c28a3fcb31119eb9d54296ddada86c676e3a90d1ed7437c94
