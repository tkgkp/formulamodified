:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !kkh_kon_pkon.fml [20.14]
:: Utworzony: 2019.11.27
:: Autor: MW
::======================================================================================================================
:: Zawartosc: Formuły czynności KKH_KON_PKON - Przegląd kontaktów kontrahenta (kopia dotychczasowej ZWS_PAR_KKKW)
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MW [20.14]
:: OPIS: Formuła główna czynności KKH_KON_PKON - Przegląd kontaktów kontrahenta
::   WE: _a - [obj_new] - parametry wejsciowe czynnosci
::       _b - [obj_new] - parametry wewnetrzne czynnosci
::       _c - [obj_new] - parametry wyjsciowe czynnosci
::       _d - obiekt odpowiedzialny za obsluge procesu
::----------------------------------------------------------------------------------------------------------------------
::# properties=GRP_FIRM
VAR_DEL.delete('__CTR');
__CTR:=obj_new('BTAB', 'BBLOB','TAB','WIN_ID','WIN_ACR','DIR_SEP','DND');
__CTR.BTAB:='DOKUMZ';
__CTR.TAB:='DOKUM';
__CTR.BBLOB:='DOKUM';
__CTR.WIN_ACR:=exec('mk_ctr','bloby','kont_dokz_ctr',':');
__CTR.WIN_ID:=-(1-__CTR.WIN_ACR);
__CTR.DIR_SEP:=exec('sep','#file',1);
__CTR.DND:=1;
__PAR188:=PAR_SKID.get(188)='T';
ZDARZT.win_fml('ZDARZT2',,'ICON',,'ICON_BEFORE',"ZDARZT.ICON");
_grp_sel:=DOKUM.grp_make('Kontakty kontrahenta'@,,'dokum_gr');
_far:="exec('kont_sz_akt','kontrahent')";
_far1:=$('exec(\'dokum_rfr\',\'bloby\',\':'+__CTR.WIN_ID+'\',\''+__CTR.WIN_ACR+'\')');
_befor:="exec('bobs_dokumz','bloby')";
_fb:="KHVZ.KONTAKTY:='T'; DOKUM.index('KH'); DOKUM.prefix(KH.ref()); DOKUM.win_edit('REDK')";
__KONTIN:=exec('hasAction','users','KKH_KON_DRKO')=0;
DOKUM.grp_sel(_grp_sel,,'WERK1',,_far; _far1,,,,_fb,"KHVZ.KONTAKTY:='N'",,,'maximized');
DOKUM.grp_splt(_grp_sel,,'horizontal','tab2',18);
DOKUM.grp_ctr(_grp_sel,DOKUMZ,__CTR.WIN_ACR,__CTR.WIN_ID,,,,,,,_befor,,,'maximized');
DOKUM.win_sel(_grp_sel);
DOKUM.select();
VAR_DEL.delete('__KONTIN');
~~

:Sign Version 2.0 jowisz:1048 2023/06/23 14:09:41 6df04f290d2beb09afb645583226ebc9637254997f0a4ec498d787236790cb3bf980300609d115fc3d6bf3e6c99756fe5327072846217bf5694f38d20f70c718e32457d835e59b29a7922820c2786db07270be87b10b807ab553fa13b1602e61c48dfc0ba35552579401a91586a4b0b5573a93b069ed3cd919e83561548645df
