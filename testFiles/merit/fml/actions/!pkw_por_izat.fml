:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !pkw_por_izat.fml
:: Utworzony: 04.06.2016
:: Autor: TMR
::======================================================================================================================
:: Zawartość: Obsługa czynności PKW_POR_IZAT - Przeglądanie danych o zatrudnieniu - webterm.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Przeglądanie danych o zatrudnieniu - główna formuła czynności.
::----------------------------------------------------------------------------------------------------------------------
exec('pkw_por__zat','pkw_por')


\h_web_wer_gr_ob
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Formuła na "Przed obsługą" dla okna WEB_WER tabeli H w oknie grupowym
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
exec('set_env','pkw_por');
:: Jest to okno w grupie, którego wartość zależy od okna wertowania WEB_WER tabeli H
:: (zależność ustawiona w MacroBUILDERZe) dlatego konieczne jest podczytanie aktualnego rekordu z okienka wertowania
:: i ustawienie się na nim w okienku redagowania.
:: Dla pustej dziedziny okienka wertowania cała ta formuła się nie wykonuje.
_ref:=web_win_ref('H_UM_WEB_WER');
H.index('HISTUM');
H.prefix(_ref);
~~


\web_wz_bank
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Formuła na "Wzorzec" dla pola ZWAL - Ustawia słownik banków
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
''


\h_um_szczegoly_a
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Obsługa akcji "Szczegóły" tabeli H_UM
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
{? ~exec('exist','#record') || return(~~) ?};
exec('set_env','pkw_por');

H_UM.OKR_UZAS();
H_UM.RU();
H_UM.memo_get(,'UZASDN');
H.index('HISTUM');
H.prefix(H_UM.ref());
H.first();
_we:='WEB_RED';
exec('czytaj','#stalesys',,KST_PAR);
exec('h_efld_opt','pracownik','*',H_UM,_we);

H_UM.web_display(_we,,"web_top_tab().web_eclose(web_top_win())")


\h_szczegoly_a
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Obsługa akcji "Szczegóły" tabeli H.
::       Ponieważ webTerm nie umożliwia budowania okien redagowania ze składowych (innych okien redagowania), to dane
::       są prezentowane w oknie grupowym - wertowania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
{? ~exec('exist','#record') || return(~~) ?};
exec('set_env','pkw_por');

H.get();
H.web_cntx_save(1);
H.UMOWA();
:: ustawienie właściwości pól
_we:='WEB_GR';
exec('czytaj','#stalesys',,KST_PAR);
:: zakładka "Dane podstawowe"
exec('h_efld_opt','pracownik','*',H,_we,'H_WEB_A');

:: zakładka "Zatrudnienie"
exec('h_efld_opt','pracownik','*',H,_we,'H_WEB_Z');

:: zakładka "Wynagrodzenie"
exec('h_efld_opt','pracownik','*',H,_we,'H_WEB_P');

:: zakładka "Pozostałe dane do umowy"
exec('h_efld_opt','pracownik','*',H,_we,'H_WEB_E');

H.web_select(_we)


\h_web_gr_ob
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TMR [17.00]
:: OPIS: Przed obsługą dla okien redagowania w oknie grupowym
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
exec('set_env','pkw_por');

H.web_cntx_load(1);
H.CP();
H.KZ();
H.KDSW();
H.OS_ADRES();
H.P();
H.POZWORG();
H.RU();
H.ST();
H.UMOWA();
H.WAL();
H.WYDZIAL();
H.ZWAL();
H.S2P();
H.S3P();
H.memo_get(,'INNE');
~~

:Sign Version 2.0 jowisz:1028 2019/06/07 15:55:54 776ce817131a574c6d3850006eb1e55ce3e878aff226e886bb875b0d9003ac0a0bf2b431ecc4756307c0fe271af23fe94e40fe0855bfb3b5f1856b507e710e7d4639f006d5fb227d7738bd95d08f150a5614fe1e65b016d6e701bfd900cc0b3c94206a3c87921af17f85210b593cb5042ee7186c01816a7e31c5b5be99d315e6
