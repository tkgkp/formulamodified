:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !ctr_pco_zpwn.fml
:: Utworzony: 12.11.2015
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności CTR_PCO_ZPWN - Przeglądanie podziałów wynagrodzeń
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Przeglądanie podziałów wynagrodzeń - główna formuła czynności CTR_PCO_ZPWN
::----------------------------------------------------------------------------------------------------------------------
::# permissions=UD_SKL,F_ZATR


\add_tab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Dodaje okno do okna grupowego
::   WE: _a - nazwa zakładki
::       _b - tabela
::       _c - okno grupowe
::----------------------------------------------------------------------------------------------------------------------
MBNwin1:=exec('mod_win','control',15);
_b.grp_sel(_c,SKID_MBN,MBNwin1,_a,"
   SmbnP:=ZM.SKID_MBN:=UD_POM.SKID_MB:=SKID_MBN.ref();
   grp_disp(P,'CTR',1,1);
   ~~
",,,,,,,,'maximized_with_title');
task_attach('CTR_PCO_ZPWN');
task_attach('CTR_PCO_ZPWD');
_b.tab_splt(_c,,'vertical','right');
_b.grp_sel(_c,P,'CTR',,"
   exec('ar_p','control');
   exec('opiszwym','control');
   exec('con_kk_title','control','WER')
",,,10,"
   SKID_MBN.f_clear();
   VAR.CON:='P';
   exec('domyslny','schemat','PODZORG');
   UD_DEF.index('SYMBOL'); UD_DEF.prefix(UD_SCH.ref());UD_DEF.first();
   exec('filtruj_p','schemat','CTR',UD_DEF.ref(),'P','T','W');
   SKID_MBN.index('TYP'); SKID_MBN.prefix('P');
   {? SKID_MBN.ref()=null | SKID_MBN.TYP<>'P'
   || SKID_MBN.first();
      SmbnP:=ZM.SKID_MBN:=UD_POM.SKID_MB:=SKID_MBN.ref()
   ?};
   {? var_press('SmbnP')>0 || SKID_MBN.seek(SmbnP) ?};
   grp_disp(SKID_MBN,MBNwin1,,1)
",,,,'maximized_with_title');

_b.tab_splt(_c,'right','horizontal','bottom');
_b.grp_sel(_c,CON_KK,'WER',,"
",,,,"",,,,'maximized_with_title');
VAR.CON:='P';
UD_POM.ROK_KAL:=SSTALE.AR;
UD_POM.OKR_KAL:=SSTALE.AO;
SmbnP:=null;
exec('set_okr','control','WER');
::G.win_fml('DODCON',,'K','RN','ICON_BEFORE',"exec('g_icon','godziny')");
~~

:Sign Version 2.0 jowisz:1045 2022/06/30 14:22:48 e2f0a03cf3c3cdd88479ed2b105039a4fff357610986f368db322b7ebf88ed00ed2149c37aace39bf1181acb29c23083ddbb8e1bcbae83fb2b077005f5504540773f57f4fa52a381bceda306544c40ff19a28e24ec49942aca7810664023f1b25fd0868c1395dbc42a9d88bb5760cba61f238722a22f889a7b95f102b63193bd
