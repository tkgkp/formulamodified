:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !ctr_pco_zpwf.fml
:: Utworzony: 24.05.2015
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności CTR_PCO_ZPWF - Definicje podziałów dla umów-zleceń
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Definicje podziałów dla umów-zleceń - główna formuła czynności CTR_PCO_ZPWF
::----------------------------------------------------------------------------------------------------------------------
::# permissions=UD_SKL,F_ZATR
exec('set_fml','control');
SKID_MBN.actions('WER','');
CON_KW.index('CON_KWH'); CON_KW.win_edit('REDP');
CON_KH.win_edit('RED');
_okno:=UD_DEF.grp_make('Zleceniobiorcy',"
   UD_POM.SKID_MB:={? SKID_MBN.first() || SKID_MBN.ref() || null ?};
   exec('set_enabled2','control');
   grp_disp(SKID_MBN,SKID_MBN.win_sel('?'))
",'uddeforg');
UD_DEF.grp_sel(_okno,UD_DEF,'NAW_MIN',,"
   exec('filtruj_p','schemat','CTR',UD_DEF.ref(),'Z','T','W');
   grp_disp(P,'CTR',1)
",,,20,"",,,,'maximized_with_title');
UD_DEF.grp_splt(_okno,,'horizontal','bot');
_om:=exec('mod_win','control');
SKID_MBN.win_sel(_om);
UD_DEF.grp_sel(_okno,SKID_MBN,_om,,"
   UD_POM.SKID_MB:=SKID_MBN.ref();
   exec('set_enabled2','control');
   grp_disp(P,'CTR',1)
",,,,,,,,'maximized_with_title');
UD_DEF.grp_splt(_okno,,'vertical','left');
UD_DEF.grp_sel(_okno,P,'CTR',,"
   exec('ar_p','control')
",,,8,"",,,,'maximized_with_title');
UD_DEF.grp_splt(_okno,'left','horizontal','bottom');
UD_DEF.grp_sel(_okno,CON_KH,'WER_Z',,"
   _ref:={? CON_KH.get() || CON_KH.ref() || null ?};
   CON_KW.index('CON_KWH');
   CON_KW.prefix(_ref);
   CON_KW.actions('WER_Z',{? _ref || 'Z:Z' || 'ZD:ZD' ?},,1);
   grp_disp(CON_KW,'WER_Z')
",,,8,"
   exec('set_enabled2','control')
",,,,'maximized_with_title');
UD_DEF.grp_splt(_okno,'bottom','horizontal','bottom2');
UD_DEF.grp_sel(_okno,CON_KW,'WER_Z',,,,,,"
   exec('set_enabled','control');
   {? ~CON_KW.get() & ~CON_KH.get()
   || CON_KW.actions_grayed('WER_Z',':I')
   || CON_KW.actions_grayed('WER_Z')
   ?}
",,,,'maximized_with_title');
exec('domyslny','schemat','PODZORG');
UD_DEF.index('SYMBOL'); UD_DEF.prefix(UD_SCH.ref());
exec('__F_ZATR','object');
exec('CON','object');
_vc:=VAR.CON;
VAR.CON:='X'; def_prac:=1;
__F_ZATR.mod('Z');
SKID_MBN.cntx_psh();
SKID_MBN.index('EWID'); SKID_MBN.prefix('T','O');
CON_KH.actions('WER_Z','Z:Z');
UD_DEF.win_sel(_okno);
UD_DEF.select();
SKID_MBN.cntx_pop();
VAR.CON:=_vc;
CON_KW.win_edit('REDZ');
CON_KH.actions('WER_Z');
VAR_DEL.delete('def_prac')


\imp_profil_rh
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PK [2006]
:: OPIS: Akcja Import w tabeli CON_KW dla rachunkow umowy zlecenia
::  OLD: \imp_profil_rh/kontrol.fml
::----------------------------------------------------------------------------------------------------------------------
CON_KH.cntx_psh();
CON_KH.index('CON_KHP'); CON_KH.prefix('Z',P.ref(),CON_KH.SKID_MB);
{? CON_KH.first()
|| CON_KH.win_sel('WER_Z'); CON_KH.actions('WER_Z',,'T');
   {? CON_KH.select(,,,'dpuO')
   || __error:=0;
      _ref:=CON_KH.ref(); CON_KH.cntx_pop();
      exec('kopia_kontr','control',CON_KH.ref(),_ref,1);
      VAR_DEL.delete('__error')
   || CON_KH.cntx_pop()
   ?}
|| CON_KH.cntx_pop()
?}

:Sign Version 2.0 jowisz:1028 2019/06/07 15:55:39 a6e94c0351bcc9255aefaeec29088ace8f7e148e0c473f150e58332f1b34c7498c1efe8c52529593ed77e3e354afe84e4abb037187ed2196cd7470f0258b9ce1edc5c1226c8c2c2e4a30b45b4ca8ae9cb0385b83a3b5c19c7213cf65c6d1f86e219161b3e9a5a35fd23571a89db5e6b58b89792d7b416311b49e9756ca413a5b
