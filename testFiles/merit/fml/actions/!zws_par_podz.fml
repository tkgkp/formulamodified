:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !ctr_rap_zzup.fml
:: Utworzony: 27.11.2017
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności ZWS_PAR_PODZ - Uprawnienia do podziałów controllingowych
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [18.02]
:: OPIS: Uprawnienia do podziałów controllingowych - główna formuła czynności ZWS_PAR_PODZ
::----------------------------------------------------------------------------------------------------------------------
::# properties=GRP_FIRM
exec('czytaj','#stalesys');
USERS.actions('SLO2_1','S');
BPMN.SYM_DOM:='OBG';
_firma:=REF.FIRMA; REF.FIRMA:=REF.S_FIRMA;
_tab:=K_ROLE;
_grp:=_tab.grp_make(,"exec('bf_k_raporty','!zws_par_podz')",'ctr_rpp');
:: Uprawnienia do danych
exec('add_tab','!zws_par_podz','Zakresy danych'@,_tab,_grp);
_tab.win_sel(_grp);
_tab.hdr_sel();
_tab.hdr_sel('Definicje uprawnień do podziałów');
_tab.select();
REF.FIRMA:=_firma;
VAR_DEL.delete('firstR');
USERS.f_clear();
~~


\add_tab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Dodaje okno do okna grupowego - Wyswietla role z uprawnieniami do podziałów
::   WE: _a - nazwa zakładki
::       _b - tabela
::       _c - okno grupowe
::  OLD: \k_role/skid_con.fml
::----------------------------------------------------------------------------------------------------------------------
exec('init_win','ctr_podz');
UNPAR.P1_BV:='';
K_ROLE.index('NAZWA'); K_ROLE.prefix(REF.S_FIRMA,BPMN.SYM_DOM);
K_ROLE.win_edit('RED_OBG');
_b.grp_sel(_c,K_ROLE,'WER',,"exec('arf_k_role','ctr_podz')",,,,,,,,'maximized_with_title');
_b.grp_splt(_c,,'horizontal','panel1',10);
_b.grp_sel(_c,K_ROLE_U,'WER',,,,,,,,,,'maximized_with_title');
_b.grp_splt(_c,'panel1','vertical','panel2');
_b.grp_sel(_c,USERS,'SLO2_1',,"
   {? USERS.sel_size()=0
   || exec('bf_k_raporty','!zws_par_podz',0)
   ?}
",,,,,"
   VAR_DEL.delete('UsrRole');
   {? USERS.sel_size()
   || UsrRole:=USERS.sel_aget()
   ?};
   1
",,,'maximized_with_title');
~~


\bf_k_raporty
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [2011]
:: OPIS: Po wyswietleniu okienka grupowego tabeli K_RAPORTY
::----------------------------------------------------------------------------------------------------------------------
USERS.win_sel('SLO2_1');
USERS.clear();
USERS.clear();
USERS.f_set('KOD');
{? var_press('_a')<=0 | _a
|| grp_disp(USERS,'SLO2_1')
?};
~~

:Sign Version 2.0 jowisz:1048 2023/06/23 14:09:40 6788abf7d31a9331b01ad58c0f62f2bf4d4948a3d1bb30abb0c508f0e7ebb94e40327a0289f48bbaef33d57a2d1d757c8ba264249bfdfa3895650be79c2191a6ef89d60ac28cfdb9f3ecd3d1f541c2c9f7e3d07c4b6e654f632e5db6dd9d3af9ea0c0c0da5c3e80f6a3e0ccd716385e3618f0522f78427588e1275c35a2e39dc
