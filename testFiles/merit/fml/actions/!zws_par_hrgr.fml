:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_par_hrgr.fml
:: Utworzony: 17.05.2021
:: Autor: AFI
::======================================================================================================================
:: Zawartość: Grupy wniosków HR Portal w obiegu
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AFI [21.37]
:: OPIS: Formuła główna czynności ZWS_PAR_HRGR
::----------------------------------------------------------------------------------------------------------------------
ETYP_GRP.cntx_psh();
ETYP_GRP.index('N'); ETYP_GRP.prefix();
ETYP_GRP.win_sel('WER');
ETYP_GRP.select();
ETYP_GRP.cntx_pop()


\add_grp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AFI [21.37]
:: OPIS: Dołącz grupę dokumentów w obiegu
::----------------------------------------------------------------------------------------------------------------------
ETYP_GRP.win_edit('RED');
ETYP_GRP.blank();
{? ETYP_GRP.edit("exec('valid_grp','!zws_par_hrgr')") || ETYP_GRP.add() ?}


\valid_grp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AFI [21.37]
:: OPIS: Walidacja po redakcji grupy
::----------------------------------------------------------------------------------------------------------------------
_dalej:='';
{? ETYP_GRP.N=''
|| FUN.info('Nie wprowadzono skrótu.'@); _dalej:='N'
?};
{? ETYP_GRP.NAZ='' & _dalej=''
|| FUN.info('Nie wprowadzono nazwy grupy.'@); _dalej:='NAZ'
?};
{? _dalej=''
|| _popraw:=(-menu_txt()='popraw');
   {? _popraw || _ref:=ETYP_GRP.ref() ?};
   ETYP_GRP.cntx_psh();
   ETYP_GRP.index('N'); ETYP_GRP.prefix(REF.FIRMA,ETYP_GRP.N,ETYP_GRP.N);
   {? ETYP_GRP.first() & {? _popraw || ETYP_GRP.ref()<>_ref || 1 ?}
   || FUN.info('Istnieje już grupa o podanej nazwie.'@); _dalej:='NAZ'
   ?};
   ETYP_GRP.cntx_pop()
?};
_dalej


\edt_grp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AFI [21.37]
:: OPIS: Edycja grupy
::----------------------------------------------------------------------------------------------------------------------
ETYP_GRP.win_edit('RED');
{? ETYP_GRP.edit("exec('valid_grp','!zws_par_hrgr')") || ETYP_GRP.put() ?}


\del_grp
::----------------------------------------------------------------------------------------------------------------------
::  UTW: AFI [21.37]
:: OPIS: Usuwanie grupy
::----------------------------------------------------------------------------------------------------------------------
{? ETYP_GRP.count()<>0
|| FUN.info('Grupa wykorzystywana w systemie. Usunięcie niemożliwe.'@)
|? FUN.ask('Usunąć grupę?'@)
|| ETYP_GRP.del()
?}

:Sign Version 2.0 jowisz:1045 2021/09/17 15:17:02 13d21ffb823f683886daab2b36381ee3d1871144fc371d626804e498f42be65536e9e3212a6667e1ccc9df432fbbb4fd06ff9c1b36d2a32b96ee48c5ae2f17814a06d877fdcf24376af2c64daa22e5b465068935f12839aef42c7bad4059fa8503d774dea1b45edf0320edb705b5ae5d36617a028eecbf43a6f634218abbd434
