:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zws_adm_tran.fml
:: Utworzony: 30.04.2019
:: Autor: Mario
::======================================================================================================================
:: Zawartość: Formuły czynności ZWS_ADM_TRAN - wykonanie transferu bazy danych
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [19.22]
:: OPIS: Formuła główna czynności ZWS_ADM_TRAN
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::       context - [obj_new] obiekt służący do przekazywania kontekstu wywołania czynności
::----------------------------------------------------------------------------------------------------------------------
_in:=params_get().in;
_out:=params_get().out;
_mp:=params_get().mp;

::# properties=SERVICE,~USER,GRP_FIRM

::# kind=WE, symbol=ITG_FILE, type=STRING, name=Ścieżka do pliku z listą systemów (itg), required=N, keyref=N
::# kind=WE, symbol=ZIP_FILE, type=STRING, name=Ścieżka do pliku z kopią danych (zip), required=N, keyref=N
::# kind=WE, symbol=CFG_DIR, type=STRING, name=Ścieżka do katalogu konfiguracyjnego serwera, required=N, keyref=N
::# kind=WE, symbol=COPY, type=STRING, required=N, keyref=N, ^
::#          name=Czy tworzyć kopię bazy danych przed transferem?, ^
::#          fml_val="exec('edit_boolean','#edit',,'Czy tworzyć kopię bazy danych przed transferem?')"


::# kind=WY, symbol=STATUS, type=STRING, name=Status czynności, required=N
::# kind=WY, symbol=COMMAND, type=STRING, name=Komenda systemowa transferu, required=N
::# kind=WY, symbol=TEXT, type=MEMO, name=Wynik komendy transferu, required=N

_ret:=exec('transfer','zws',_in.ITG_FILE,_in.ZIP_FILE,_in.CFG_DIR,{? _in.COPY='N' || 0 || 1 ?});
_out.STATUS:={? _ret.STATUS=1 || 'OK' || 'BŁĄD' ?};
_out.COMMAND:=_ret.COMMAND;
_out.TEXT:=_ret.TEXT;
_mp.save(,_out);
_mp.done();
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [19.22]
:: OPIS: Czynność ZWS_ADM_TRAN - formuła na opis na liście ToDo
::----------------------------------------------------------------------------------------------------------------------
'Wykonaj transfer bazy danych.'@@

:Sign Version 2.0 jowisz:1048 2021/04/09 15:19:42 7e318b32e16deb9823d690be6d073e62088401e3bf15c3eb3daebbecf9d467775dfbb54b2eae6826fc743e9e279eebed83227a059c9cdddced145a6e4564372feb08a58782af38a04675864d45a8b4966910c5f5bf5701cff8b7c07ef2700cec778cf7a4703663f4d54ecec717c324d11f2c7a634c3f5a8a1b51676ecf094485
