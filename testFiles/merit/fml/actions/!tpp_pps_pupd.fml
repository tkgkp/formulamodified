:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !tpp_pps_pupd.fml
:: Utworzony: 01.08.2018
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności TPP_PPS_PUPD - Aktualizacja pozycji planu strategicznego
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Główna formuła czynności aktualizacji pozycji planu strategicznego (TPP_PPS_PUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
_out:=params_get().out;
_mp:=params_get().mp;

::# permissions=ODDZ
::# properties=SERVICE

::# kind=WY, symbol=RESULT, type=STRING, ^
::#          name="Wynik czynności (OK, gdy pozycje planu zostały zaktualizowane)", required=N
{? var_pres('RESULT',_out)<>type_of(~~) & var_pres('RESULT',_out)<>type_of('') || return() ?};

_result:=0;
_can_continue:=1;

{? _mp.isService()
|| _result:=exec('px_poz_update','px_poz',0)
|? _mp.akcja()='URUCHOM'
|| _result:=exec('px_poz_update','px_poz',1)
|| _can_continue:=0
?};
{? _can_continue>0
|| {? _result=0
   || _out.RESULT:='BŁĄD'
   || _out.RESULT:='OK'
   ?};
   _mp.save(,_out);
   _mp.done()
?};
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Opis dla czynności aktualizacji pozycji planu strategicznego (TPP_PPS_PUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       mp  - obiekt odpowiedzialny za obsługę procesu
::   WY: zwraca opis Zadania
::----------------------------------------------------------------------------------------------------------------------
_desc:='Zaktualizuj pozycje planu strategicznego'@@;
_desc

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:21 85a72c36ecc82f9a2f548b034e9bec60f1b36838337d1aae5bd908996016b4607cf21bfe4e5fbd9fcc9b3692e8693edbcf6cd68a25bba758a833a9182b4a97b18a7e1f9c827b73a74af0062557f288cb7dea1f62b960e6d3c9c70cb3248f8603a2fbc59b101732011cf6cc0069e68258cad7506ee732a1ec237ac423f3f17570
