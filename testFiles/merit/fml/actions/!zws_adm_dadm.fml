:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzezone
::======================================================================================================================
:: Nazwa pliku: !zws_adm_dadm.fml
:: Utworzony: 20.11.2014
:: Autor: Mario
::======================================================================================================================
:: Zawartosc: Formuły czynnosci ZWS_ADM_DADM
::            Kasowanie danych, odtwarzanie indeksów, formuła, zapytanie SQL, O systemie
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [17.00]
:: OPIS: Czynność ZWS_ADM_DADM - formuła główna
::   WE: _a - [obj_new] - parametry wejsciowe czynności
::       _b - [obj_new] - parametry wewnętrzne czynności
::       _c - [obj_new] - parametry wyjściowe czynności
::       _d - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
::# properties=GRP_FIRM
FUN.info('Czynność nie może być wywołana z tego miejsca.'@);
_d.done();
~~


\sys_sort
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MAKO [2010]
:: OPIS: Odtwarzanie indeksów
::----------------------------------------------------------------------------------------------------------------------
sys_sort();
''


\sys_erase
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MAKO [2010]
:: OPIS: Kasowanie danych użytkowych
::----------------------------------------------------------------------------------------------------------------------
sys_erase();
''


\adm_form
::----------------------------------------------------------------------------------------------------------------------
::  UTW: IFZ [2008]
:: OPIS: wywołanie formuły napisanej w języku Formula +
::----------------------------------------------------------------------------------------------------------------------
exec('debug','debug');
''


\adm_sql
::----------------------------------------------------------------------------------------------------------------------
::  UTW: IFZ [2008]
:: OPIS: wywołanie zapytania SQL
::----------------------------------------------------------------------------------------------------------------------
SQL20.run();
undefine();
''


\adm_sel_desktop
::----------------------------------------------------------------------------------------------------------------------
::  UTW: Mario [17.00]
:: OPIS: wywołanie edycji pulpitów
::----------------------------------------------------------------------------------------------------------------------
exec('select','#desktop');
''


\info_sys
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [2006]
:: OPIS: Wyświetla informacje o systemie
::----------------------------------------------------------------------------------------------------------------------
exec('czytaj','#stalesys',,XINFO);
__Wersja:=exec('wersja','#system');
__Pakiet:=': '+'Zintegrowany system do zarządzania przedsiębiorstwem'@;
_producent:=exec('producent','#system');
_lic:=XINFO.NAZ;
_system:='%1 (%2: %3)'[exec('nazwa','#system'),'wersja'@,__Wersja];
_platformaKlient:='Platforma klienta: %1'@[{? (2+sys_name())='U_' || ~-(2-sys_name()) || ~-sys_name() ?}];
_platformaSerwer:='Platforma serwera: %1'@[{? (2+sys_name(1))='U_' || ~-(2-sys_name(1)) || ~-sys_name(1) ?}];
FUN.info(
   '\n'+_producent+'\n'+
   '\n'+_system+'\n'+
   '\n'+_platformaKlient+'\n'+
   '\n'+_platformaSerwer+'\n'+
   '\n'+
   '\n'+'LICENCJOBIORCA:'@+'\n'+
   '\n'+_lic+'\n',
   __Pakiet
);
''


\adm_json
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: wywołanie json
::----------------------------------------------------------------------------------------------------------------------
undefine();
define('JSON','','request',,3072,120);
_ok:=def_btn('text='+'Uruchom'@,"'key:F2'");
def_btn('text='+'Debug'@,"exec('adm_json_run','!zws_adm_dadm',1);''");
def_btn('text='+'Anuluj'@,"'key:Esc'");
def_bopt(_ok,'default=1');
{!
|? def_edit(,'Wklej żądanie'@)
|! exec('adm_json_run','!zws_adm_dadm', 0)
!};
''


\adm_json_run
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: wywołanie json
::----------------------------------------------------------------------------------------------------------------------
{? do_state() > 0 || undo(); end() ?};
_rs:=sql('select /* + EMPTY_TAB_OUT_OF_TRANSACTION */ SPACE(255) "TXT", 0 "SORT" from "SYSLOG" where 0=1 order by 2');
{? _a || debug() ?};
json_request(DEFINE.JSON, _rs);
_show:=sql('select TXT from :_a',_rs);
_w:=_show.mk_sel(DEFINE.JSON,,1);
_show.win_sel(_w);
_show.select();
obj_del(_rs);
obj_del(_show)


\adm_univers
::----------------------------------------------------------------------------------------------------------------------
::  UTW: mario [17.00]
:: OPIS: wywołanie wydruku uniwersalnego
::----------------------------------------------------------------------------------------------------------------------
{? var_pres('UNIVERS')<100
||
   UNIVERS:=obj_new(@.CLASS.UNIVERS)
?};
UNIVERS.univers();
''


\adm_web_debug
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [20.42]
:: OPIS: Debugger żądań webTerm'a.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
exec(,'__web_debug');
_web_debug:=obj_new(@.CLASS.WEB_DEBUG);
_web_debug.run();
''


:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:22 391046424ee7998140276df076ede75bc6ef2641a9e5eee91355a60f680cc7518774c11e818a7bb316dc08716f6505dde3d446fa99c5b36baa1e7e27fbee87b546c58e7745ed9492bb92b42cfa03dbafa50383f99d3a78bc1eab83f826c536f101eaad5db0e20b190e22771e309c30d6ee4da2e7d376f54f406e360753a12cac
