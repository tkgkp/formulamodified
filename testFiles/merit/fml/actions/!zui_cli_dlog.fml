:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !zui_cli_dlog.fml
:: Utworzony: 14.05.2021
:: Autor: [MW]
::======================================================================================================================
:: Zawartość: Formuły czynności ZUI_CLI_DLOG - Czyszczenie rejestru zdarzeń
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: [MW] [21.37]
:: OPIS: Formuła główna czynności
::       UWAGA. Do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
::# properties=SERVICE,GRP_FIRM
::# kind=WE, symbol=DNI,     type=NUMBER,   name=Ilość dni wstecz do której usuwać rejestr zdarzeń,   required=N
::# kind=WY, symbol=RESULT, type=STRING, name="Wynik czynności (OK, BŁĄD)", required=N

_mp:=params_get().mp;
_in:=params_get().in;
_out:=params_get().out;

{? var_pres('DNI',_in)<>type_of(0) | _in.DNI<0
|| _in.DNI:=30;
   _mp.save('IN')
?};

_akcja:=_mp.akcja();
_service:=_mp.isService();

{? _in.DNI<0
|| _mp.error('Nieprawidłowy parametr czynności.'@)
|| _dt_od:=date(0,0,0);
   _dt_do:=date()-_in.DNI;
   _res:=mwac_log_clear(_dt_od,_dt_do,1);
   {? _res>=0
   || _out.RESULT:='OK'
   || _out.RESULT:='BŁĄD'
   ?};
   _mp.save(,_out);
   _mp.done()
?};

~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MW [21.37]
:: OPIS: Formuła na opis czynności na liście zadań
::----------------------------------------------------------------------------------------------------------------------
'Uruchom czyszczenie rejestru zdarzeń synchronizacji'@@

:Sign Version 2.0 jowisz:1045 2021/09/17 15:17:02 27ae9d415225714d673ab06c7a4b5b34b7b51065d0478ae04cd96fdf41dc17d21e5cf450529bdcfd05e64a0bcbc7f9116d61b8b90fe94a664cf2c04064db94ec2ac861911b942d26a73119a9df37004faaf292cbace4703eab8dbe32aa30c22b0f34bb95d02a0476cc27d24218c1509081045689e6719f2ac4ea00ef1eca6182
