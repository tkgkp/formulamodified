:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !fks_ewi_zasd.fml
:: Utworzony: 12.11.2015
:: Autor: PJ
::======================================================================================================================
:: Zawartość: Formuły czynności FST_EWI_ZASD - Przegląd - uproszczona kartoteka środków
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PJ [17.00]
:: OPIS: Przeglądanie środków, kartoteka uproszczona - główna formuła czynności FST_EWI_ZASD.
::----------------------------------------------------------------------------------------------------------------------
::# permissions=FJKS
::
exec('srsr','!fst_ewi_zasd')


\srsr
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PJ [17.00]
:: OPIS: Przeglądanie środków trwałych, kartoteka uproszczona - główna formuła czynności FST_EWI_ZASD.
::----------------------------------------------------------------------------------------------------------------------
EDIT_ES.R:='';
EDIT_ES.RODZ:='';
SRD.selectAssets()


\srst_show
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PJ [17.00]
:: OPIS: Formuła na Wyświetl w tabeli SRST
::----------------------------------------------------------------------------------------------------------------------
SRD.showSimpleAsset()


\br_srst
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PJ [17.00]
:: OPIS: Formuła na rekord przed tabeli SRST
::----------------------------------------------------------------------------------------------------------------------
SRST.SRSR();
SRD.REF:=SRSR.ref();

_win:=cur_win(1,1);
:: zestaw środków
{? SRST.GRP='T'
|| EDIT_ES.SRST:=SRST.ref();
   EDIT_ES.SRSR:=SRSR.ref();
   EDIT_ES.Z_NST:=SRST.NST;
   EDIT_ES.Z_NRI:=SRST.NRI;
   _grayed:='';
   _default:='N'
|? SRST.GRP='E'
||
:: element składowy
   EDIT_ES.SRST:=exec('get_srst_root','fst',SRST.ref());
   EDIT_ES.SRSR:=exec('get_srsr_root','fst',SRSR.ref());
   SRST.cntx_psh();
   EDIT_ES.Z_NST:=EDIT_ES.SRST().NST;
   EDIT_ES.Z_NRI:=EDIT_ES.SRST().NRI;
   SRST.cntx_pop();
   _grayed:='N';
   _default:='D'
||
:: zwykły środek
   EDIT_ES.SRST:=SRST.ref();
   EDIT_ES.SRSR:=SRSR.ref();
   _grayed:='NT';
   _default:='D'
?};
SRST.actions_grayed(_win,_grayed);
SRD.setActions(SSTALE.AO,_default);
::SRST.actions(_win,'',_default,1);
''


\br_srst_e
::----------------------------------------------------------------------------------------------------------------------
::  UTW: PJ [17.00]
:: OPIS: Formuła na rekord przed tabeli SRST, w oknie wertowania elementów składowych
::----------------------------------------------------------------------------------------------------------------------
SRST.SRSR();
SRD.REF:=SRSR.ref();
exec('rekprzed','color','SRST#04#')

:Sign Version 2.0 jowisz:1028 2019/06/07 15:55:44 555d7f2433ace75a53b8a2a07cb0fec29e6ef208bdce76e8ca1a8721c757eeaf1bb781e57871d0df16c5287429ed8fbe063d64d765666361a5f208fd14d6a73ed1aa00648df0e8930cc33436f68809510be7fe10e1e2cba5d4d24084f01f205e023b237a250f1633d2caa712821a83011c9e047c771b8cfa82f465e7464e18f5
