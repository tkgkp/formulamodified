:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !pkd_dos_prsz.fml
:: Utworzony: 10.06.2016
:: Autor: RWR
::======================================================================================================================
:: Zawartość: Obsługa czynności PKD_DOS_PRSZ - Rejestracja szkoleń BHP i PPOŻ.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rejestracja szkoleń BHP i PPOŻ. - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# permissions=F_ZATR,UD_SKL
::
::# kind=WE, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=T, keyref=T

params_set(params_get());
exec('main','kart_dod')


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rejestracja szkoleń BHP i PPOŻ. - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
_tab:=exec('desc','osoba',params_get().mp);

{? _tab.ZAW_DANE='T'
|| {? _tab.OBCY='T'
   || 'Zarejestruj szkolenie BHP / PPOŻ: %1 %2: Paszport - %3'@@[_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT]
   |? +_tab.PESEL
   || 'Zarejestruj szkolenie BHP / PPOŻ: %1 %2: PESEL - %3'@@[_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL]
   || 'Zarejestruj szkolenie BHP / PPOŻ: %1 %2: Data urodzenia - %3'@@[_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA]
   ?}
|| 'Zarejestruj szkolenie BHP / PPOŻ'@@
?}


\error
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Słownik komunikatów o błędach.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
'Rejestrowanie szkolenia BHP / PPOŻ niemożliwe.\nNie znaleziono osoby.'


\select
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Obsługa czynności wywołanej z listy zadań
::   WE: _a - Wskazanie osoby.
::   WY: Komunikat o błędzie lub informacja o wyjściu z okna poprzez wywołanie sel_exit() - czyli "Zakończ".
::----------------------------------------------------------------------------------------------------------------------
exec('select','kart_dod',_a,'SZKOLBHP','PKD_DOS_PRSZ','PKD_DOS_PPSZ')

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:16 5f64384de87af03eddff616c404b755224cc9df9b548048137665283b6ab67b14f645150377c653707a31760b6a74c4cb6d0d16c92e97ebf6706cc883f9a453cfacddbe90e4c02c19d93376fd36f0e53cfcd253c57832b7a9f606b778222b3f42a7f8d2b0c872c3dd3de91e7f901d8ccf0b8b393f3fa29a698c6fd5944b1cff6
