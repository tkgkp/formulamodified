:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !ctr_pco_zpwz.fml
:: Utworzony: 12.11.2015
:: Autor: MB
::======================================================================================================================
:: Zawartość: Formuły czynności CTR_PCO_ZPWZ - Przeglądanie podziałów umów-zleceń
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Przeglądanie podziałów umów-zleceń - główna formuła czynności CTR_PCO_ZPWZ
::----------------------------------------------------------------------------------------------------------------------
::# permissions=UD_SKL,F_ZATR


\add_tab
::----------------------------------------------------------------------------------------------------------------------
::  UTW: MB [17.00]
:: OPIS: Dodaje okno do okna grupowego
::   WE: _a - nazwa zakładki
::       _b - tabela
::       _c - okno grupowe
::----------------------------------------------------------------------------------------------------------------------
MBNwin2:=exec('mod_win','control',15);
_b.grp_sel(_c,SKID_MBN,MBNwin2,_a,"
   SmbnZ:=ZM.SKID_MBN:=UD_POM.SKID_MB:=SKID_MBN.ref();

   grp_disp(P,'CTR',1,1);

   ~~
",,,,,,,,'maximized_with_title');



task_attach('CTR_PCO_ZPWZ');
task_attach('CTR_PCO_ZPWF');

_b.tab_splt(_c,,'vertical','right');

_b.grp_sel(_c,P,'CTR',,"
   SKID_MBN.f_clear();
   VAR.CON:='Z';
   exec('ar_p','control');
   exec('opiszwym','control');
   exec('con_kk_title','control','WERZ')
",,,10,"
   exec('domyslny','schemat','PODZORG');
   UD_DEF.index('SYMBOL'); UD_DEF.prefix(UD_SCH.ref());UD_DEF.first();
   exec('filtruj_p','schemat','CTR',UD_DEF.ref(),'Z','T','W');
   SKID_MBN.index('TYP'); SKID_MBN.prefix('P');
   {? SKID_MBN.ref()=null
   || SKID_MBN.first();
      SmbnZ:=ZM.SKID_MBN:=UD_POM.SKID_MB:=SKID_MBN.ref()
   ?};
   {? var_press('SmbnZ')>0 || SKID_MBN.seek(SmbnZ) ?};
   grp_disp(SKID_MBN,MBNwin2,,1)
",,,,'maximized_with_title');


_b.tab_splt(_c,'right','horizontal','bottom');
_b.grp_sel(_c,CON_KK,'WERZ',,"
",,,,"",,,,'maximized_with_title');
VAR.CON:='Z';
UD_POM.ROK_KAL:=SSTALE.AR;
UD_POM.OKR_KAL:=SSTALE.AO;
SmbnZ:=null;
exec('set_okr','control','WERZ');
::G.win_fml('DODCON',,'K','RN','ICON_BEFORE',"exec('g_icon','godziny')");
exec('__F_ZATR','object');
~~

:Sign Version 2.0 jowisz:1045 2021/09/17 15:16:55 730d2add139ae75927d48382658283268e3a4b4ffe8767590726a08b3d78303a2f5511638735c28537748ba16eb3d589cce764e26e5f7621ee4ee350cda49fe63c85f6a4040acfbc4a8f10df7615a776abf6e4eb2021c6765e1735201a5692eae3221dd8e3d05d9ec96a34221e07fc9dec921fecfde41b2de1cd30fb104851e5
