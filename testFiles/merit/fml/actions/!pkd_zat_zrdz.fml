:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !pkd_zat_zrdz.fml
:: Utworzony: 29.03.2016
:: Autor: RWR
::======================================================================================================================
:: Zawartość: Obsługa czynności PKD_ZAT_ZRDZ - Rej. danych zleceniobiorcy.
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. danych zleceniobiorcy - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# permissions=F_ZATR,UD_SKL
::
::# kind=WE, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::
::# kind=WEW, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
::# kind=WY, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::# kind=WY, symbol=P, type=_P, name=Wskazanie pracownika, required=N, keyref=N
::# kind=WY, symbol=H_UM, type=_H_UM, name=Wskazanie umowy, required=N, keyref=N
::# kind=WY, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
:: UWAGA: do poprawnego działania poza procesami wykorzystywany jest kontekst, w którym musi być określone
:: H wskazujące na rekord w przebiegu zatrudnienia
::
params_set(params_get());
exec('main','wspolpraca','Z')


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. danych zleceniobiorcy - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
params_set(params_get());
_tab:=exec('desc','wspolpraca');

{? _tab.ZAW_DANE='T'
|| {? +_tab.STN & +_tab.UD_SKL
   || {? _tab.OBCY='T'
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      |? +_tab.PESEL
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      ?}
   || {? _tab.OBCY='T'
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP]
      |? +_tab.PESEL
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP]
      || 'Zarejestruj dane zleceniobiorcy: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP]
      ?}
   ?}
|| 'Zarejestruj dane zleceniobiorcy'@@
?}

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:17 3895963edbc1e9c12d4997e1c32401386a1a355aa89e9c7b5096841c8d8b1a1110987c7beee8cfdf1d5b7d68ae6570376bd328135e1844fc431d7a28f58a5b668e96d48852a362a5f038b06c11e5759b3f2fcd0d07c52079bf6b7f0ce41545a5505827ab129323e44785d26648d682f8ccdfcca82b6b6fdcba23495e64734119
