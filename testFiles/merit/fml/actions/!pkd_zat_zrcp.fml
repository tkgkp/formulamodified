:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !pkd_zat_zrcp.fml
:: Utworzony: 17.11.2016
:: Autor: RWR
::======================================================================================================================
:: Zawartość: Obsługa czynności PKD_ZAT_ZRCP - Rej. prac. dla RCP
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. prac. dla RCP - główna formuła czynności.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
::# permissions=F_ZATR,UD_SKL
::# kind=WE, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::
::# kind=WEW, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
::# kind=WY, symbol=OSOBA, type=_OSOBA, name=Wskazanie osoby, required=N, keyref=N
::# kind=WY, symbol=P, type=_P, name=Wskazanie pracownika, required=N, keyref=N
::# kind=WY, symbol=H_UM, type=_H_UM, name=Wskazanie umowy, required=N, keyref=N
::# kind=WY, symbol=H, type=_H, name=Wskazanie angażu, required=N, keyref=N
::
:: UWAGA: do poprawnego działania poza procesami wykorzystywany jest kontekst, w którym musi być określone
:: H wskazujące na rekord w przebiegu zatrudnienia
::
params_set(params_get());
exec('main','wspolpraca','R')


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: RWR [17.00]
:: OPIS: Rej. prac. dla RCP - formuła opisu zadania.
::   WE:
::   WY:
::----------------------------------------------------------------------------------------------------------------------
params_set(params_get());
_tab:=exec('desc','wspolpraca');

{? _tab.ZAW_DANE='T'
|| {? +_tab.STN & +_tab.UD_SKL
   || {? _tab.OBCY='T'
      || 'Zarejestruj pracownika dla RCP: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      |? +_tab.PESEL
      || 'Zarejestruj pracownika dla RCP: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      || 'Zarejestruj pracownika dla RCP: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5 (%6/%7)'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP,_tab.STN,_tab.UD_SKL]
      ?}
   || {? _tab.OBCY='T'
      || 'Zarejestruj pracownika dla RCP: %1 %2: Paszport - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PASZPORT,_tab.T,_tab.IP]
      |? +_tab.PESEL
      || 'Zarejestruj pracownika dla RCP: %1 %2: PESEL - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.PESEL,_tab.T,_tab.IP]
      || 'Zarejestruj pracownika dla RCP: %1 %2: Data urodzenia - %3, Numer teczki - %4, Identyfikator - %5'@@
            [_tab.NAZWISKO,_tab.PIERWSZE,_tab.UR_DATA,_tab.T,_tab.IP]
      ?}
   ?}
|| 'Zarejestruj pracownika dla RCP'@@
?}

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:17 7378d8e4bf171daecd3caf4515f012b414c55eba851c793ed237942193265a8d874c760f6506b25b83ab7f745dad5d34d57d3df138850c65fcb1055f4284f6fefa8c7a417f69b992aba6962ee28394646d621917e96ff4afa9b2e0e8f2df418984275331e623d3b738f9aba7a6fa3bf1443cdd0959dd5f4a4189ae3fa777de34
