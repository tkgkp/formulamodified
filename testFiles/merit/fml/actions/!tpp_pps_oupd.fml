:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: !tpp_pps_oupd.fml
:: Utworzony: 01.08.2018
:: Autor: TS
::======================================================================================================================
:: Zawartość: Formuły czynności TPP_PPS_KUPD - Aktualizacja obiektów planu strategicznego
::======================================================================================================================


\main
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Główna formuła czynności aktualizacji obiektów planu strategicznego (TPP_PPS_OUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       in  - [obj_new] - parametry wejściowe czynności
::       int - [obj_new] - parametry wewnętrzne czynności
::       out - [obj_new] - parametry wyjściowe czynności
::       mp  - obiekt odpowiedzialny za obsługę procesu
::----------------------------------------------------------------------------------------------------------------------
_out:=params_get().out;
_mp:=params_get().mp;

::# permissions=ODDZ
::# properties=SERVICE

::# kind=WY, symbol=RESULT, type=STRING, ^
::#          name="Wynik czynności (OK, gdy obiekty planu zostały zaktualizowane)", required=N
{? var_pres('RESULT',_out)<>type_of(~~) & var_pres('RESULT',_out)<>type_of('') || return() ?};

_result:=0;
_can_continue:=1;

{? _mp.isService()
|| _result:=exec('px_obj_init','px_obj',0)
|? _mp.akcja()='URUCHOM'
|| _result:=exec('px_obj_init','px_obj',1)
|| _can_continue:=0
?};
{? _can_continue>0
|| {? _result=0
   || _out.RESULT:='BŁĄD'
   || _out.RESULT:='OK'
   ?};
   _mp.save(,_out);
   _mp.done()
?};
~~


\desc
::----------------------------------------------------------------------------------------------------------------------
::  UTW: TS [18.42]
:: OPIS: Opis dla czynności aktualizacji obiektów planu strategicznego (TPP_PPS_OUPD)
::       UWAGA: do pobrania parametrów stosować params_get() = tablica nazwana:
::       mp  - obiekt odpowiedzialny za obsługę procesu
::   WY: zwraca opis Zadania
::----------------------------------------------------------------------------------------------------------------------
_desc:='Zaktualizuj obiekty planu strategicznego'@@;
_desc

:Sign Version 2.0 jowisz:1048 2020/10/16 15:19:21 be132ece4664b301b232fcbbe4755054274d6f8f0365d6e3c6ca6276f7dc5cf6d87d1a72433f975d836a4561cc3cb7427a810524440c1c738221826458720fc6657c9ef39e37af30eb19d5bca803299cb947f0c0309533e85285a1e81cce73e7cd72a165cf33bc79128effd1189d09b4e545f865bfa29cedb4427f50e550754b
