:!UTF-8
:: (c) Macrologic S.A. Wszelkie prawa zastrzeżone
::======================================================================================================================
:: Nazwa pliku: $test_dodaj_kalendarz.fml
:: Utworzony: 15.06.2020
:: Autor: ARTSLO
:: Systemy:
::======================================================================================================================
:: Zawartość: Test automatyczny dla obszaru ZWS - jego zadaniem jest utworzenie kalendarza standard na bieżący
::            rok o ile nie jest już założony
::======================================================================================================================
_test_driver:=exec('init','$lib_base','$test_dodaj_kalendarz_standard.log');
_test_driver.logger.info('START TESTU: $test_dodaj_kalendarz_standard.fml (time: '+$date()+' '+(time()$3)+')');

_obszar:=obj_new('PULPIT','USTAWIENIA_PARAM');
{? _b<>~~
|| _obszar.PULPIT:=_test_driver.app_activate(_b)
|| _obszar.PULPIT:=_test_driver.app_activate('1')
?};
_loop:=1;
_timeout:=_test_driver.timeout;
_test_driver.timeout:=1800000;

::WHEN
_obszar.USTAWIENIA_PARAM:=exec('otworz_obszar','$lib_base',_test_driver,'Ustawienia i parametryzacja');

_drzewo:=obj_new('title','branch_el');
_drzewo.title:='Parametryzacja';
_drzewo.branch_el:=obj_new(1);
_drzewo.branch_el[1]:=obj_new('kod','search_value');
_drzewo.branch_el[1].kod:='NAZWA';
_drzewo.branch_el[1].search_value:='Kalendarze';
_dodatkowy_war:='& _test_driver.execute("{? __FP_KON.TREE.TAB.FP_DID=\'ZWS_PAR_PKAL\' || \'1\' || \'0\' ?} ")=\'1\'';


{? exec('znajdz_w_drzewie','$lib_base',_test_driver,_drzewo,_dodatkowy_war)
|| _test_driver.click('btn:@Wybierz');
   {? _test_driver.exist('dial:') & _test_driver.state('dial:').title='Merit ERP' & (_test_driver.state('dial:').message)-5='Brak kalendarza standard na rok '
   || _test_driver.click('dbtn:OK')
   ?};
   _test_driver.send('', '{ESC}', '')
|| return()
?};

::THEN
_test_driver.app_close(_obszar.USTAWIENIA_PARAM);
_test_driver.logger.info('WYNIK TESTU: Test zakończony powodzeniem.');
_test_driver.logger.info('KONIEC TESTU: $test_dodaj_kalendarz_standard.fml (time: '+$date()+' '+(time()$3)+')');
_test_driver.timeout:=_timeout;
return(1)

:Sign Version 2.0 jowisz:1045 2021/09/17 15:17:03 93d515c71a9476d6402b4d5fe9acdcd17059e541a46e873d70f717261179089de9c769120d6febad6b50376eae929fe7240553f1ccada1e1e6a6de207782dc172d323e3d8e9af75dff99dffb53f6a458350c0ac9c399338a7b041a4aac6d97bbd54b2008f9fb6b35d3a5106bf71acf9041b4b1fa25cfe72366076710f6b0025a
