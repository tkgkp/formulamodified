:!UTF-8
{TITLE:PIT-11 formularz obowiązujący w roku 2008}
{PRINTER: exec('prt','param_wydr','v',KST),,,,,'Q','C',,,,,,1,5,5,5,5,1,0}
{BEGIN:
   {? var_pres('pit')>100 || obj_del(pit) ?};
   pit:=obj_new(35);
   {! _n:=1..35 |! pit[_n]:='' !};

   exec('czytaj','#stalesys',date(__Rok,12,0),KST);

   pit[ 1]:=KST.NIP;
   pit[ 4]:='';
   pit[ 5]:='';
   pit[ 6]:='';
   pit[ 9]:=KST.NAZWA+', '+KST.REG;
   pit[10]:='POLSKA';
   pit[11]:=KST.WOJEWODZ;
   pit[12]:=KST.POWIAT;
   pit[13]:=KST.GMINA;
   pit[14]:=KST.ULICA;
   pit[15]:=KST.DOM;
   pit[16]:=KST.LOKAL;
   pit[17]:=KST.MIASTO;
   pit[18]:=KST.KOD;
   pit[19]:=KST.POCZTA;
   poz85:=VAT_DEK.PITR;
   poz86:=VAT_DEK.IMIE;
   poz87:=VAT_DEK.NAZ;
   {! _n:=8..19 |! pit[_n]:=~(-pit[_n]) !};

   czy_raport:=0;

   {? var_pres('tab')>100 || obj_del(tab) ?};
   tab:=tab_tmp(2,'NR','INTEGER','Nr',
                  'NRK','INTEGER','Nrk',
                  'KW1','REAL','Kwota1',
                  'KW2','REAL','Kwota2',
                  'KW3','REAL','Kwota3',
                  'KW4','INTEGER','Kwota4');

   form_zg:="_x:=(_a*100)%100;_y:=((_a-((_a*100)%100))*100$0)%*100;
            {?_x=0&_y=0||form('zł,   gr',-25)||form(form(_x,16,0,'9,')+'zł, '+(('0'+$_y)+2)+'gr',-25)?}";

   CNT:="_c:=(_b-(+_a))%2; form(_c*' '+_a,_b)";
   {? VAT_DEK.KOR='T'
   || {? var_pres('__ord')>100 || obj_del(__ord) ?};
      __ord:=obj_new(13);
      {! _n:=1..obj_len(__ord) |! __ord[_n]:='' !};
      __ord[1]:=KST.NIP;
      __ord[5]:=KST.NAZWA;
      __ord[6]:=KST.SKROT;
      __ord[8]:=KST.REG
   ?}
}
{END:
   obj_del(pit); &pit;
   &CNT; &form_zg;
   obj_del(tab); &tab;
   &poz85; &poz86; &poz87; &czy_raport;
   exec('stalesys','#stalesys');
   {? VAT_DEK.KOR='T' || obj_del(__ord); &__ord ?}
}
{COMMENT}OLD: dek1116.rpm{COMMENT-}
{COMMENT}OLD: dkw11161.rpi{COMMENT-}
{COMMENT}OLD: dkw11162.rpi{COMMENT-}
{COMMENT}OLD: ord_zu1.rpi{COMMENT-}
{
   czy_raport:=0;

   pit[4]:=VAT_DEK.OD$4;
   pit[5]:=VAT_DEK.DO$4;
   pit[6]:=VAT_DEK.US().NU+
              {? +US.UU || ', '+US.UU || '' ?}+
              {? +US.UK & +US.MU || ', '+(6+US.UK)+' '+US.MU || '' ?};
   pit[6]:=~-pit[6];
   pit[ 7]:=VAT_DEK.KOR;
   pit[20]:=VAT_DEK.NIP;
   pit[21]:=VAT_DEK.NAZWISKO;
   pit[22]:=VAT_DEK.PIERWSZE;
   pit[23]:=VAT_DEK.DATA_UR$4;
   pit[24]:=VAT_DEK.PESEL;
   pit[25]:='POLSKA';
   pit[26]:=VAT_DEK.WOJEWODZ;
   pit[27]:=VAT_DEK.POWIAT;
   pit[28]:=VAT_DEK.GMINA;
   pit[29]:=VAT_DEK.ULICA;
   pit[30]:=VAT_DEK.DOM;
   pit[31]:=VAT_DEK.LOKAL;
   pit[32]:=VAT_DEK.MIASTO;
   pit[33]:=VAT_DEK.KOD;
   pit[34]:=VAT_DEK.POCZTA;
   pit[35]:=VAT_DEK.PKU;

   {! _n:=20..34 |! pit[_n]:=~-pit[_n] !};

   {? VAT_DEK.KOR='T'
   || __ord[2]:=VAT_DEK.NIP;
      __ord[9]:=VAT_DEK.NAZWISKO;
      __ord[10]:=VAT_DEK.PIERWSZE;
      __ord[11]:=VAT_DEK.DATA_UR$4;
      __ord[12]:=VAT_DEK.PESEL;
      __ord[13]:=exec('opis_korekty','edeklar');
      {! _n:=1..obj_len(__ord) |! __ord[_n]:=~(-__ord[_n]) !}
   ?};

   tab.prefix;
   VAT_POZ.index('NR_NRK');
   VAT_POZ.prefix(VAT_DEK.ref);
   {? VAT_POZ.first
   || {! |? tab.NR:=VAT_POZ.NR;
            tab.NRK:=VAT_POZ.NRK;
            {! _ind:=1..4
            |! _kw:=($('VAT_POZ.KW'+$_ind))();
               ($('tab.KW'+$_ind))():=_kw;
               {? _ind=1 & tab.NR<=12 || czy_raport+=_kw ?}
            !};
            tab.add;
            VAT_POZ.next
      !}
   ?};
   tab.prefix;
   ~~
}
{IF: czy_raport>0}
{FONT: 'q'}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_dkw11161.rpi}'}
{DIRECT-}
{PAGE}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_dkw11162.rpi}'}
{DIRECT-}
{PAGE}
{IF: VAT_DEK.KOR='T'}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_ord_zu1.rpi}'}
{DIRECT-}
{PAGE}
{FI}
{FI}