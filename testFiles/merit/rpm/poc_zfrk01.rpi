{COMMENT}
:: Rozwoj kariery
{COMMENT-}
{REP:
   _ret:='';

   ZZ_GOTW.cntx_psh();
   ZZ_GOTW.index('LINKOP');
   ZO_SK.cntx_psh();
   ZO_SK.index('OCENASTN');
   ZO_SK.prefix(ZO_TEST.ref());
   {? ZO_SK.first()
   || ZO_SK.prefix();
      _rodzic:=ZO_SK.ref();
      {!
      |? ZO_SK.ZO_SK & ZO_SK.seek(ZO_SK.ZO_SK,)
      |! _rodzic:=ZO_SK.ref()
      !};
      ZO_SK.index('TREE');

      frek:="
         _rodzic:=_a;
         _poziom:=_b;
         _lppref:=_c;
         _lpnr:=_d;
         _ret:=_e;

         _nl:='{LINE}';
         _ind:=_poziom*3;

         _lppref:=_lppref+{? _lpnr || $_lpnr+'. ' || '' ?};
         {? _lppref<>'' || _ret+='{ \\\'─\\\'*charleft()}'+_nl ?};
         _ret+='{<'+$_ind+'}'+_lppref+'Stanowisko: '+ZO_SK.STN().ST+_nl;

         ZZ_GOTW.prefix(ZO_SK.NP_DOK,ZO_SK.ZZ_DOK);
         {? ZZ_GOTW.first()
         || {!
            |? _ret+='{FONT: \\\''+{? ZZ_GOTW.POZIOM='T' || 'W8B' || 'W8' ?}+'\\\'}';
               _ret+=exec('string2rep','phr_druk',ZZ_GOTW.OPIS,_ind+3);
               _ret+='{<'+$(_ind+6)+'}Gotowość: '+{? ZZ_GOTW.POZIOM='T' || 'Tak' || 'Nie' ?};
               _ret+=', minimalna '+$ZZ_GOTW.MIN+', maksymalna '+$ZZ_GOTW.MAX+_nl;
               ZZ_GOTW.next()
            !}
         ?};

         _ret+=exec('memo2rep','phr_druk',ZZ_DOK,'NOTA',ZO_SK.ZZ_DOK,_ind,,130);

         ZO_SK.cntx_psh();
         ZO_SK.prefix(ZO_TEST.ref(),_rodzic);

         _loop:=ZO_SK.first();
         {? _loop || _lpd:=1 ?};
         {!
         |? _loop
         |! ZO_SK.cntx_psh();
            ZO_SK.prefix(ZO_TEST.ref(),ZO_SK.ref());
            {? ZO_SK.first()
            || _poziom+=1;
               _ret:=frek(#ZO_SK.ref(),_poziom,_lppref-1,_lpd,_ret);
               _lpd+=1
            || ZZ_GOTW.prefix(ZO_SK.NP_DOK,ZO_SK.ZZ_DOK);
               {? ZZ_GOTW.first()
               || {!
                  |? _ret+='{FONT: \\\''+{? ZZ_GOTW.POZIOM='T' || 'W8B' || 'W8' ?}+'\\\'}';
                     _ret+=exec('string2rep','phr_druk',ZZ_GOTW.OPIS,_ind+3);
                     _ret+='{<'+$(_ind+6)+'}Gotowość: '+{? ZZ_GOTW.POZIOM='T' || 'Tak' || 'Nie' ?};
                     _ret+=', minimalna '+$ZZ_GOTW.MIN+', maksymalna '+$ZZ_GOTW.MAX+_nl;
                     ZZ_GOTW.next()
                  !};
                  _ret+=exec('memo2rep','phr_druk',ZZ_DOK,'NOTA',ZO_SK.ZZ_DOK,_ind,,130)
               ?};
            ?};
            ZO_SK.cntx_pop();
            _loop:=ZO_SK.next()
         !};
         ZO_SK.cntx_pop();
         _ret
      ";

      _ret:=frek(_rodzic,0,'',0,_ret);
      &frek

   ?};
   ZO_SK.cntx_pop();
   ZZ_GOTW.cntx_pop();
   _ret
}