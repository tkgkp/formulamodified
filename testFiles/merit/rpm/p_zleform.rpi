:!UTF-8
{BEGIN:
   VAR_DEL.delete('cnt','dni','Tresc','Dni','Godziny','rep','indent','lmt','pars','par');
   VAR_DEL.delete('czy_pep','czy_szablon','czy_paperless','__CALL');
   P.cntx_psh();
   pars:=obj_new(5);
   {! _ii:=1..5 |! pars[_ii]:='' !};
   par:=params_get();
   {? var_pres('typ')=type_of('')
   || _new:=exec('obj_ntab_set','#array',
         {? var_pres('par')>100 || par || ~~ ?},
         'DRUK',typ,
         'P',exec('rach_do_umowy','!ppl_zlc_wydr'),
         'ZAL',''
      );
      VAR_DEL.delete('par');
      par:=_new;
      obj_del(_new); &_new
   ?};
   __xr_ins:=0;
   _symRaportu:={? par.DRUK='uz' || 'PXX_UZ' || 'PXX_UD' ?};
   czy_szablon:=exec('rep_set','rap_zew',_symRaportu,1)='T';
   czy_pep:=var_pres('par')>100 & var_pres('PEP',par)>0;
   _paperless:=czy_pep & var_pres('active',par.PEP)>0 & par.PEP.active;
   {? _paperless
   || czy_paperless:=0;
      {? ~czy_szablon & exec('rep_set','rap_zew',_symRaportu)<>'T' & par.PEP.fml_after=""
      || czy_paperless:=1
      ?}
   || czy_paperless:=1
   ?};
   {? var_pres('typ')<0
   || {? exec('rep_set','rap_zew',_symRaportu)='T'
      || cnt:=0;
         dni:='';
         __xr_ins:=exec('new_ins','rap_zew',_symRaportu)
      ?}
   ?};
   indent:=lmt:=1;
   Tresc:='';
   Dni:=14;
   Godziny:=0;
   _TAB:=tab_tmp(1,
      'REP','STRING[150]','Osoba reprezentująca zakład',
      'TR','SYS_MEMO','Przedmiot umowy',
      'GODZ','REAL','Przewidywany wymiar godzin',
      'DNI','INTEGER','Ilość dni',
      'ZLEC','STRING[60]','Zleceniobiorca',
      'NR','STRING[20]','Numer umowy'
   );
   _TAB.fld_fml('REP','F3',"params_exec('lista','ext_slo','PRZEDZAK')");
   {? _paperless
   || {? par.PEP.P
      || params_set(
            exec('obj_ntab_set','#array',par,
               'TAB',_TAB,
               'paperless',_paperless,
               'CALL',null(),
               'P',exec('wybierz_silent','pracownik',par.PEP.P).P
            )
         )
      || params_set(
            exec('obj_ntab_set','#array',par,
               'TAB',_TAB,
               'paperless',_paperless,
               'CALL',null(),
               'P',exec('wybierz_silent','pracownik',ZC.P).P
            )
         )
      ?}
   || params_set(
         exec('obj_ntab_set','#array',par,
            'TAB',_TAB,
            'paperless',_paperless,
            'CALL',null(),
            'P',{? var_pres('typ')=type_of('') || par.P || null() ?}
         )
      )
   ?}
}
{END:
   P.cntx_pop();
   VAR_DEL.delete('par','pars','typ','Tresc','Dni','Godziny','rep','indent','lmt');
   VAR_DEL.delete('czy_pep','czy_szablon','czy_paperless','__CALL');
   {? var_pres('cnt')=type_of(1)
   || VAR_DEL.delete('cnt','dni');
      exec('del_ins','rap_zew',&__xr_ins)
   ?}
}