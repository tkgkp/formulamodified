:!UTF-8
{TITLE:IFT-1(10) (2013 r.)}
{PRINTER: exec('prt','param_wydr','v',KST),,,,,'Q','C',,,,,,1,5,5,5,5,1,
   exec('tryb_pdf','pit','IFT-1')='T',exec('tryb_druku','pit','IFT-1')}
{BEGIN:
   VAR_DEL.delete('__pit','__deklar','CNT','pdf','y','__ord');

   CNT:="_c:=(_b-(+_a))%2; form(_c*' '+_a,_b)";

   __pit:=obj_new(80);
   {! _i:=1..obj_len(__pit) |! __pit[_i]:='' !};
   exec('stalesys','#stalesys',VAT_DEK.DO);

   __pit[1]:=KST.NIP;
   __pit[9]:=KST.NAZWA+', '+KST.REG;
   __pit[10]:=KST.KRAJ().NAZ;
   __pit[11]:=KST.WOJEWODZ;
   __pit[12]:=KST.POWIAT;
   __pit[13]:=KST.GMINA;
   __pit[14]:=KST.ULICA;
   __pit[15]:=KST.DOM;
   __pit[16]:=KST.LOKAL;
   __pit[17]:=KST.MIASTO;
   __pit[18]:=KST.KOD;
   __pit[19]:=KST.POCZTA;

   __ord:=obj_new(13);
   {! _n:=1..obj_len(__ord) |! __ord[_n]:='' !};
   __ord[1]:=KST.NIP;
   __ord[5]:=KST.NAZWA;
   __ord[6]:=KST.SKROT;
   __ord[8]:=KST.REG;

   pdf:=exec('tryb_pdf','pit','IFT-1')='T';
   {? pdf
   || exec('rpm_as_pdf_ini','rpm_pdf');
      y:=0;
      VAR_DEL.delete('x','w');
      x:=obj_new(4);
      w:=obj_new(4)
   ?};
   ~~
}
{END:
   {? pdf
   || VAR_DEL.delete('x','w');
      &y;
      exec('rpm_as_pdf_end','rpm_pdf')
   ?};
   &pdf;
   VAR_DEL.delete('__pit','__deklar','CNT','__ord');
   exec('stalesys','#stalesys');
   ~~
}
{COMMENT}OLD: dekift110.rpm{COMMENT-}
{COMMENT}OLD: ift1101.rpi{COMMENT-}
{COMMENT}OLD: ift1102.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2.rpi{COMMENT-}
{COMMENT}OLD: ift110g.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2g.rpi{COMMENT-}
{  {! _i:=20..33 |! __pit[_i]:='' !};
   {! _i:=34..73 |! __pit[_i]:=0 !};

   VAT_POZ.index('NR_NRK');
   VAT_POZ.prefix(VAT_DEK.ref);
   {? VAT_POZ.first
   || {!
      |? {! _ind:=1..4
         |! _kw:=($('VAT_POZ.KW'+$_ind))();
            _poz:=($('VAT_POZ.P'+$_ind))();
            {? _poz>=1 & _poz<=obj_len(__pit) || __pit[_poz]:=_kw ?}
         !};
         VAT_POZ.next
      !}
   ?};

   __pit[4]:=VAT_DEK.OD;
   __pit[5]:=VAT_DEK.DO;
   __pit[6]:=VAT_DEK.US().NU+{? +US.UU || ', '+US.UU || '' ?}+
           {? +US.UK & +US.MU || ', '+(6+US.UK)+' '+US.MU || '' ?};
   __pit[7]:={? VAT_DEK.KOR='T' || '2' || '1' ?};
   __pit[8]:=VAT_DEK.POD;

   __pit[20]:=VAT_DEK.NAZWISKO;
   __pit[21]:=VAT_DEK.PIERWSZE;
   __pit[22]:=VAT_DEK.OJCIEC;
   __pit[23]:=VAT_DEK.MATKA;
   __pit[24]:=VAT_DEK.DATA_UR;
   __pit[25]:=VAT_DEK.UR_MIEJ;
   __pit[26]:=VAT_DEK.NIP;
   __pit[27]:='Rodzaj: '+{? VAT_DEK.PAR1='N' || 'NIP' || 'PASZPORT'?}+(16*' ')+' Kraj: '+(~-VAT_DEK.KRAJPASZ().NAZ);
   __pit[28]:=~-VAT_DEK.KRAJ().NAZ;
   __pit[29]:=VAT_DEK.MIASTO;
   __pit[30]:=VAT_DEK.KOD;
   __pit[31]:=VAT_DEK.ULICA;
   __pit[32]:=VAT_DEK.DOM;
   __pit[33]:=VAT_DEK.LOKAL;
   __pit[74]:=VAT_DEK.D1;
   __pit[75]:=VAT_DEK.D2;
   __pit[76]:=~-VAT_DEK.IMIE;
   __pit[77]:=~-VAT_DEK.NAZ;
   __pit[78]:=VAT_DEK.DATA;
   {? VAT_DEK.KOR='T'
   || __ord[2]:=VAT_DEK.NIP;
      __ord[9]:=VAT_DEK.NAZWISKO;
      __ord[10]:=VAT_DEK.PIERWSZE;
      __ord[11]:=VAT_DEK.DATA_UR$4;
      __ord[12]:=VAT_DEK.PESEL;
      __ord[13]:=exec('opis_korekty','edeklar');
      {! _n:=1..obj_len(__ord) |! __ord[_n]:=~(-__ord[_n]) !}
   ?};

   __deklar:={? VAT_DEK.TYP='IFT1' || 1 || 0 ?};
~~}
{IF: pdf}
   {REP: '{INCLUDE: ppl_ift110g.rpi}'}
{ELSE}
{FONT:'q'}
{DIRECT}
{SPACE:'d'}{REP: '{INCLUDE: ppl_ift1101.rpi}'}
{DIRECT-}
{PAGE}
{FONT:'q'}
{DIRECT}
{SPACE:'d'}{REP: '{INCLUDE: ppl_ift1102.rpi}'}
{DIRECT-}
{PAGE}
{FI}
{IF: VAT_DEK.KOR='T'}
{IF: pdf}
{REP: '{INCLUDE: ppl_ord_zu2g.rpi}'}
{ELSE}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_ord_zu2.rpi}'}
{DIRECT-}
{PAGE}
{FI}
{FI}