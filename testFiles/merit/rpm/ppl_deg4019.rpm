:!UTF-8
{TITLE:PIT-40(19) formularz obowiązujący w roku 2013}
{PRINTER: exec('prt','param_wydr','v',KST),,,,,'Q','C',,,,,,1,5,5,5,5,1,
          exec('getFile','podpis')<>'' | exec('tryb_pdf','pit','pit-40')='T',
          exec('tryb_druku','pit','pit-40')
}
{BEGIN:
   {? var_pres('pit')>100 || obj_del(pit) ?};
   pit:=obj_new(76);
   {! _n:=1..23 |! pit[_n]:='' !};
   {! _n:=24..obj_len(pit) |! pit[_n]:=0 !};
   pit[60]:=pit[69]:='';

   exec('czytaj','#stalesys',date(__Rok,12,0),KST);

   pit[1]:=KST.NIP;
   pit[4]:='';
   pit[5]:='';
   pit[6]:='';
   pit[8]:=KST.NAZWA+', '+KST.REG;
   {! _n:=1..8 |! pit[_n]:=~(-pit[_n]) !};

   czy_raport:=0;

   CNT:="_c:=(_b-(+_a))%2; form(_c*' '+_a,_b)";


   {? var_pres('__ord')>100 || obj_del(__ord) ?};
   __ord:=obj_new(13);
   {! _n:=1..obj_len(__ord) |! __ord[_n]:='' !};
   __ord[1]:=KST.NIP;
   __ord[5]:=KST.NAZWA;
   __ord[6]:=KST.SKROT;
   __ord[8]:=KST.REG;
   pdf:=exec('tryb_pdf','pit','PIT-40')='T';
   {? pdf
   || exec('rpm_as_pdf_ini','rpm_pdf'); y:=0
   ?};
   VAR_DEL.delete('__P_UPR');
   __P_UPR:=exec('dostepne_p','schemat','PPL',P_FILTER.F_ZATR().KOD,'*');
   __P_UPR.prefix()
}
{END:
   obj_del(pit); &pit;
   &CNT; &czy_raport;
   exec('stalesys','#stalesys');
   obj_del(__ord); &__ord;
   {? pdf
   || exec('rpm_as_pdf_end','rpm_pdf'); &y
   ?};&pdf;
   VAR_DEL.delete('__P_UPR')
}
{COMMENT}OLD: deg4019.rpm{COMMENT-}
{COMMENT}OLD: dkw40191.rpi{COMMENT-}
{COMMENT}OLD: dkw40192.rpi{COMMENT-}
{COMMENT}OLD: dkw40193.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2.rpi{COMMENT-}
{COMMENT}OLD: dkw4019g.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2g.rpi{COMMENT-}
{FOR: VAT_DEK}
{INDEX: 'VAT_PITG'}
{PREFIX: PIT_GRUP.ref}
{DO}
{IF: __P_UPR.find_key($VAT_DEK.P)}
{  czy_raport:=0;
   pit[4]:=pit[5]:=pit[6]:='';
   {! _nx:=9..23 |! pit[_nx]:='' !};
   {! _nx:=24..obj_len(pit) |! pit[_nx]:=0 !};
   pit[60]:=pit[69]:='';
   VAT_POZ.index('NR_NRK');
   VAT_POZ.prefix(VAT_DEK.ref);
   {? VAT_POZ.first
   || {!
      |?
      {! _ind:=1..4
      |! _kw:=($('VAT_POZ.KW'+$_ind))();
         _poz:=($('VAT_POZ.P'+$_ind))();
         {? _poz>=1 & _poz<=obj_len(pit)
         || pit[($('VAT_POZ.P'+$_ind))()]:=_kw;
            {? VAT_POZ.NR=12 || pit[60]:=82+VAT_POZ.RODZ ?};
            {? VAT_POZ.NR=20 || pit[69]:=82+VAT_POZ.RODZ ?}
         ?};
         {? _ind=1 & VAT_POZ.NR<=8 || czy_raport+=_kw ?}
      !};
      VAT_POZ.next
      !}
   ?};~~
}
{IF: czy_raport>0}
{  pit[4]:=VAT_DEK.OKRES;
   pit[5]:=VAT_DEK.US().NU+{? +US.UU || ', '+US.UU || '' ?}+
           {? +US.UK & +US.MU || ', '+(6+US.UK)+' '+US.MU || '' ?};
   pit[5]:=~-pit[5];
   pit[6]:=VAT_DEK.KOR;
   pit[9]:={? VAT_DEK.PESEL='' || VAT_DEK.NIP || VAT_DEK.PESEL ?};
   pit[10]:=VAT_DEK.DATA_UR$4;
   pit[11]:=VAT_DEK.NAZWISKO;
   pit[12]:=VAT_DEK.PIERWSZE;
   {? VAT_DEK.KRAJ<>null || pit[13]:=VAT_DEK.KRAJ().NAZ || pit[13]:='' ?};
   pit[14]:=VAT_DEK.WOJEWODZ;
   pit[15]:=VAT_DEK.POWIAT;
   pit[16]:=VAT_DEK.GMINA;
   pit[17]:=VAT_DEK.ULICA;
   pit[18]:=VAT_DEK.DOM;
   pit[19]:=VAT_DEK.LOKAL;
   pit[20]:=VAT_DEK.MIASTO;
   pit[21]:=VAT_DEK.KOD;
   pit[22]:=VAT_DEK.POCZTA;
   {! _n:=11..22 |! pit[_n]:=~(-pit[_n]) !};
   pit[23]:=VAT_DEK.PITR;
   pit[24]:=#VAT_DEK.PKU;
   pit[74]:=VAT_DEK.IMIE;
   pit[75]:=VAT_DEK.NAZ;
   {? VAT_DEK.KOR='T'
   || __ord[2]:=VAT_DEK.NIP;
      __ord[9]:=VAT_DEK.NAZWISKO;
      __ord[10]:=VAT_DEK.PIERWSZE;
      __ord[11]:=VAT_DEK.DATA_UR$4;
      __ord[12]:=VAT_DEK.PESEL;
      __ord[13]:=exec('opis_korekty','edeklar');
      {! _n:=1..obj_len(__ord) |! __ord[_n]:=~(-__ord[_n]) !}
   ?};
   ~~
}
{IF:pdf}
{REP: '{INCLUDE: ppl_dkw4019g.rpi}'}
{IF: VAT_DEK.KOR='T'}
{REP: '{INCLUDE: ppl_ord_zu2g.rpi}'}
{FI}
{ELSE}
{FONT: 'q'}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_dkw40191.rpi}'}
{DIRECT-}
{PAGE}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_dkw40192.rpi}'}
{DIRECT-}
{PAGE}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_dkw40193.rpi}'}
{DIRECT-}
{PAGE}
{IF: VAT_DEK.KOR='T'}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_ord_zu2.rpi}'}
{DIRECT-}
{PAGE}
{FI}
{FI}
{FI}
{FI}
{OD}