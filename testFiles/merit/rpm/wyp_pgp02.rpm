:!UTF-8
{TITLE: Pracownicy nieprzypisani do żadnej grupy}
{PRINTER: INFO.W_PRN,,,,,'E','C',,,,,,1,PAR_WYDR.MLEFT,PAR_WYDR.MTOP,PAR_WYDR.MRIGHT,PAR_WYDR.MBOT,0,1}
{INCLUDE: wyp_beginend.rpi}
{"---Definicja wiersza wydruku ."; ~~}
{PRN.add("lp+=1;form(lp,,0)",3,'Lp.',1); ~~}
{PRN.add("__PRAC.OSOBA",30,'Imię i nazwisko'); ~~}
{PRN.add("__PRAC.ZA",15,'Zatrudniony?'); ~~}
{PRN.add("__PRAC.ST",40,'Stanowisko'); ~~}
{PODTYTUL:='';~~}
{INCLUDE: wsp_pw.rpi}
{PAR_WYDR.TITLE:='PRACOWNICY NIEPRZYPISANI DO ŻADNEJ GRUPY';~~}
{INCLUDE: wyp_idruk01.rpi}
{P.clear();
 _p6520:=exec('get','#params',6520,2,OPERATOR.USER);
 _sql:=sql('select distinct P.REFERENCE as P from POZPG join P using (POZPG.P,P.REFERENCE)');
 _lista:='';
 {? _sql.first()
 || {!|?
       _lista+='('''+_sql.P+'''),';
      _sql.next()
    !}
 ?};
 _lista:=_lista-1;
 {? _lista=''
 || _where:=''
 || _where:='P.REFERENCE NOT in VALUES'+_lista
 ?};
 _view:=1+_p6520;
 _jorg:=_p6520+1;
 exec('filtruj_p','wyp',1+_p6520,_p6520+1,_where);
 {? P.f_first()
 || {!
    |?
       __PRAC.OSOBA:=P.OSOBA().PIERWSZE+' '+P.OSOBA().NAZWISKO;
       __PRAC.ZA:=P.ZA;
       __PRAC.ST:=P.ST().ST;
       __PRAC.add();
       P.f_next()
    !}
 ?}; ~~
}
{FOR: __PRAC}
{DO}
 {SUBSTITUTE: 'LINIA0'}
{OD}
{PODTYTUL:='';~~}
