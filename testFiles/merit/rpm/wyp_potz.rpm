:!UTF-8
{TITLE:1. Potwierdzenie zwrotu}
{PRINTER: INFO.W_PRN,,,,,'E','C',,,,,,1,PAR_WYDR.MLEFT,PAR_WYDR.MTOP,
      PAR_WYDR.MRIGHT,PAR_WYDR.MBOT,0,1}
{INCLUDE: wyp_beginend.rpi}
{"---Definicja wiersza wydruku ."; ~~}
{ {? var_pres('__licznik')>=0 || &__licznik ?};
  __licznik:=0;
  undefine();
  define('PAR1',0,'Ilość atrybutów na wydruku'@);
  DK.cntx_psh();
  DK_C.cntx_psh();
  M.cntx_psh();
  M.clear();
  KARO.cntx_psh();
  KARO.prefix();
  {? KARO.seek(KARO.KARO,) & KARO.DK<>null() & DK.name<>8+$KARO.DK
  || DK.use(8+$KARO.DK)
  ?};
  {? DK.seek(KARO.DK)
  || {? DK.DK_C<>null() & DK_C.name<>8+$DK.DK_C
     || DK_C.use(DK.DK_C)
     ?};
     {? DK_C.seek(DK.DK_C)
     || def_edit("{? DEFINE.PAR1<0 | DEFINE.PAR1>10
                  || FUN.info('Należy podać liczbę z przedziału od 0 do 10'@);'PAR1'
                  || 1
                  ?}",'Parametry wydruku'@)
     || DEFINE.PAR1:=0
     ?}
  ?};
  KARO.cntx_pop();
~~}
{IF: VAR.TRYBRODZ=0}
{PRN.add("KARO.MGRP().KOD",20,'Podgrupa'@); ~~}
{PRN.add("KARO.MGRP().NAZ",20,'Nazwa'@); ~~}
{PRN.add("KARO.M().KTM",20,'Materiał'@); ~~}
{PRN.add("KARO.M().N",20,'Nazwa'@); ~~}
{ELSE}
{PRN.add("KARO.MGRP().KOD",20,'Kod'@); ~~}
{PRN.add("KARO.MGRP().NAZ",40,'Nazwa'@); ~~}
{FI}
{PRN.add("form(KARO.IL,10,2)",10,'Ilość'@,1); ~~}
{WHILE: (__licznik+=1)<=DEFINE.PAR1}
{DO}
{PRN.add($('DK_C.WAR'+form(__licznik,-2,0)),10,'Wartość'+$__licznik,1); ~~}
{OD}
{COMMENT}Zalozenie ze OSOBA stoi na wlasciwym rekordzie{COMMENT-}
{PAR_WYDR.TITLE:='Potwierdzenie zwrotu'@;~~}
{PODTYTUL:=OSOBA.NAZWISKO+' '+OSOBA.PIERWSZE+' '+OSOBA.DRUGIE;~~}
{INCLUDE: wsp_pw.rpi}
{INCLUDE: wyp_idruk01.rpi}
{SUBSTITUTE: 'LINIA0'}
{{? var_pres('__licznik')>=0 || &__licznik ?};~~}
{ DK.cntx_pop();
  DK_C.cntx_pop();
  M.cntx_pop();
~~}