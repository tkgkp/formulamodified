:!UTF-8
{TITLE:PIT-8C (6) formularz aktualny na rok 2013}
{PRINTER: exec('prt','param_wydr','v',KST),,,,,'Q','C',,,,,,1,5,5,5,5,1,
   exec('tryb_pdf','pit','PIT-8C')='T',exec('tryb_druku','pit','PIT-8C')}
{BEGIN:
   VAR_DEL.delete('pit','CNT','form_zg','Linia','__ord');
   pit:=obj_new(58);
   {! _n:=1..23 |! pit[_n]:='' !};
   {! _n:=24..obj_len(pit) |! pit[_n]:=0 !};

   pit[4]:=VAT_DEK.OKRES;
   exec('czytaj','#stalesys',date(#pit[4],12,0));

   pit[1]:=KST.NIP;
   pit[8]:=KST.NAZWA+', '+KST.REG;    'Platnik niebedacy osoba fizyczna';
   pit[9]:='';                        'Platnik bedacy osoba fizyczna';

   {! _n:=1..9 |! pit[_n]:=~(-pit[_n]) !};

   Linia:=0;

   form_zg:="_x:=(_a*100)%100;_y:=((_a-((_a*100)%100))*100$0)%*100;
             {?_x=0&_y=0||form('zł,   gr',-_b)||form(form(_x,16,0,'9,')+'zł, '+(('0'+$_y)+2)+'gr',-_b)?}
            ";
   CNT:="_c:=(_b-(+_a))%2; form(_c*' '+_a,_b)";

   __ord:=obj_new(13);
   {! _n:=1..obj_len(__ord) |! __ord[_n]:='' !};
   __ord[1]:=KST.NIP;
   __ord[5]:=KST.NAZWA;
   __ord[6]:=KST.SKROT;
   __ord[8]:=KST.REG;

   VAT_POZ.cntx_psh();
   pdf:=exec('tryb_pdf','pit','PIT-8C')='T';
   {? pdf
   || exec('rpm_as_pdf_ini','rpm_pdf');
      y:=0;
      VAR_DEL.delete('x','w');
      x:=obj_new(4);
      w:=obj_new(4)
   ?}
}
{END:
   VAR_DEL.delete('pit','CNT','form_zg','Linia','__ord');
   VAT_POZ.cntx_pop;
   {? pdf
   || VAR_DEL.delete('x','w');
      &y;
      exec('rpm_as_pdf_end','rpm_pdf')
   ?};
   &pdf;
   exec('stalesys','#stalesys')
}
{COMMENT}OLD: dek8c06.rpm{COMMENT-}
{COMMENT}OLD: deklw8c1.rpi{COMMENT-}
{COMMENT}OLD: deklw8c2.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2.rpi{COMMENT-}
{COMMENT}OLD: deklw8cg.rpi{COMMENT-}
{COMMENT}OLD: ord_zu2g.rpi{COMMENT-}
{MACRO: 'PIT'}
{  {! _n:=10..24 |! pit[_n]:='' !};
   {! _n:=25..obj_len(pit) |! pit[_n]:=0 !};
   pit[26]:=pit[28]:='';

   VAT_POZ.index('NR_NRK');
   VAT_POZ.prefix(VAT_DEK.ref);
   {? VAT_POZ.first
   || {!
      |? {! _ind:=1..4
         |! _kw:=($('VAT_POZ.KW'+$_ind))();
            _poz:=($('VAT_POZ.P'+$_ind))();
            {? _poz>=1 & _poz<=obj_len(pit) || pit[_poz]:=_kw ?};
            {? _ind=4 & (VAT_POZ.NR=1 | VAT_POZ.NR=2 | VAT_POZ.NR=3)
            || pit[_poz-1]:=VAT_POZ.RODZ
            ?}
         !};
         VAT_POZ.next
      !}
   ?};

   pit[5]:=VAT_DEK.US().NU+{? +US.UU || ', '+US.UU || '' ?}+
           {? +US.UK & +US.MU || ', '+(6+US.UK)+' '+US.MU || '' ?};
   pit[5]:=~-pit[5];
   pit[6]:=VAT_DEK.KOR;
   pit[10]:={? VAT_DEK.PESEL='' || VAT_DEK.NIP || VAT_DEK.PESEL ?};
   pit[11]:=VAT_DEK.NAZWISKO;
   pit[12]:=VAT_DEK.PIERWSZE;
   pit[13]:=VAT_DEK.DATA_UR$4;
   pit[14]:={? VAT_DEK.KRAJ || VAT_DEK.KRAJ().NAZ || '' ?};
   pit[15]:=VAT_DEK.WOJEWODZ;
   pit[16]:=VAT_DEK.POWIAT;
   pit[17]:=VAT_DEK.GMINA;
   pit[18]:=VAT_DEK.ULICA;
   pit[19]:=VAT_DEK.DOM;
   pit[20]:=VAT_DEK.LOKAL;
   pit[21]:=VAT_DEK.MIASTO;
   pit[22]:=VAT_DEK.KOD;
   pit[23]:=VAT_DEK.POCZTA;
   {! _n:=10..23 |! pit[_n]:=~-pit[_n] !};
   pit[50]:=~-VAT_DEK.IMIE;
   pit[51]:=~-VAT_DEK.NAZ;

   {? VAT_DEK.KOR='T'
   || __ord[2]:=VAT_DEK.NIP;
      __ord[9]:=VAT_DEK.NAZWISKO;
      __ord[10]:=VAT_DEK.PIERWSZE;
      __ord[11]:=VAT_DEK.DATA_UR$4;
      __ord[12]:=VAT_DEK.PESEL;
      __ord[13]:=exec('opis_korekty','edeklar');
      {! _n:=1..obj_len(__ord) |! __ord[_n]:=~(-__ord[_n]) !}
   ?};
   ~~
}
{IF: pdf}
{REP:'{INCLUDE: ppl_deklw8cg.rpi}'}
{ELSE}
{FONT: 'q'}
{DIRECT}
{SPACE: 'd'}{INCLUDE: ppl_deklw8c1.rpi}
{DIRECT-}
{PAGE}
{DIRECT}
{SPACE: 'd'}{INCLUDE: ppl_deklw8c2.rpi}
{FI}
{DIRECT-}
{MACRO-}
{SUBSTITUTE: 'PIT'}
{IF: VAT_DEK.KOR='T'}
{IF: pdf}
{REP: '{INCLUDE: ppl_ord_zu2g.rpi}'}
{ELSE}
{DIRECT}
{SPACE: 'd'}{REP: '{INCLUDE: ppl_ord_zu2.rpi}'}
{DIRECT-}
{PAGE}
{FI}
{FI}